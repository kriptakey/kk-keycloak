<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Kripta Key management with CLIKK &mdash; Kripta Key Documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b20cc3f5" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=19f00094" />

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=03d93ebb"></script>
        <script src="../_static/doctools.js?v=888ff710"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Supplementary CLIKK usage" href="supplementary-clikk-usage.html" />
    <link rel="prev" title="Kripta Key management overview" href="kripta-key-structure.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            Kripta Key Documentation
          </a>
              <div class="version">
                24.1.0015-RC-UP02
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../revision-history.html">Revision History</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../kripta-key-primer.html">Kripta Key Primer</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../installation-guide/index.html">Installation Guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../clikk-installation-guide/index.html">CLIKK Installation Guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../cloud-installation-guide/index.html">Cloud Installation Guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../kkts-guide/index.html">KK-TS Guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tdp-installation-guide/index.html">TDP Installation Guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../license-guide/index.html">License Application Guide</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">System Administrator Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="index.html#preface">Preface</a></li>
<li class="toctree-l2"><a class="reference internal" href="kripta-key-structure.html">Kripta Key management overview</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Kripta Key management with CLIKK</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#configuration">Configuration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#clikk-conf-server"><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">conf</span> <span class="pre">server</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#clikk-conf-get-collateral"><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">conf</span> <span class="pre">get-collateral</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#clikk-conf-version"><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">conf</span> <span class="pre">version</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#clikk-conf-recovery-card-version"><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">conf</span> <span class="pre">recovery-card-version</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#clikk-conf-administrator-card-version"><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">conf</span> <span class="pre">administrator-card-version</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#administrator">Administrator</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#clikk-admin-add"><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">admin</span> <span class="pre">add</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#clikk-admin-change-password"><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">admin</span> <span class="pre">change-password</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#clikk-admin-list"><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">admin</span> <span class="pre">list</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#clikk-admin-info"><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">admin</span> <span class="pre">info</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#clikk-admin-unlock"><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">admin</span> <span class="pre">unlock</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#clikk-admin-reset-password"><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">admin</span> <span class="pre">reset-password</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#clikk-admin-delete"><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">admin</span> <span class="pre">delete</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#partition">Partition</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#clikk-partition-add"><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">partition</span> <span class="pre">add</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#clikk-partition-list"><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">partition</span> <span class="pre">list</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#clikk-partition-info"><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">partition</span> <span class="pre">info</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#clikk-partition-change-password"><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">partition</span> <span class="pre">change-password</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#clikk-partition-reset-password"><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">partition</span> <span class="pre">reset-password</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#clikk-partition-add-app"><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">partition</span> <span class="pre">add-app</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#clikk-partition-unlock-app"><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">partition</span> <span class="pre">unlock-app</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#clikk-partition-delete-app"><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">partition</span> <span class="pre">delete-app</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#clikk-partition-delete"><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">partition</span> <span class="pre">delete</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#key">Key</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#clikk-key-add"><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">key</span> <span class="pre">add</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#clikk-key-list"><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">key</span> <span class="pre">list</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#clikk-key-info"><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">key</span> <span class="pre">info</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#clikk-key-rotate"><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">key</span> <span class="pre">rotate</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#clikk-key-update"><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">key</span> <span class="pre">update</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#clikk-key-export"><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">key</span> <span class="pre">export</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#clikk-key-import-pkcs11"><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">key</span> <span class="pre">import-pkcs11</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#clikk-key-import-pkcs12"><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">key</span> <span class="pre">import-pkcs12</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#clikk-key-generate-csr"><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">key</span> <span class="pre">generate-csr</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#clikk-key-revoke"><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">key</span> <span class="pre">revoke</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#clikk-key-delete"><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">key</span> <span class="pre">delete</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#certificate">Certificate</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#clikk-cert-self-sign"><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">cert</span> <span class="pre">self-sign</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#clikk-cert-list"><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">cert</span> <span class="pre">list</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#clikk-cert-info"><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">cert</span> <span class="pre">info</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#clikk-cert-renew"><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">cert</span> <span class="pre">renew</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#clikk-cert-export"><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">cert</span> <span class="pre">export</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#clikk-cert-import"><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">cert</span> <span class="pre">import</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#clikk-cert-revoke"><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">cert</span> <span class="pre">revoke</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#clikk-cert-delete"><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">cert</span> <span class="pre">delete</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#secret">Secret</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#clikk-secret-add"><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">secret</span> <span class="pre">add</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#clikk-secret-generate"><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">secret</span> <span class="pre">generate</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#clikk-secret-list"><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">secret</span> <span class="pre">list</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#clikk-secret-info"><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">secret</span> <span class="pre">info</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#clikk-secret-update"><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">secret</span> <span class="pre">update</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#clikk-secret-delete"><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">secret</span> <span class="pre">delete</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#application">Application</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#clikk-app-add"><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">app</span> <span class="pre">add</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#clikk-app-list"><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">app</span> <span class="pre">list</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#clikk-app-info"><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">app</span> <span class="pre">info</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#clikk-app-renew"><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">app</span> <span class="pre">renew</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#clikk-app-delete"><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">app</span> <span class="pre">delete</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#kk-manager">KK-Manager</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#clikk-kk-manager-status"><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">kk-manager</span> <span class="pre">status</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#clikk-kk-manager-acl"><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">kk-manager</span> <span class="pre">acl</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#clikk-kk-manager-request-license"><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">kk-manager</span> <span class="pre">request-license</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#clikk-kk-manager-apply-license"><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">kk-manager</span> <span class="pre">apply-license</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#clikk-kk-manager-add-dr"><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">kk-manager</span> <span class="pre">add-dr</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#clikk-kk-manager-list-dr"><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">kk-manager</span> <span class="pre">list-dr</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#clikk-kk-manager-info-dr"><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">kk-manager</span> <span class="pre">info-dr</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#clikk-kk-manager-promote-dr"><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">kk-manager</span> <span class="pre">promote-dr</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#clikk-kk-manager-request-delete-dr"><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">kk-manager</span> <span class="pre">request-delete-dr</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#clikk-kk-manager-delete-dr"><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">kk-manager</span> <span class="pre">delete-dr</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#clikk-kk-manager-backup"><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">kk-manager</span> <span class="pre">backup</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#clikk-kk-manager-regenerate-backup-key"><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">kk-manager</span> <span class="pre">regenerate-backup-key</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#clikk-kk-manager-verify-recovery-cards"><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">kk-manager</span> <span class="pre">verify-recovery-cards</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#kk-cryptoservice">KK-Cryptoservice</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#clikk-kk-cryptoservice-add"><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">kk-cryptoservice</span> <span class="pre">add</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#clikk-kk-cryptoservice-list"><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">kk-cryptoservice</span> <span class="pre">list</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#clikk-kk-cryptoservice-info"><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">kk-cryptoservice</span> <span class="pre">info</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#clikk-kk-cryptoservice-update"><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">kk-cryptoservice</span> <span class="pre">update</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#clikk-kk-cryptoservice-add-partition"><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">kk-cryptoservice</span> <span class="pre">add-partition</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#clikk-kk-cryptoservice-delete-partition"><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">kk-cryptoservice</span> <span class="pre">delete-partition</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#clikk-kk-cryptoservice-request-delete"><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">kk-cryptoservice</span> <span class="pre">request-delete</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#clikk-kk-cryptoservice-delete"><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">kk-cryptoservice</span> <span class="pre">delete</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#kk-auditor">KK-Auditor</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#clikk-kk-auditor-add"><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">kk-auditor</span> <span class="pre">add</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#clikk-kk-auditor-verify"><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">kk-auditor</span> <span class="pre">verify</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#clikk-kk-auditor-export"><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">kk-auditor</span> <span class="pre">export</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#clikk-kk-auditor-archive"><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">kk-auditor</span> <span class="pre">archive</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="supplementary-clikk-usage.html">Supplementary CLIKK usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="manual-replication.html">Manual replication</a></li>
<li class="toctree-l2"><a class="reference internal" href="transaction-counting.html">Transaction counting</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../dev-guide/index.html">Developer Guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../e2ee-dev-guide/index.html">E2EE Developer Guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../func-module-guide/index.html">Functional Module Guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../app-integration-guide/index.html">App Integration Guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../keycloak-integration-guide/index.html">KeyCloak Integration Guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../sdk-api-docs/index.html">SDK API Documentation</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../rest-api-docs/index.html">REST API Documentation</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../whitepaper/index.html">Whitepaper</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../appendix.html">Appendix</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Kripta Key Documentation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">System Administrator Guide</a></li>
      <li class="breadcrumb-item active">Kripta Key management with CLIKK</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/sys-admin-guide/kripta-key-management.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="kripta-key-management-with-clikk">
<h1>Kripta Key management with CLIKK<a class="headerlink" href="#kripta-key-management-with-clikk" title="Link to this heading"></a></h1>
<p>This section details all available commands in CLIKK.</p>
<section id="configuration">
<h2>Configuration<a class="headerlink" href="#configuration" title="Link to this heading"></a></h2>
<p>The configuration commands are mainly used to configure the KK-Manager host and port for CLIKK to connect to.
Miscellaneous commands are grouped under this category as well. The available commands are:</p>
<section id="clikk-conf-server">
<h3><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">conf</span> <span class="pre">server</span></code><a class="headerlink" href="#clikk-conf-server" title="Link to this heading"></a></h3>
<p>Show the KK-Manager connection’s configuration if it has been set before, otherwise show a help message.</p>
<p><strong>Flags</strong>:</p>
<dl class="option-list">
<dt><kbd><span class="option">--kk-manager-host=<var>&lt;instance host&gt;</var></span></kbd></dt>
<dd><p>The host address of the KK-Manager instance.</p>
</dd>
<dt><kbd><span class="option">--kk-manager-port=<var>&lt;instance post&gt;</var></span></kbd></dt>
<dd><p>The port of the KK-Manager instance port. Must be a number between 1024 and 49 151, inclusive.</p>
</dd>
</dl>
<p><strong>Privilege level</strong>: <strong>LOW</strong></p>
<p><strong>Error messages</strong>: None.</p>
<p><strong>Usage example</strong>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>clikk<span class="w"> </span>conf<span class="w"> </span>server<span class="w"> </span>--kk-manager-host<span class="o">=</span><span class="m">10</span>.30.0.3<span class="w"> </span>--kk-manager-port<span class="o">=</span><span class="m">7002</span>

<span class="go">Configuration has been saved successfully.</span>
<span class="go">CLIKK will connect to the KK-Manager instance at 10.30.0.3:8085.</span>
</pre></div>
</div>
</section>
<section id="clikk-conf-get-collateral">
<h3><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">conf</span> <span class="pre">get-collateral</span></code><a class="headerlink" href="#clikk-conf-get-collateral" title="Link to this heading"></a></h3>
<p>Download the machine’s PCK certificate and collateral information from Intel’s trusted web service.</p>
<p>The collateral is used to register KK-Auditor, KK-Cryptoservice, and KK-Manager-DR instances.</p>
<p>This command requires an API key from Intel. Refer to <a class="reference internal" href="../appendix.html#obtaining-intel-api-key"><span class="std std-ref">Obtaining Intel API key</span></a> for steps on
obtaining the Intel API key.</p>
<p><strong>Flags</strong>:</p>
<dl class="option-list">
<dt><kbd><span class="option">--api-key=<var>&lt;Intel API key&gt;</var></span></kbd></dt>
<dd><p>The API key for Intel trusted web service.</p>
</dd>
<dt><kbd><span class="option">--platform-info=<var>&lt;path to platform info&gt;</var></span></kbd></dt>
<dd><p>The absolute path to a machine’s platform information file.</p>
</dd>
<dt><kbd><span class="option">--machine-fmspc=<var>&lt;machine FMSPC&gt;</var></span></kbd></dt>
<dd><p>The machine’s Family-Model-Stepping-Platform-Custom SKU (FMSPC).</p>
</dd>
<dt><kbd><span class="option">--package-type=<var>&lt;package type&gt;</var></span></kbd></dt>
<dd><p>The machine’s package type. This must be <code class="docutils literal notranslate"><span class="pre">processor</span></code> or <code class="docutils literal notranslate"><span class="pre">platform</span></code>.</p>
</dd>
<dt><kbd><span class="option">--output-dir-path=<var>&lt;output directory path&gt;</var></span></kbd></dt>
<dd><p>The absolute path to the output directory for the downloaded files.</p>
</dd>
</dl>
<p><strong>Privilege level</strong>: <strong>LOW</strong></p>
<p><strong>Error messages</strong>:</p>
<ul>
<li><p><em>Message</em>:</p>
<blockquote>
<div><p>Failed to request collateral from Intel!</p>
<p>Please ensure that all the parameters and platform
information are correct and the machine is connected
to the internet.</p>
</div></blockquote>
<p><em>Likely cause</em>: Wrong Intel API key, or wrong machine FMSPC.</p>
</li>
<li><p><em>Message</em>: Platform info file does not exist!</p>
<p><em>Likely cause</em>: Wrong platform info path.</p>
</li>
<li><p><em>Message</em>: Invalid output directory!</p>
<p><em>Likely cause</em>: Wrong output path.</p>
</li>
</ul>
<p><strong>Usage example</strong>:</p>
<ul>
<li><p>Send a machine’s platform info, and then download the machine’s PCK certificate and collateral information.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>clikk<span class="w"> </span>conf<span class="w"> </span>get-collateral<span class="w"> </span>--intel-api-key<span class="o">=</span>c0ffeea3d5614436ae1611dfXXXXXXXX<span class="w"> </span>--platform-info-path<span class="o">=</span>/home/user/0323BC80XXXXXXXXXXXXXXXXXXXXXXXX.json<span class="w"> </span>--output-dir-path<span class="o">=</span>/home/user/Documents/

<span class="go">This will fetch attestation material from Intel&#39;s trusted web service:</span>
<span class="go">    https://api.trustedservices.intel.com/sgx/certification/v4</span>
<span class="go">Type `:.rzv` to continue, or press Enter to cancel.</span>
<span class="go">&gt; :.rzv</span>

<span class="go">PCK certificate has been saved successfully to /home/user/documents/pck_cert_0323BC80XXXXXXXXXXXXXXXXXXXXXXXX.pem.</span>
<span class="go">Quote collateral has been saved successfully to /home/user/documents/collateral_00906EXXXXXX.json.</span>
</pre></div>
</div>
</li>
<li><p>Send a machine’s FMSPC and package type, and then download the machine’s collateral information.</p>
<p>This command is intended to be used when the machine’s PCK certificate and collateral has been downloaded
before, and the administrator knows the machine FMSPC and package type.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>clikk<span class="w"> </span>conf<span class="w"> </span>get-collateral<span class="w"> </span>--machine-fmspc<span class="o">=</span>00A065310000<span class="w"> </span>--package-type<span class="o">=</span>processor<span class="w"> </span>--output-dir-path<span class="o">=</span>/home/user/Documents/

<span class="go">This will fetch attestation material from Intel&#39;s trusted web service:</span>
<span class="go">    https://api.trustedservices.intel.com/sgx/certification/v4</span>
<span class="go">Type `79Hu/` to continue, or press Enter to cancel.</span>
<span class="go">&gt;</span>

<span class="go">Quote collateral has been saved successfully to /home/user/Documents/collateral_00A065XXXXXX.json.</span>
</pre></div>
</div>
</li>
</ul>
</section>
<section id="clikk-conf-version">
<h3><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">conf</span> <span class="pre">version</span></code><a class="headerlink" href="#clikk-conf-version" title="Link to this heading"></a></h3>
<p>Show CLIKK’s version. CLIKK will refuse to connect if the major and minor version are different from KK-Manager’s version.</p>
<p><strong>Flags</strong>: None.</p>
<p><strong>Privilege level</strong>: <strong>LOW</strong></p>
<p><strong>Error messages</strong>: None.</p>
<p><strong>Usage example</strong>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>clikk<span class="w"> </span>conf<span class="w"> </span>version

<span class="go">CLIKK version 24.1.0007</span>
</pre></div>
</div>
</section>
<section id="clikk-conf-recovery-card-version">
<h3><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">conf</span> <span class="pre">recovery-card-version</span></code><a class="headerlink" href="#clikk-conf-recovery-card-version" title="Link to this heading"></a></h3>
<p>Show recovery card version.</p>
<p><strong>Flags</strong>: None.</p>
<p><strong>Privilege level</strong>: <strong>LOW</strong></p>
<p><strong>Error messages</strong>: None.</p>
<p><strong>Usage example</strong>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>clikk<span class="w"> </span>conf<span class="w"> </span>conf<span class="w"> </span>recovery-card-version
<span class="go">insert a card!</span>

<span class="go">Recovery Card version 24.1.0007</span>
</pre></div>
</div>
</section>
<section id="clikk-conf-administrator-card-version">
<h3><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">conf</span> <span class="pre">administrator-card-version</span></code><a class="headerlink" href="#clikk-conf-administrator-card-version" title="Link to this heading"></a></h3>
<p>Show administrator card version.</p>
<p><strong>Flags</strong>: None.</p>
<p><strong>Privilege level</strong>: <strong>LOW</strong></p>
<p><strong>Error messages</strong>: None.</p>
<p><strong>Usage example</strong>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>clikk<span class="w"> </span>conf<span class="w"> </span>conf<span class="w"> </span>administrator-card-version

<span class="go">Administrator Card version 24.1.0007</span>
</pre></div>
</div>
</section>
</section>
<section id="administrator">
<h2>Administrator<a class="headerlink" href="#administrator" title="Link to this heading"></a></h2>
<p>Kripta Key controlled your accessibility by a privilege level specified for each CLIKK
command. The authentication attributes that are needed to fulfill each privilege are
specified in <a class="reference internal" href="kripta-key-structure.html#authentication-and-privileges"><span class="std std-ref">Authentication and privileges</span></a>.</p>
<p>Kripta Key has login restrictions for the administrator that are not configurable:</p>
<ul class="simple">
<li><p>The maximum number of login failures is 3, after that the account is locked. The locked account will not be able to log in or do any administrative operations.</p></li>
<li><p>The locked account will be automatically unlocked after 30 minutes.</p></li>
<li><p>The locked account could also be unlocked by another administrator using the admin unlock command.</p></li>
</ul>
<p>Three predefined admins and their passwords were introduced during the key
ceremony and stored in the KK-Manager database for authenticating purposes. KK-
Manager uses the password to authenticate you before executing any CLIKK
commands.</p>
<p>The administrator commands are used to manage the administrator accounts that can manage the KK-Manager instance.
The available commands are:</p>
<section id="clikk-admin-add">
<h3><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">admin</span> <span class="pre">add</span></code><a class="headerlink" href="#clikk-admin-add" title="Link to this heading"></a></h3>
<p>Create a new administrator account.</p>
<p>The admin will be prompted to create a password that satisfies the password policy.</p>
<p><strong>Flags</strong>:</p>
<dl class="option-list">
<dt><kbd><span class="option">--admin-id=<var>&lt;admin ID&gt;</var></span></kbd></dt>
<dd><p>The identifier of the administrator. Must be alphanumeric and not more than 20 characters in length.</p>
</dd>
<dt><kbd><span class="option">--admin-name=<var>&lt;admin name&gt;</var></span></kbd></dt>
<dd><p>The descriptive name of the administrator. Must be alphanumeric and not more than 20 characters in length.</p>
</dd>
</dl>
<p><strong>Privilege level</strong>: <strong>CRITICAL</strong></p>
<p><strong>Error messages</strong>:</p>
<ul>
<li><p><em>Message</em>: Authentication failed!</p>
<p><em>Likely cause</em>: Wrong admin ID, wrong password or invalid smartcard.</p>
</li>
<li><p><em>Message</em>: Password does not comply with policy!</p>
<p><em>Likely cause</em>: Password does not satisfy the password policy requirements.</p>
</li>
<li><p><em>Message</em>: New password must be different from current password!</p>
<p><em>Likely cause</em>: New password matches the current password.</p>
</li>
<li><p><em>Message</em>: Password mismatch!</p>
<p><em>Likely cause</em>: Re-entered password does not match.</p>
</li>
</ul>
<p><strong>Usage example</strong>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>clikk<span class="w"> </span>admin<span class="w"> </span>add<span class="w"> </span>--admin-id<span class="o">=</span>Admin4<span class="w"> </span>--admin-name<span class="o">=</span>Administrator

<span class="go">Administrator password MUST follow these requirements:</span>
<span class="go">- Password length must be between 8 and 64 characters, inclusive.</span>
<span class="go">- Password must contain upper case, lower case, numeric, and special characters.</span>
<span class="go">- Password must not have repeated characters (e.g. AA, aa, 11).</span>
<span class="go">- Password must not have more than two consecutive characters (e.g. 123, abc).</span>
<span class="go">- Password must not contain the admin ID.</span>
<span class="go">Enter password:</span>
<span class="go">Re-enter password:</span>

<span class="go">Enter admin ID: Admin1</span>
<span class="go">Enter password:</span>
<span class="go">Insert the administrator card of Admin1 for two-factor authentication.</span>

<span class="go">Dual control authentication -- credential of a second administrator is required.</span>
<span class="go">Admin1 is currently logged in.</span>

<span class="go">Enter admin ID: Admin2</span>
<span class="go">Enter password:</span>
<span class="go">Insert the administrator card of Admin2 for two-factor authentication.</span>

<span class="go">Administrator has been created successfully.</span>
</pre></div>
</div>
</section>
<section id="clikk-admin-change-password">
<h3><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">admin</span> <span class="pre">change-password</span></code><a class="headerlink" href="#clikk-admin-change-password" title="Link to this heading"></a></h3>
<p>Change an administrator’s password.</p>
<p>An administrator may only change their own password. If the administrator has no associated administrator card,
this command will also bind an administrator card to the account. Binding an administrator card requires
a blank administrator card on hand.</p>
<p><strong>Flags</strong>:</p>
<dl class="option-list">
<dt><kbd><span class="option">--admin-id=<var>&lt;admin ID&gt;</var></span></kbd></dt>
<dd><p>The identifier of the administrator.</p>
</dd>
</dl>
<p><strong>Privilege level</strong>: <strong>HIGH</strong></p>
<p><strong>Error messages</strong>:</p>
<ul>
<li><p><em>Message</em>: Authentication failed!</p>
<p><em>Likely cause</em>: Wrong admin ID, wrong password, or invalid administrator card.</p>
</li>
<li><p><em>Message</em>: Admin ID does not exist!</p>
<p><em>Likely cause</em>: Wrong admin ID given to the flag.</p>
</li>
<li><p><em>Message</em>: Changing another admin’s password is not allowed!</p>
<p><em>Likely cause</em>: Admin ID provided for authentication and admin ID given via flag does not match.</p>
</li>
<li><p><em>Message</em>: Password does not comply with policy!</p>
<p><em>Likely cause</em>: Password does not satisfy the password policy requirements.</p>
</li>
<li><p><em>Message</em>: New password must be different from current password!</p>
<p><em>Likely cause</em>: New password matches the current password.</p>
</li>
</ul>
<p><strong>Usage example</strong>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>clikk<span class="w"> </span>admin<span class="w"> </span>change-password<span class="w"> </span>--user-id<span class="o">=</span>Admin1

<span class="go">Enter admin ID: Admin1</span>
<span class="go">Enter password:</span>

<span class="go">User Admin1 does not have an associated administrator card.</span>
<span class="go">This will initialize an administrator card and bind it to Admin1.</span>
<span class="go">Type `e=g` to continue, or press Enter to cancel.</span>
<span class="go">&gt;</span>

<span class="go">Insert a blank card.</span>

<span class="go">Commencing card initialization process...</span>
<span class="go">Resetting the card&#39;s secure channel code...</span>
<span class="go">Storing the user&#39;s public key...</span>
<span class="go">Administrator card for Admin1 has been initialized successfully.</span>

<span class="go">Administrator password MUST follow these requirements:</span>
<span class="go">- Password length must be between 8 and 64 characters, inclusive.</span>
<span class="go">- Password must contain upper case, lower case, numeric, and special characters.</span>
<span class="go">- Password must not have repeated characters (e.g. AA, aa, 11).</span>
<span class="go">- Password must not have more than two consecutive characters (e.g. 123, abc).</span>
<span class="go">- Password must not contain the admin ID.</span>
<span class="go">Enter new password:</span>
<span class="go">Re-enter user password:</span>
<span class="go">Insert the administrator card of Admin1 for two-factor authentication.</span>

<span class="go">Password has been changed successfully.</span>
</pre></div>
</div>
</section>
<section id="clikk-admin-list">
<h3><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">admin</span> <span class="pre">list</span></code><a class="headerlink" href="#clikk-admin-list" title="Link to this heading"></a></h3>
<p>List all available administrators.</p>
<p><strong>Flags</strong>: None.</p>
<p><strong>Privilege level</strong>: <strong>NORMAL</strong></p>
<p><strong>Error messages</strong>:</p>
<ul>
<li><p><em>Message</em>: Authentication failed!</p>
<p><em>Likely cause</em>: Wrong admin ID, or wrong password.</p>
</li>
</ul>
<p><strong>Usage example</strong>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>clikk<span class="w"> </span>admin<span class="w"> </span>list

<span class="go">Enter admin ID: Admin1</span>
<span class="go">Enter password:</span>

<span class="go">Admin ID(s):</span>
<span class="go">Admin1</span>
<span class="go">Admin2</span>
<span class="go">Admin3</span>
</pre></div>
</div>
</section>
<section id="clikk-admin-info">
<h3><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">admin</span> <span class="pre">info</span></code><a class="headerlink" href="#clikk-admin-info" title="Link to this heading"></a></h3>
<p>Retrieve an administrator’s information.</p>
<p><strong>Flags</strong>:</p>
<dl class="option-list">
<dt><kbd><span class="option">--admin-id=<var>&lt;admin ID&gt;</var></span></kbd></dt>
<dd><p>The identifier of the administrator.</p>
</dd>
</dl>
<p><strong>Privilege level</strong>: <strong>NORMAL</strong></p>
<p><strong>Error messages</strong>:</p>
<ul>
<li><p><em>Message</em>: Authentication failed!</p>
<p><em>Likely cause</em>: Wrong admin ID, or wrong password.</p>
</li>
<li><p><em>Message</em>: User ID does not exist!</p>
<p><em>Likely cause</em>: Wrong admin ID given to flag.</p>
</li>
</ul>
<p><strong>Usage example</strong>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>clikk<span class="w"> </span>admin<span class="w"> </span>info<span class="w"> </span>--admin-id<span class="o">=</span>Admin1

<span class="go">Enter admin ID:</span>
<span class="go">Enter password:</span>

<span class="go">Admin ID: Admin1</span>
<span class="go">Admin name: Admin1</span>
</pre></div>
</div>
</section>
<section id="clikk-admin-unlock">
<h3><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">admin</span> <span class="pre">unlock</span></code><a class="headerlink" href="#clikk-admin-unlock" title="Link to this heading"></a></h3>
<p>Unlock a locked administrator account.</p>
<p>An administrator may not unlock their own account.</p>
<p><strong>Flags</strong>:</p>
<dl class="option-list">
<dt><kbd><span class="option">--admin-id=<var>&lt;admin ID&gt;</var></span></kbd></dt>
<dd><p>The identifier of the administrator.</p>
</dd>
</dl>
<p><strong>Privilege level</strong>: <strong>HIGH</strong></p>
<p><strong>Error messages</strong>:</p>
<ul>
<li><p><em>Message</em>: Authentication failed!</p>
<p><em>Likely cause</em>: Wrong admin ID, or wrong password.</p>
</li>
<li><p><em>Message</em>: Admin ID does not exist!</p>
<p><em>Likely cause</em>: Wrong admin ID given to flag.</p>
</li>
<li><p><em>Message</em>: Administrator is not locked!</p>
<p><em>Likely cause</em>: Attempted to unlock an administrator that is not locked.</p>
</li>
</ul>
<p><strong>Usage example</strong>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>clikk<span class="w"> </span>admin<span class="w"> </span>unlock<span class="w"> </span>--admin-id<span class="o">=</span>Admin1

<span class="go">Enter admin ID: Admin2</span>
<span class="go">Enter password:</span>
<span class="go">Insert the administrator card of Admin2 for two-factor authentication.</span>

<span class="go">Administrator has been unlocked successfully.</span>
</pre></div>
</div>
</section>
<section id="clikk-admin-reset-password">
<h3><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">admin</span> <span class="pre">reset-password</span></code><a class="headerlink" href="#clikk-admin-reset-password" title="Link to this heading"></a></h3>
<p>Reset an administrator’s password.</p>
<p>This command will also offer to reset the administrator’s smartcard.
The system provides three options below:</p>
<ol class="arabic simple">
<li><p>Keep the smartcard, so you decide not to reset the smartcard.</p></li>
<li><p>Revoke the smartcard, it will reset the smartcard and the smartcard will not be usable anymore.</p></li>
<li><p>Reset the smartcard to be used by another administrator.</p></li>
</ol>
<p><strong>Flags</strong>:</p>
<dl class="option-list">
<dt><kbd><span class="option">--admin-id=<var>&lt;admin ID&gt;</var></span></kbd></dt>
<dd><p>The identifier of the administrator.</p>
</dd>
<dt><kbd><span class="option">--with-recovery-cards</span></kbd></dt>
<dd><p>In case there are only two administrator accounts remaining, it means that there are not enough admins to perform dual control.
Therefore, resetting the password requires a number of recovery cards to meet the threshold.</p>
</dd>
</dl>
<p><strong>Privilege level</strong>: <strong>CRITICAL</strong>/<strong>EMERGENCY</strong></p>
<p><strong>Error messages</strong>:</p>
<ul>
<li><p><em>Message</em>: Authentication failed!</p>
<p><em>Likely cause</em>: Wrong admin ID, wrong password, or invalid administrator card.</p>
</li>
<li><p><em>Message</em>: Admin ID does not exist!</p>
<p><em>Likely cause</em>: Wrong admin ID given to flag.</p>
</li>
<li><p><em>Message</em>: Password reset can only be done by other admins!</p>
<p><em>Likely cause</em>: Attempted to reset the password of the authenticated administrators.</p>
</li>
<li><p><em>Message</em>: Password does not comply with policy!</p>
<p><em>Likely cause</em>: Password does not satisfy the password policy requirements.</p>
</li>
<li><p><em>Message</em>: New password must be different from current password!</p>
<p><em>Likely cause</em>: New password matches the current password.</p>
</li>
</ul>
<p><strong>Usage example</strong>:</p>
<ul>
<li><p>Reset an administrator’s password using dual control.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>clikk<span class="w"> </span>admin<span class="w"> </span>reset-password<span class="w"> </span>--admin-id<span class="o">=</span>Admin1

<span class="go">Administrator password MUST follow these requirements:</span>
<span class="go">- Password length must be between 8 and 64 characters, inclusive.</span>
<span class="go">- Password must contain upper case, lower case, numeric, and special characters.</span>
<span class="go">- Password must not have repeated characters (e.g. AA, aa, 11).</span>
<span class="go">- Password must not have more than two consecutive characters (e.g. 123, abc).</span>
<span class="go">- Password must not contain the admin ID.</span>
<span class="go">Enter new password:</span>
<span class="go">Re-enter new password:</span>

<span class="go">Enter admin ID: Admin2</span>
<span class="go">Enter password:</span>
<span class="go">Insert Admin2&#39;s administrator card for two-factor authentication and press Enter.</span>

<span class="go">Dual control authentication -- credential of a second administrator is required.</span>
<span class="go">Admin2 is currently logged in.</span>

<span class="go">Enter admin ID: Admin3</span>
<span class="go">Enter password:</span>
<span class="go">Insert Admin3&#39;s administrator card for two-factor authentication and press Enter.</span>

<span class="go">Password has been reset successfully.</span>
<span class="go">Admin1 must change their password on next login.</span>

<span class="go">The following actions are available for Admin1&#39;s administrator card:</span>
<span class="go">- [1] Do nothing. Choose this option if the administrator simply forgot their password.</span>
<span class="go">- [2] Remove the administrator card data from the server. Choose this option if the administrator card is lost or damaged.</span>
<span class="go">- [3] Reset the administrator card. Choose this option if the administrator card is to be reused for another administrator.</span>
<span class="go">&gt; 3</span>
<span class="go">This will reset the administrator card to a blank state. It may be re-initialized and bound to another administrator.</span>
<span class="go">Type `4^D` to continue, or press Enter to cancel.</span>
<span class="go">&gt; 4^D</span>

<span class="go">Insert Admin1&#39;s administrator card and press Enter.</span>

<span class="go">Commencing card reset process...</span>
<span class="go">Resetting the card&#39;s secure channel code...</span>
<span class="go">Administrator card has been reset successfully.</span>
<span class="go">Run `clikk admin change-password` to initialize and bind the administrator card.</span>
</pre></div>
</div>
</li>
<li><p>Reset an administrator’s password using recovery cards.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>clikk<span class="w"> </span>user<span class="w"> </span>reset-password<span class="w"> </span>--user-id<span class="o">=</span>Admin1<span class="w"> </span>--with-recovery-cards

<span class="go">Please prepare a sufficient number of healthy recovery cards.</span>
<span class="go">Administrator password MUST follow these requirements:</span>
<span class="go">- Password length must be between 8 and 64 characters, inclusive.</span>
<span class="go">- Password must contain upper case, lower case, numeric, and special characters.</span>
<span class="go">- Password must not have repeated characters (e.g. AA, aa, 11).</span>
<span class="go">- Password must not have more than two consecutive characters (e.g. 123, abc).</span>
<span class="go">- Password must not contain the admin ID.</span>

<span class="go">Enter new password:</span>
<span class="go">Re-enter password:</span>

<span class="go">Insert a recovery card from the set of cards.</span>

<span class="go">Key in the PIN and press Enter on the PIN pad to read the secure channel key encryption keys (SCKEKs).</span>
<span class="go">Total of 1 secret(s) recovered.</span>
<span class="go">Please insert the next recovery card</span>

<span class="go">Key in the PIN and press Enter on the PIN pad to read the secure channel key encryption keys (SCKEKs).</span>
<span class="go">Total of 2 secret(s) recovered.</span>
<span class="go">Please insert the next recovery card</span>

<span class="go">Key in the PIN and press Enter on the PIN pad to read the secure channel key encryption keys (SCKEKs).</span>
<span class="go">Total of 3 secret(s) recovered.</span>

<span class="go">A sufficient number of secrets have been recovered.</span>
<span class="go">Remove the card!</span>
<span class="go">Password has been reset successfully.</span>
<span class="go">Admin admin3 must change their password on the next login.</span>

<span class="go">The following actions are available for admin3&#39;s administrator card:</span>
<span class="go">- [1] Do nothing. Choose this option if the administator simply forgot their password.</span>
<span class="go">- [2] Remove the administrator card data from the server. Choose this option if the administrator card is lost or damaged.</span>
<span class="go">- [3] Reset the administrator card. Choose this option if the administrator card is to be reused for another administrator.</span>
<span class="go">&gt; 3</span>

<span class="go">This will reset the administrator card to a blank state. It may be re-initialized and bound to another administrator.</span>
<span class="go">Type IRS to continue, or press Enter to cancel.</span>
<span class="go">&gt; IRS</span>

<span class="go">Insert admin3&#39;s administrator card and press Enter.</span>


<span class="go">Commencing card reset process...</span>
<span class="go">Resetting the card&#39;s secure channel code...</span>

<span class="go">Administrator card has been reset successfully.</span>
</pre></div>
</div>
</li>
</ul>
</section>
<section id="clikk-admin-delete">
<h3><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">admin</span> <span class="pre">delete</span></code><a class="headerlink" href="#clikk-admin-delete" title="Link to this heading"></a></h3>
<p>Delete an administrator.</p>
<p>Administrator deletion is <strong>irreversible</strong>.</p>
<p>If the account still has an administrator card bound to it, unbind it first using the <code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">admin</span> <span class="pre">reset-password</span></code>
command. Deleting an administrator without unbinding the administrator card first is not permitted.</p>
<p>This command cannot delete any of the administrators authorizing the command. Note that this effectively requires
two administrators registered at all times.</p>
<p><strong>Flags</strong>:</p>
<dl class="option-list">
<dt><kbd><span class="option">--admin-id=<var>&lt;admin ID&gt;</var></span></kbd></dt>
<dd><p>The identifier of the administrator.</p>
</dd>
</dl>
<p><strong>Privilege level</strong>: <strong>CRITICAL</strong></p>
<p><strong>Error messages</strong>:</p>
<ul>
<li><p><em>Message</em>: Authentication failed!</p>
<p><em>Likely cause</em>: Wrong admin ID, wrong password, or invalid administrator card.</p>
</li>
<li><p><em>Message</em>: User ID does not exist!</p>
<p><em>Likely cause</em>: Wrong admin ID given to flag.</p>
</li>
<li><p><em>Message</em>: Deleting your own user account is not allowed!</p>
<p><em>Likely cause</em>: Attempted to delete an administrator participating in authorizing the command.</p>
</li>
<li><p><em>Message</em>: An administrator card is still bound to the account!</p>
<p><em>Likely cause</em>: Attempted to delete an administrator without unbinding the administrator card.</p>
</li>
</ul>
<p><strong>Usage example</strong>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>clikk<span class="w"> </span>admin<span class="w"> </span>delete<span class="w"> </span>--admin-id<span class="o">=</span>Admin1

<span class="go">WARNING: Administrator deletion is IRREVERSIBLE.</span>
<span class="go">The corresponding administrator card data will be deleted as well.</span>
<span class="go">Ensure that the card has been reset before proceeding with deletion.</span>
<span class="go">Are you sure you want to continue? Type `bR&quot;X2` to continue, or press Enter to cancel.</span>
<span class="go">&gt; bR&quot;X2</span>

<span class="go">Enter admin ID: Admin2</span>
<span class="go">Enter password:</span>
<span class="go">Insert the administrator card of Admin2 for two-factor authentication.</span>

<span class="go">Dual control authentication -- credential of a second user is required.</span>
<span class="go">Admin2 is currently logged in.</span>

<span class="go">Enter admin ID: Admin3</span>
<span class="go">Enter password:</span>
<span class="go">Insert the administrator card of Admin3 for two-factor authentication.</span>

<span class="go">Administrator has been deleted successfully.</span>
</pre></div>
</div>
</section>
</section>
<section id="partition">
<h2>Partition<a class="headerlink" href="#partition" title="Link to this heading"></a></h2>
<p>Kripta Key partitions are adapted from the concept of slots in the PKCS#11 standard. Each cryptographic object stored
in the KK-Manager’s database are organized into partitions. Each partition is access-protected with a password,
and the contents of each partition is protected with a key associated with the partition.</p>
<section id="clikk-partition-add">
<h3><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">partition</span> <span class="pre">add</span></code><a class="headerlink" href="#clikk-partition-add" title="Link to this heading"></a></h3>
<p>Create a new partition.</p>
<p>This will prompt for a partition password. The password must satisfy the password policy requirements.</p>
<p><strong>Flags</strong>:</p>
<dl class="option-list">
<dt><kbd><span class="option">--partition-id=<var>&lt;partition ID&gt;</var></span></kbd></dt>
<dd><p>The identifier of the partition. Must be a number between 1 and 10 000, inclusive.</p>
</dd>
<dt><kbd><span class="option">--partition-label=<var>&lt;partition label&gt;</var></span></kbd></dt>
<dd><p>The descriptive label of the partition. Must be alphanumeric and not more than 20 characters in length.</p>
</dd>
</dl>
<p><strong>Privilege level</strong>: <strong>CRITICAL</strong></p>
<p><strong>Error messages</strong>:</p>
<ul>
<li><p><em>Message</em>: Authentication failed!</p>
<p><em>Likely cause</em>: Wrong admin ID, wrong password, or invalid administrator card.</p>
</li>
<li><p><em>Message</em>: Partition with the given ID has been registered!</p>
<p><em>Likely cause</em>: Partition ID is already occupied by an existing partition.</p>
</li>
<li><p><em>Message</em>: Partition ID must be between 1 and 10000, inclusive!</p>
<p><em>Likely cause</em>: Partition ID is out of range.</p>
</li>
<li><p><em>Message</em>: Password mismatch!</p>
<p><em>Likely cause</em>: Re-entered password does not match.</p>
</li>
</ul>
<p><strong>Usage example</strong>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>clikk<span class="w"> </span>partition<span class="w"> </span>add<span class="w"> </span>--partition-id<span class="o">=</span><span class="m">1</span><span class="w"> </span>--partition-label<span class="o">=</span>Finance

<span class="go">Enter partition password:</span>
<span class="go">Re-enter partition password:</span>

<span class="go">Enter admin ID: Admin1</span>
<span class="go">Enter password:</span>
<span class="go">Insert the administrator card of Admin1 for two-factor authentication.</span>

<span class="go">Dual control authentication -- credential of a second user is required.</span>
<span class="go">Admin1 is currently logged in.</span>

<span class="go">Enter admin ID: Admin2</span>
<span class="go">Enter password:</span>
<span class="go">Insert the administrator card of Admin2 for two-factor authentication.</span>

<span class="go">Partition has been created successfully.</span>
</pre></div>
</div>
</section>
<section id="clikk-partition-list">
<h3><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">partition</span> <span class="pre">list</span></code><a class="headerlink" href="#clikk-partition-list" title="Link to this heading"></a></h3>
<p>List all available partitions.</p>
<p><strong>Flags</strong>: None.</p>
<p><strong>Privilege level</strong>: <strong>NORMAL</strong></p>
<p><strong>Error messages</strong>:</p>
<ul>
<li><p><em>Message</em>: Authentication failed!</p>
<p><em>Likely cause</em>: Wrong admin ID, or wrong password.</p>
</li>
</ul>
<p><strong>Usage example</strong>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>clikk<span class="w"> </span>partition<span class="w"> </span>list

<span class="go">Enter admin ID: Admin1</span>
<span class="go">Enter password:</span>

<span class="go">Partition ID(s):</span>
<span class="go">1</span>
</pre></div>
</div>
</section>
<section id="clikk-partition-info">
<h3><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">partition</span> <span class="pre">info</span></code><a class="headerlink" href="#clikk-partition-info" title="Link to this heading"></a></h3>
<p>Retrieve information about a partition.</p>
<p>The information includes the partition label, creation date, list of application IDs that have access
to the partition, and the list of KK-Cryptoservice instances that the partition is registered to.</p>
<p><strong>Flags</strong>:</p>
<dl class="option-list">
<dt><kbd><span class="option">--partition-id=<var>&lt;partition ID&gt;</var></span></kbd></dt>
<dd><p>The identifier of the partition.</p>
</dd>
</dl>
<p><strong>Privilege level</strong>: <strong>NORMAL</strong></p>
<p><strong>Error messages</strong>:</p>
<ul>
<li><p><em>Message</em>: Authentication failed!</p>
<p><em>Likely cause</em>: Wrong admin ID, or wrong password.</p>
</li>
<li><p><em>Message</em>: Partition ID must be between 1 and 10000, inclusive!</p>
<p><em>Likely cause</em>: Partition ID is out of range.</p>
</li>
<li><p><em>Message</em>: Partition ID does not exist!</p>
<p><em>Likely cause</em>: Partition with the given ID does not exist.</p>
</li>
</ul>
<p><strong>Usage example</strong>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>clikk<span class="w"> </span>partition<span class="w"> </span>info<span class="w"> </span>--partition-id<span class="o">=</span><span class="m">1</span>

<span class="go">Enter admin ID:</span>
<span class="go">Enter password:</span>

<span class="go">Partition ID: 1</span>
<span class="go">Partition label: partition1</span>
<span class="go">Creation date: 2023-03-17 16:52:27 WIB</span>
<span class="go">App ID(s): Postman</span>
<span class="go">No KK-Cryptoservice instances have been registered to this partition.</span>
</pre></div>
</div>
</section>
<section id="clikk-partition-change-password">
<h3><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">partition</span> <span class="pre">change-password</span></code><a class="headerlink" href="#clikk-partition-change-password" title="Link to this heading"></a></h3>
<p>Change a partition’s password.</p>
<p>The new password must satisfy the password policy requirements.</p>
<p><strong>Flags</strong>:</p>
<dl class="option-list">
<dt><kbd><span class="option">--partition-id=<var>&lt;partition ID&gt;</var></span></kbd></dt>
<dd><p>The identifier of the partition.</p>
</dd>
</dl>
<p><strong>Privilege level</strong>: <strong>HIGH</strong></p>
<p><strong>Error messages</strong>:</p>
<ul>
<li><p><em>Message</em>: Authentication failed!</p>
<p><em>Likely cause</em>: Wrong admin ID, or wrong password.</p>
</li>
<li><p><em>Message</em>: Partition ID must be between 1 and 10000, inclusive!</p>
<p><em>Likely cause</em>: Partition ID is out of range.</p>
</li>
<li><p><em>Message</em>: Partition ID does not exist!</p>
<p><em>Likely cause</em>: Partition with the given ID does not exist.</p>
</li>
<li><p><em>Message</em>: Password does not comply with policy!</p>
<p><em>Likely cause</em>: Password does not satisfy the password policy requirements.</p>
</li>
<li><p><em>Message</em>: New password must be different from current password!</p>
<p><em>Likely cause</em>: New password matches the current password.</p>
</li>
</ul>
<p><strong>Usage example</strong>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>clikk<span class="w"> </span>partition<span class="w"> </span>change-password<span class="w"> </span>--partition-id<span class="o">=</span><span class="m">1</span>

<span class="go">Enter partition password:</span>
<span class="go">Enter new partition password:</span>
<span class="go">Re-enter new partition password:</span>

<span class="go">Enter admin ID: Admin1</span>
<span class="go">Enter password:</span>

<span class="go">Partition password has been changed successfully.</span>
</pre></div>
</div>
</section>
<section id="clikk-partition-reset-password">
<h3><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">partition</span> <span class="pre">reset-password</span></code><a class="headerlink" href="#clikk-partition-reset-password" title="Link to this heading"></a></h3>
<p>Reset a partition’s password.</p>
<p>This is done to restore access to the partition in case the partition’s password is lost. The new password
must satisfy the password policy requirements.</p>
<p><strong>Flags</strong>:</p>
<dl class="option-list">
<dt><kbd><span class="option">--partition-id=<var>&lt;partition ID&gt;</var></span></kbd></dt>
<dd><p>The identifier of the partition.</p>
</dd>
</dl>
<p><strong>Privilege level</strong>: <strong>CRITICAL</strong></p>
<p><strong>Error messages</strong>:</p>
<ul>
<li><p><em>Message</em>: Authentication failed!</p>
<p><em>Likely cause</em>: Wrong admin ID, wrong password, or invalid administrator card.</p>
</li>
<li><p><em>Message</em>: Partition ID must be between 1 and 10000, inclusive!</p>
<p><em>Likely cause</em>: Partition ID is out of range.</p>
</li>
<li><p><em>Message</em>: Partition ID does not exist!</p>
<p><em>Likely cause</em>: Partition with the given ID does not exist.</p>
</li>
<li><p><em>Message</em>: Password does not comply with policy!</p>
<p><em>Likely cause</em>: Password does not satisfy the password policy requirements.</p>
</li>
</ul>
<p><strong>Usage example</strong>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>clikk<span class="w"> </span>partition<span class="w"> </span>reset-password<span class="w"> </span>--partition-id<span class="o">=</span><span class="m">1</span>

<span class="go">Enter new partition password:</span>
<span class="go">Re-enter new partition password:</span>

<span class="go">Enter admin ID: Admin1</span>
<span class="go">Enter password:</span>
<span class="go">Insert the administrator card of Admin1 for two-factor authentication.</span>

<span class="go">Dual control authentication -- credential of a second user is required.</span>
<span class="go">Admin1 is currently logged in.</span>

<span class="go">Enter admin ID: Admin2</span>
<span class="go">Enter password:</span>
<span class="go">Insert the administrator card of Admin2 for two-factor authentication.</span>

<span class="go">Partition password has been reset successfully.</span>
</pre></div>
</div>
</section>
<section id="clikk-partition-add-app">
<h3><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">partition</span> <span class="pre">add-app</span></code><a class="headerlink" href="#clikk-partition-add-app" title="Link to this heading"></a></h3>
<p>Allow an application access to a given partition.</p>
<p>An application must be added to a partition, which must also be added to the KK-Cryptoservice instance
the application connects to, before the application can use cryptographic services offered by Kripta Key.
See <code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">kk-cryptoservice</span> <span class="pre">add-partition</span></code>.</p>
<p><strong>Flags</strong>:</p>
<dl class="option-list">
<dt><kbd><span class="option">--partition-id=<var>&lt;partition ID&gt;</var></span></kbd></dt>
<dd><p>The identifier of the partition.</p>
</dd>
<dt><kbd><span class="option">--app-id=<var>&lt;application ID&gt;</var></span></kbd></dt>
<dd><p>The identifier of the application.</p>
</dd>
</dl>
<p><strong>Privilege level</strong>: <strong>HIGH</strong></p>
<p><strong>Error messages</strong>:</p>
<ul>
<li><p><em>Message</em>: Authentication failed!</p>
<p><em>Likely cause</em>: Wrong admin ID, wrong password, or invalid administrator card.</p>
</li>
<li><p><em>Message</em>: Partition ID must be between 1 and 10000, inclusive!</p>
<p><em>Likely cause</em>: Partition ID is out of range.</p>
</li>
<li><p><em>Message</em>: Partition ID does not exist!</p>
<p><em>Likely cause</em>: Partition with the given ID does not exist.</p>
</li>
<li><p><em>Message</em>: Application with the given ID has not been registered yet!</p>
<p><em>Likely cause</em>: Application with the given ID does not exist.</p>
</li>
<li><p><em>Message</em>: Application with the given ID is already registered to the partition!</p>
<p><em>Likely cause</em>: Application with the given ID is already registered to the partition.</p>
</li>
</ul>
<p><strong>Usage example</strong>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>clikk<span class="w"> </span>partition<span class="w"> </span>add-app<span class="w"> </span>--partition-id<span class="o">=</span><span class="m">1</span><span class="w"> </span>--app-id<span class="o">=</span>Finance

<span class="go">Enter admin ID: Admin1</span>
<span class="go">Enter password:</span>
<span class="go">Insert the administrator card of Admin1 for two-factor authentication.</span>

<span class="go">Application has been added to partition successfully.</span>
</pre></div>
</div>
</section>
<section id="clikk-partition-unlock-app">
<h3><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">partition</span> <span class="pre">unlock-app</span></code><a class="headerlink" href="#clikk-partition-unlock-app" title="Link to this heading"></a></h3>
<p>Unlock a locked application on a given partition.</p>
<p>An application gets locked on a partition after three consecutive failed login attempts to the partition.
While an application is unlocked automatically after 30 minutes, this command may be executed
to unlock it earlier. Propagation of this command relies on replication. Therefore, manual replication
must be done for KK-Cryptoservice instances that are not actively connected to the main KK-Manager instance.</p>
<p><strong>Flags</strong>:</p>
<dl class="option-list">
<dt><kbd><span class="option">--partition-id=<var>&lt;partition ID&gt;</var></span></kbd></dt>
<dd><p>The identifier of the partition.</p>
</dd>
<dt><kbd><span class="option">--app-id=<var>&lt;application ID&gt;</var></span></kbd></dt>
<dd><p>The identifier of the application.</p>
</dd>
</dl>
<p><strong>Privilege level</strong>: <strong>HIGH</strong></p>
<p><strong>Error messages</strong>:</p>
<ul>
<li><p><em>Message</em>: Authentication failed!</p>
<p><em>Likely cause</em>: Wrong admin ID, wrong password, or invalid administrator card.</p>
</li>
<li><p><em>Message</em>: Partition ID must be between 1 and 10000, inclusive!</p>
<p><em>Likely cause</em>: Partition ID is out of range.</p>
</li>
<li><p><em>Message</em>: Partition ID does not exist!</p>
<p><em>Likely cause</em>: Partition with the given ID does not exist.</p>
</li>
<li><p><em>Message</em>: Application ID does not exist!</p>
<p><em>Likely cause</em>: Application with the given ID does not exist.</p>
</li>
<li><p><em>Message</em>: Application is not linked to the partition!</p>
<p><em>Likely cause</em>: Application with the given ID exists, but is not registered to the partition.</p>
</li>
<li><p><em>Message</em>: Application ID is not locked!</p>
<p><em>Likely cause</em>: Application with the given ID is not locked, or already unlocked.</p>
</li>
</ul>
<p><strong>Usage example</strong>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>clikk<span class="w"> </span>partition<span class="w"> </span>unlock-app<span class="w"> </span>--partition-id<span class="o">=</span><span class="m">1</span><span class="w"> </span>--app-id<span class="o">=</span>postman

<span class="go">Enter admin ID: Admin1</span>
<span class="go">Enter password:</span>
<span class="go">Insert the administrator card of Admin1 for two-factor authentication.</span>

<span class="go">Application has been unlocked successfully.</span>
<span class="go">It may take up to a minute for the application status to update on the KK-Cryptoservice instances.</span>
<span class="go">However, manual replication must be done for KK-Cryptoservice instances that are not connected to the KK-Manager instance.</span>
</pre></div>
</div>
</section>
<section id="clikk-partition-delete-app">
<h3><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">partition</span> <span class="pre">delete-app</span></code><a class="headerlink" href="#clikk-partition-delete-app" title="Link to this heading"></a></h3>
<p>Remove an application’s access to a given partition.</p>
<p><strong>Flags</strong>:</p>
<dl class="option-list">
<dt><kbd><span class="option">--partition-id=<var>&lt;partition ID&gt;</var></span></kbd></dt>
<dd><p>The identifier of the partition.</p>
</dd>
<dt><kbd><span class="option">--app-id=<var>&lt;application ID&gt;</var></span></kbd></dt>
<dd><p>The identifier of the application.</p>
</dd>
</dl>
<p><strong>Privilege level</strong>: <strong>HIGH</strong></p>
<p><strong>Error messages</strong>:</p>
<ul>
<li><p><em>Message</em>: Authentication failed!</p>
<p><em>Likely cause</em>: Wrong admin ID, wrong password, or invalid administrator card.</p>
</li>
<li><p><em>Message</em>: Partition ID must be between 1 and 10000, inclusive!</p>
<p><em>Likely cause</em>: Partition ID is out of range.</p>
</li>
<li><p><em>Message</em>: Partition ID does not exist!</p>
<p><em>Likely cause</em>: Partition with the given ID does not exist.</p>
</li>
<li><p><em>Message</em>: Application ID does not exist on the specified partition!</p>
<p><em>Likely cause</em>: Application with the given ID does not exist, or is not registered to the partition.</p>
</li>
</ul>
<p><strong>Usage example</strong>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>clikk<span class="w"> </span>partition<span class="w"> </span>delete-app<span class="w"> </span>--partition-id<span class="o">=</span><span class="m">1</span><span class="w"> </span>--app-id<span class="o">=</span>Finance

<span class="go">This will revoke an application&#39;s access from the specified partition.</span>
<span class="go">Are you sure you want to continue? Type `1@w` to continue, or press Enter to cancel.</span>
<span class="go">&gt; 1@w</span>

<span class="go">Enter admin ID: Admin1</span>
<span class="go">Enter password:</span>
<span class="go">Insert the administrator card of Admin1 for two-factor authentication.</span>

<span class="go">Application has been successfully deleted from the partition.</span>
</pre></div>
</div>
</section>
<section id="clikk-partition-delete">
<h3><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">partition</span> <span class="pre">delete</span></code><a class="headerlink" href="#clikk-partition-delete" title="Link to this heading"></a></h3>
<p>Delete a partition.</p>
<p>Partition deletion is <strong>irreversible</strong>.</p>
<p>Partition deletion is not permitted if a partition is referenced to by any other object. Ensure that no objects
are stored in the partition, and no applications or KK-Cryptoservice instances are associated with the partition,
before proceeding with deletion.</p>
<p><strong>Flags</strong>:</p>
<dl class="option-list">
<dt><kbd><span class="option">--partition-id=<var>&lt;partition ID&gt;</var></span></kbd></dt>
<dd><p>The identifier of the partition.</p>
</dd>
</dl>
<p><strong>Privilege level</strong>: <strong>CRITICAL</strong></p>
<p><strong>Error messages</strong>:</p>
<ul>
<li><p><em>Message</em>: Authentication failed!</p>
<p><em>Likely cause</em>: Wrong admin ID, or wrong password.</p>
</li>
<li><p><em>Message</em>: Partition ID must be between 1 and 10000, inclusive!</p>
<p><em>Likely cause</em>: Partition ID is out of range.</p>
</li>
<li><p><em>Message</em>: Partition ID does not exist!</p>
<p><em>Likely cause</em>: Partition with the given ID does not exist.</p>
</li>
<li><p><em>Message</em>: Deleting partition that is still being referenced by some objects is not allowed.
Remove the reference(s) first!</p>
<p><em>Likely cause</em>: There are objects that refer to the given partition.</p>
</li>
</ul>
<p><strong>Usage example</strong>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>clikk<span class="w"> </span>partition<span class="w"> </span>delete<span class="w"> </span>--partition-id<span class="o">=</span><span class="m">1</span>

<span class="go">WARNING: Deleting a partition is IRREVERSIBLE.</span>
<span class="go">Ensure that no other objects are associated with this partition before proceeding.</span>
<span class="go">The following commands may be used to check for association:</span>
<span class="go">- `clikk kk-cryptoservice info`</span>
<span class="go">- `clikk kk-manager acl`</span>
<span class="go">- `clikk key list`</span>
<span class="go">- `clikk cert list`</span>
<span class="go">- `clikk secret list`</span>
<span class="go">- `clikk partition info`</span>
<span class="go">Manual replication must be done after this command has been executed.</span>
<span class="go">Are you sure you want to continue? Type `X&gt;VxU` to continue, or press Enter to cancel.</span>
<span class="go">&gt; X&gt;VxU</span>

<span class="go">Enter admin ID: Admin1</span>
<span class="go">Enter password:</span>
<span class="go">Insert the administrator card of Admin1 for two-factor authentication.</span>

<span class="go">Dual control authentication -- credential of a second user is required.</span>
<span class="go">Admin1 is currently logged in.</span>

<span class="go">Enter admin ID: Admin2</span>
<span class="go">Enter password:</span>
<span class="go">Insert the administrator card of Admin2 for two-factor authentication.</span>

<span class="go">Partition has been deleted successfully.</span>
</pre></div>
</div>
</section>
</section>
<section id="key">
<h2>Key<a class="headerlink" href="#key" title="Link to this heading"></a></h2>
<p>Kripta Key also adapts the PKCS#11 standard’s concept of keys. Keys are organized under partitions,
which protects the keys in it by wrapping it with its key encryption key. All of the attributes that keys possess
in the PKCS#11 standard are also present in Kripta Key. However, Kripta Key extends the standard by adding
the key version attribute.</p>
<p>The key version attribute is used with key rotation. Currently, only AES keys whose key purpose is encryption
may be rotated. Rotating a key generates a new key material under the same key ID, incrementing the key version.
The key version starts at zero (0), and increments by one with each key rotation.</p>
<p>Keys may be rotated manually or automatically. This attribute may be set using <code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">key</span> <span class="pre">update</span></code>, which can also
set the time period for automatic key rotation.</p>
<section id="clikk-key-add">
<h3><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">key</span> <span class="pre">add</span></code><a class="headerlink" href="#clikk-key-add" title="Link to this heading"></a></h3>
<p>Generates a new key.</p>
<p>The key material is securely and randomly generated by the system.</p>
<p><strong>Flags</strong>:</p>
<dl class="option-list">
<dt><kbd><span class="option">--partition-id=<var>&lt;partition ID&gt;</var></span></kbd></dt>
<dd><p>The identifier of the partition.</p>
</dd>
<dt><kbd><span class="option">--key-id=<var>&lt;key ID&gt;</var></span></kbd></dt>
<dd><p>The identifier of the key. Must be alphanumeric and not more than 20 characters in length.</p>
</dd>
<dt><kbd><span class="option">--key-label=<var>&lt;key label&gt;</var></span></kbd></dt>
<dd><p>The descriptive label of the key. Must be alphanumeric and not more than 20 characters in length.</p>
</dd>
<dt><kbd><span class="option">--key-algo=<var>&lt;key algorithm index&gt;</var></span></kbd></dt>
<dd><p>The algorithm index of the key. Refer to <a class="reference internal" href="kripta-key-structure.html#key-algorithms"><span class="std std-ref">Key algorithms</span></a>
for the algorithm index.</p>
</dd>
<dt><kbd><span class="option">--key-length=<var>&lt;key length&gt;</var></span></kbd></dt>
<dd><p>The length of the key. Not applicable for some key algorithms — refer to <a class="reference internal" href="kripta-key-structure.html#key-algorithms"><span class="std std-ref">Key algorithms</span></a>
for the possible key lengths for each key algorithm.</p>
</dd>
<dt><kbd><span class="option">--key-purpose=<var>&lt;key purpose index&gt;</var></span></kbd></dt>
<dd><p>The purpose index of the key. Refer to <a class="reference internal" href="kripta-key-structure.html#key-purposes"><span class="std std-ref">Key purposes</span></a>
for the key purpose index.</p>
</dd>
<dt><kbd><span class="option">--key-lifetime=<var>&lt;key lifetime&gt;</var></span></kbd></dt>
<dd><p>The lifetime of the key, in days. After this duration elapses, the key will expire and cannot be used
for cryptographic operations that generate new data. Refer to <a class="reference internal" href="kripta-key-structure.html#key"><span class="std std-ref">Key</span></a>
for the operations allowed with expired keys.</p>
</dd>
</dl>
<p><strong>Privilege level</strong>: <strong>HIGH</strong></p>
<p><strong>Error messages</strong>:</p>
<ul>
<li><p><em>Message</em>: Authentication failed!</p>
<p><em>Likely cause</em>: Wrong admin ID, wrong password, or invalid administrator card.</p>
</li>
<li><p><em>Message</em>: Partition ID must be between 1 and 10000, inclusive!</p>
<p><em>Likely cause</em>: Partition ID is out of range.</p>
</li>
<li><p><em>Message</em>: Partition ID does not exist!</p>
<p><em>Likely cause</em>: Partition with the given ID does not exist.</p>
</li>
<li><p><em>Message</em>: Invalid key lifetime duration!</p>
<p><em>Likely cause</em>: Key lifetime duration is too long.</p>
</li>
<li><p><em>Message</em>: Invalid key length for specified key algorithm!</p>
<p><em>Likely cause</em>: Key length is not supported for the given algorithm.</p>
</li>
<li><p><em>Message</em>: Invalid combination of key algorithm and purpose!</p>
<p><em>Likely cause</em>: Key purpose is not applicable for the given algorithm, or key purpose index is out of bounds.</p>
</li>
<li><p><em>Message</em>: Key length is not applicable for EC keys!</p>
<p><em>Likely cause</em>: Used <code class="docutils literal notranslate"><span class="pre">--key-length</span></code> flag with ECDSA and EdDSA keys.</p>
</li>
<li><p><em>Message</em>: Invalid key algorithm!</p>
<p><em>Likely cause</em>: Key algorithm index is out of bounds.</p>
</li>
</ul>
<p><strong>Usage example</strong>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>clikk<span class="w"> </span>key<span class="w"> </span>add<span class="w"> </span>--partition-id<span class="o">=</span><span class="m">1</span><span class="w"> </span>--key-id<span class="o">=</span>aesKey<span class="w"> </span>--key-label<span class="o">=</span>Finance<span class="w"> </span>--key-algo<span class="o">=</span><span class="m">1</span><span class="w"> </span>--key-length<span class="o">=</span><span class="m">256</span><span class="w"> </span>--key-purpose<span class="o">=</span><span class="m">1</span><span class="w"> </span>--key-lifetime<span class="o">=</span><span class="m">30</span>

<span class="go">Enter admin ID: Admin1</span>
<span class="go">Enter password:</span>
<span class="go">Insert the administrator card of Admin1 for two-factor authentication.</span>

<span class="go">Partition ID: 1</span>
<span class="go">Key ID: aesKey</span>
<span class="go">Algorithm: AESKey</span>
<span class="go">Key purpose: Encryption</span>
</pre></div>
</div>
</section>
<section id="clikk-key-list">
<h3><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">key</span> <span class="pre">list</span></code><a class="headerlink" href="#clikk-key-list" title="Link to this heading"></a></h3>
<p>List all available keys in a given partition.</p>
<p><strong>Flags</strong>:</p>
<dl class="option-list">
<dt><kbd><span class="option">--partition-id=<var>&lt;partition ID&gt;</var></span></kbd></dt>
<dd><p>The identifier of the partition.</p>
</dd>
</dl>
<p><strong>Privilege level</strong>: <strong>NORMAL</strong></p>
<p><strong>Error messages</strong>:</p>
<ul>
<li><p><em>Message</em>: Authentication failed!</p>
<p><em>Likely cause</em>: Wrong admin ID, or wrong password.</p>
</li>
<li><p><em>Message</em>: Partition ID must be between 1 and 10000, inclusive!</p>
<p><em>Likely cause</em>: Partition ID is out of range.</p>
</li>
<li><p><em>Message</em>: Partition ID does not exist!</p>
<p><em>Likely cause</em>: Partition with the given ID does not exist.</p>
</li>
</ul>
<p><strong>Usage example</strong>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>clikk<span class="w"> </span>key<span class="w"> </span>list<span class="w"> </span>--partition-id<span class="o">=</span><span class="m">1</span>

<span class="go">Enter admin ID: Admin1</span>
<span class="go">Enter password:</span>

<span class="go">Key ID(s):</span>
<span class="go">01AESKey</span>
<span class="go">01RSAKey</span>
<span class="go">01ECDSAKey</span>

<span class="go">No keys have been revoked.</span>
</pre></div>
</div>
</section>
<section id="clikk-key-info">
<h3><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">key</span> <span class="pre">info</span></code><a class="headerlink" href="#clikk-key-info" title="Link to this heading"></a></h3>
<p>Retrieve information about a key.</p>
<p>The information includes the key label, key algorithm, key version (if applicable), key length, creation date,
expiry date, key purpose, extractable state, rotatable state, revocation state, and the key check value.
If the key is set to automatically rotate, the automatic rotation duration is listed as well.</p>
<p><strong>Flags</strong>:</p>
<dl class="option-list">
<dt><kbd><span class="option">--partition-id=<var>&lt;partition ID&gt;</var></span></kbd></dt>
<dd><p>The identifier of the partition.</p>
</dd>
<dt><kbd><span class="option">--key-id=<var>&lt;key ID&gt;</var></span></kbd></dt>
<dd><p>The identifier of the key.</p>
</dd>
<dt><kbd><span class="option">--key-version=<var>&lt;key version&gt;</var></span></kbd></dt>
<dd><p>The version of the key, if applicable.</p>
</dd>
</dl>
<p><strong>Privilege level</strong>: <strong>NORMAL</strong></p>
<p><strong>Error messages</strong>:</p>
<ul>
<li><p><em>Message</em>: Authentication failed!</p>
<p><em>Likely cause</em>: Wrong admin ID, or wrong password.</p>
</li>
<li><p><em>Message</em>: Partition ID must be between 1 and 10000, inclusive!</p>
<p><em>Likely cause</em>: Partition ID is out of range.</p>
</li>
<li><p><em>Message</em>: Partition ID does not exist!</p>
<p><em>Likely cause</em>: Partition with the given ID does not exist.</p>
</li>
<li><p><em>Message</em>: Key ID does not exist!</p>
<p><em>Likely cause</em>: Key with the given ID does not exist in the given partition.</p>
</li>
</ul>
<p><strong>Usage example</strong>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>clikk<span class="w"> </span>key<span class="w"> </span>info<span class="w"> </span>--partition-id<span class="o">=</span><span class="m">1</span><span class="w"> </span>--key-id<span class="o">=</span>RSAKey3072

<span class="go">Enter admin ID: Admin1</span>
<span class="go">Enter password:</span>

<span class="go">Partition ID: 1</span>
<span class="go">Key ID: RSAKey3072</span>
<span class="go">Key ID (percent-encoded): %52%53%41%4b%65%79%33%30%37%32</span>
<span class="go">Key label: RSAEncrypt</span>
<span class="go">Algorithm: RSAKeyPair</span>
<span class="go">Key length: 3072</span>
<span class="go">Creation date: 2023-03-27 14:55:17 WIB</span>
<span class="go">Expiry date: 2023-04-26 14:55:17 WIB</span>
<span class="go">Key purpose: Encryption</span>
<span class="go">Extractable: UNSET</span>
<span class="go">Revoked: Not revoked</span>
<span class="go">Rotatable: Not rotatable</span>
<span class="go">Public key: -----BEGIN PUBLIC KEY-----</span>
<span class="go">MIIBojANBgkqhkiG9w0BAQEFAAOCAY8AMIIBigKCAYEAzCKAhuEGoBnlidZzN8ef</span>
<span class="go">1ezF9nA5cl33K1DSSAqAUXt14F16Dxmkf4+hLrr1e8XYIBFOMaJek9YU3Hm/HXaA</span>
<span class="go">OljVyWodjgIgtTgppjaISZA7Ke7fwVU6SAknfDhJ4vcF7uSGY5ttKgQPBHm9XU4F</span>
<span class="go">Bo8EuCcWkNe6am0K4p9lb8M1YHW7GepqiLwY5byAtCCbZxHZfcJT9xcjrrXw34k2</span>
<span class="go">8RoQMFkt4r+VbKTY/Czyw+ApGeBk9OrVtZkW+4dE/zThYgsgI9DT/bxgfsgjI4qu</span>
<span class="go">zoFGKelU5fXXVCrf+lfvqthYqVSfthXBK//uxuxH9qCGiDWCsP24cquA3a2dBXc7</span>
<span class="go">5gsYZNmdbF/bFQ3tycpybbMCjsC80dGpd0Jn0fJr+p8cMZ0Y1oNC/87TYFTFRJ5q</span>
<span class="go">fIyYu1j9K8X/88xr+CL2I17GPpvoaDUmrNT8DK68nnYpdg6lKQl05kU4i/rls2ts</span>
<span class="go">bEfj1/2e8ktjNUCV4ApXNLmOGml8tg2Q8NidgFHY8fKxAgMBAAE=</span>
<span class="go">-----END PUBLIC KEY-----</span>
</pre></div>
</div>
</section>
<section id="clikk-key-rotate">
<h3><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">key</span> <span class="pre">rotate</span></code><a class="headerlink" href="#clikk-key-rotate" title="Link to this heading"></a></h3>
<p>Rotate a key.</p>
<p>Key rotation is only applicable to AES keys whose key purpose is encryption.</p>
<p><strong>Flags</strong>:</p>
<dl class="option-list">
<dt><kbd><span class="option">--partition-id=<var>&lt;partition ID&gt;</var></span></kbd></dt>
<dd><p>The identifier of the partition.</p>
</dd>
<dt><kbd><span class="option">--key-id=<var>&lt;key ID&gt;</var></span></kbd></dt>
<dd><p>The identifier of the key.</p>
</dd>
<dt><kbd><span class="option">--key-lifetime=<var>&lt;key lifetime&gt;</var></span></kbd></dt>
<dd><p>The lifetime of the rotated key, in days. Must be a number between 1 and 365, inclusive.</p>
</dd>
</dl>
<p><strong>Privilege level</strong>: <strong>HIGH</strong></p>
<p><strong>Error messages</strong>:</p>
<ul>
<li><p><em>Message</em>: Authentication failed!</p>
<p><em>Likely cause</em>: Wrong admin ID, wrong password, or invalid administrator card.</p>
</li>
<li><p><em>Message</em>: Partition ID must be between 1 and 10000, inclusive!</p>
<p><em>Likely cause</em>: Partition ID is out of range.</p>
</li>
<li><p><em>Message</em>: Partition ID does not exist!</p>
<p><em>Likely cause</em>: Partition with the given ID does not exist.</p>
</li>
<li><p><em>Message</em>: Key ID does not exist!</p>
<p><em>Likely cause</em>: Key with the given ID does not exist in the given partition.</p>
</li>
<li><p><em>Message</em>: Invalid key lifetime duration!</p>
<p><em>Likely cause</em>: Key lifetime is out of bounds.</p>
</li>
<li><p><em>Message</em>: Only AES key with encryption purpose can be rotated!</p>
<p><em>Likely cause</em>: Attempted to rotate a key that is not an AES key whose key purpose is encryption.</p>
</li>
<li><p><em>Message</em>: Imported AES key is not rotatable!</p>
<p><em>Likely cause</em>: Attempted to rotate an imported AES key.</p>
</li>
</ul>
<p><strong>Usage example</strong>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>clikk<span class="w"> </span>key<span class="w"> </span>rotate<span class="w"> </span>--partition-id<span class="o">=</span><span class="m">1</span><span class="w"> </span>--key-id<span class="o">=</span>AESKey<span class="w"> </span>--key-lifetime<span class="o">=</span><span class="m">60</span>

<span class="go">Enter admin ID: Admin1</span>
<span class="go">Enter password:</span>
<span class="go">Insert the administrator card of Admin1 for two-factor authentication.</span>

<span class="go">Key has been rotated successfully.</span>
</pre></div>
</div>
</section>
<section id="clikk-key-update">
<h3><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">key</span> <span class="pre">update</span></code><a class="headerlink" href="#clikk-key-update" title="Link to this heading"></a></h3>
<p>Update a key’s attributes.</p>
<p>This command updates a key’s extractable and rotatable attribute. At least one attribute must be updated
when invoking this command.</p>
<p>The extractable attribute is “<strong>unset</strong>” by default. A key whose extractable attribute is set to “<strong>no</strong>”
cannot have its extractable attribute changed.</p>
<p>The rotatable attribute is “<strong>manually rotatable</strong>” by default. Changing the rotatable attribute to
“<strong>automatically rotatable</strong>” must be accompanied by the <code class="docutils literal notranslate"><span class="pre">--rotated-key-lifetime</span></code> flag.</p>
<p><strong>Flags</strong>:</p>
<dl class="option-list">
<dt><kbd><span class="option">--partition-id=<var>&lt;partition ID&gt;</var></span></kbd></dt>
<dd><p>The identifier of the partition.</p>
</dd>
<dt><kbd><span class="option">--key-id=<var>&lt;key ID&gt;</var></span></kbd></dt>
<dd><p>The identifier of the key.</p>
</dd>
<dt><kbd><span class="option">--key-extractable=<var>&lt;extractable state index&gt;</var></span></kbd></dt>
<dd><p>The index of the extractable state to be set. Optional. Refer to <a class="reference internal" href="kripta-key-structure.html#updatable-key-attributes"><span class="std std-ref">Updatable Key Attributes</span></a>
for the extractable state index.</p>
</dd>
<dt><kbd><span class="option">--key-rotatable=<var>&lt;rotatable state index&gt;</var></span></kbd></dt>
<dd><p>The index of the rotatable state to be set. Optional. Refer to <a class="reference internal" href="kripta-key-structure.html#updatable-key-attributes"><span class="std std-ref">Updatable Key Attributes</span></a>
for the rotatable state index.</p>
</dd>
<dt><kbd><span class="option">--rotated-key-lifetime=<var>&lt;key lifetime&gt;</var></span></kbd></dt>
<dd><p>The lifetime of the rotated key, in days. Must be a number between 1 and 365, inclusive. Must be present
when <code class="docutils literal notranslate"><span class="pre">--key-rotatable</span></code> is set to “<strong>automatically rotatable</strong>”.</p>
</dd>
</dl>
<p><strong>Privilege level</strong>: <strong>HIGH</strong></p>
<p><strong>Error messages</strong>:</p>
<ul>
<li><p><em>Message</em>: Authentication failed!</p>
<p><em>Likely cause</em>: Wrong admin ID, wrong password, or invalid administrator card.</p>
</li>
<li><p><em>Message</em>: Partition ID must be between 1 and 10000, inclusive!</p>
<p><em>Likely cause</em>: Partition ID is out of range.</p>
</li>
<li><p><em>Message</em>: Partition ID does not exist!</p>
<p><em>Likely cause</em>: Partition with the given ID does not exist.</p>
</li>
<li><p><em>Message</em>: Key ID does not exist!</p>
<p><em>Likely cause</em>: Key with the given ID does not exist in the given partition.</p>
</li>
<li><p><em>Message</em>: Please specify automatically rotated key lifetime!</p>
<p><em>Likely cause</em>: Attempted to set key to automatically rotatable without passing in <code class="docutils literal notranslate"><span class="pre">--rotated-key-lifetime</span></code> flag.</p>
</li>
<li><p><em>Message</em>: Invalid key lifetime duration!</p>
<p><em>Likely cause</em>: Key lifetime is out of bounds.</p>
</li>
<li><p><em>Message</em>: No attributes are being updated!</p>
<p><em>Likely cause</em>: Command was invoked without either <code class="docutils literal notranslate"><span class="pre">--key-extractable</span></code> or <code class="docutils literal notranslate"><span class="pre">--key-rotatable</span></code> flags.</p>
</li>
<li><p><em>Message</em>: Unrecognized values for the attributes!</p>
<p><em>Likely cause</em>: Attribute index is out of bounds.</p>
</li>
<li><p><em>Message</em>: Updating rotatable status for key ID with key purpose other than encryption is not allowed!</p>
<p><em>Likely cause</em>: Attempted to set rotatable attribute for a key that is not an AES key
whose key purpose is encryption.</p>
</li>
<li><p><em>Message</em>: Updating rotatable status for imported AES key is not allowed!</p>
<p><em>Likely cause</em>: Attempted to set rotatable attribute for an imported AES key.</p>
</li>
<li><p><em>Message</em>: Updating extractable status for key ID that has been set to “NO” is not allowed!</p>
<p><em>Likely cause</em>: Attempted to set extractable attribute for a key that is not extractable.</p>
</li>
</ul>
<p><strong>Usage example</strong>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>clikk<span class="w"> </span>key<span class="w"> </span>update<span class="w"> </span>--partition-id<span class="o">=</span><span class="m">1</span><span class="w"> </span>--key-id<span class="o">=</span>AESKey<span class="w"> </span>--key-rotatable<span class="o">=</span><span class="m">1</span><span class="w"> </span>--rotated-key-lifetime<span class="o">=</span><span class="m">30</span><span class="w"> </span>--key-extractable<span class="o">=</span><span class="m">1</span>

<span class="go">Enter admin ID: Admin1</span>
<span class="go">Enter password:</span>
<span class="go">Insert the administrator card of Admin1 for two-factor authentication.</span>

<span class="go">Key has been updated successfully.</span>
</pre></div>
</div>
</section>
<section id="clikk-key-export">
<h3><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">key</span> <span class="pre">export</span></code><a class="headerlink" href="#clikk-key-export" title="Link to this heading"></a></h3>
<p>Export a key by wrapping it using PKCS#11 RSA-AES key wrapping mechanism.</p>
<p>This command requires an RSA public key, in PEM format. This public key is used to wrap the key material.</p>
<p>The extractable attribute of the key must be set to “<strong>yes</strong>” before executing this command.</p>
<p><strong>Flags</strong>:</p>
<dl class="option-list">
<dt><kbd><span class="option">--partition-id=<var>&lt;partition ID&gt;</var></span></kbd></dt>
<dd><p>The identifier of the partition.</p>
</dd>
<dt><kbd><span class="option">--key-id=<var>&lt;key ID&gt;</var></span></kbd></dt>
<dd><p>The identifier of the key.</p>
</dd>
<dt><kbd><span class="option">--key-version=<var>&lt;key version&gt;</var></span></kbd></dt>
<dd><p>The version of the key, if applicable.</p>
</dd>
<dt><kbd><span class="option">--pubkey-path=<var>&lt;path to public key&gt;</var></span></kbd></dt>
<dd><p>The absolute path to the RSA public key, in PEM format.</p>
</dd>
<dt><kbd><span class="option">--output-file-path=<var>&lt;path to output file&gt;</var></span></kbd></dt>
<dd><p>The absolute path where the output file will be written to.</p>
</dd>
</dl>
<p><strong>Privilege level</strong>: <strong>CRITICAL</strong></p>
<p><strong>Error messages</strong>:</p>
<ul>
<li><p><em>Message</em>: Authentication failed!</p>
<p><em>Likely cause</em>: Wrong admin ID, wrong password, or invalid administrator card.</p>
</li>
<li><p><em>Message</em>: Partition ID must be between 1 and 10000, inclusive!</p>
<p><em>Likely cause</em>: Partition ID is out of range.</p>
</li>
<li><p><em>Message</em>: Partition ID does not exist!</p>
<p><em>Likely cause</em>: Partition with the given ID does not exist.</p>
</li>
<li><p><em>Message</em>: Key ID does not exist!</p>
<p><em>Likely cause</em>: Key with the given ID does not exist in the given partition.</p>
</li>
<li><p><em>Message</em>: Key ID with specified version does not exist!</p>
<p><em>Likely cause</em>: Key with the given version does not exist.</p>
</li>
<li><p><em>Message</em>: Output filename already exists!</p>
<p><em>Likely cause</em>: Output path is not empty.</p>
</li>
<li><p><em>Message</em>: Public key file not found!</p>
<p><em>Likely cause</em>: Path to public key file is incorrect.</p>
</li>
<li><p><em>Message</em>: Key ID is not extractable!</p>
<p><em>Likely cause</em>: Extractable attribute of key is not set to “<strong>yes</strong>”.</p>
</li>
<li><p><em>Message</em>: Invalid public wrapping key!</p>
<p><em>Likely cause</em>: Public key file is invalid, or not in the correct format.</p>
</li>
<li><p><em>Message</em>: Failed to create output wrapped key file!</p>
<p><em>Likely cause</em>: Unable to write to the given output path.</p>
</li>
</ul>
<p><strong>Usage example</strong>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>clikk<span class="w"> </span>key<span class="w"> </span><span class="nb">export</span><span class="w"> </span>--partition-id<span class="o">=</span><span class="m">1</span><span class="w"> </span>--key-id<span class="o">=</span>AESKey<span class="w"> </span>--key-version<span class="o">=</span><span class="m">1</span><span class="w"> </span>--pubkey-path<span class="o">=</span>/home/user/Documents/publicKey.pem<span class="w"> </span>--output-file-path<span class="o">=</span>/home/user/Documents/AESExport.bin

<span class="go">Enter admin ID: Admin1</span>
<span class="go">Enter password:</span>
<span class="go">Insert the administrator card of Admin1 for two-factor authentication.</span>

<span class="go">Dual control authentication -- credential of a second user is required.</span>
<span class="go">Admin1 is currently logged in.</span>

<span class="go">Enter admin ID: Admin2</span>
<span class="go">Enter password:</span>
<span class="go">Insert the administrator card of Admin2 for two-factor authentication.</span>

<span class="go">Key has been exported successfully to /home/user/Documents/AESExport.bin.</span>
</pre></div>
</div>
</section>
<section id="clikk-key-import-pkcs11">
<h3><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">key</span> <span class="pre">import-pkcs11</span></code><a class="headerlink" href="#clikk-key-import-pkcs11" title="Link to this heading"></a></h3>
<p>Import a key that is wrapped using PKCS#11 RSA-AES key wrapping mechanism.</p>
<p>The key used to wrap the imported key must already be stored. The imported key must be in DER format.</p>
<p>Imported keys are always set to extractable and not rotatable. The following lists the available key purposes
for the imported key:</p>
<ul class="simple">
<li><p><strong>AES</strong>: Encryption.</p></li>
<li><p><strong>RSA</strong>: Encryption, signing, certificate signing.</p></li>
<li><p><strong>ECDSA-P256</strong>: Signing, certificate signing.</p></li>
<li><p><strong>ECDSA-P384</strong>: Signing, certificate signing.</p></li>
<li><p><strong>ECDSA-P521</strong>: Signing, certificate signing.</p></li>
<li><p><strong>EdDSA Ed25519</strong>: Signing, certificate signing.</p></li>
</ul>
<p><strong>Flags</strong>:</p>
<dl class="option-list">
<dt><kbd><span class="option">--partition-id=<var>&lt;partition ID&gt;</var></span></kbd></dt>
<dd><p>The identifier of the partition.</p>
</dd>
<dt><kbd><span class="option">--key-id=<var>&lt;key ID&gt;</var></span></kbd></dt>
<dd><p>The identifier of the key. Must be alphanumeric and not more than 20 characters in length.</p>
</dd>
<dt><kbd><span class="option">--key-label=<var>&lt;key label&gt;</var></span></kbd></dt>
<dd><p>The descriptive label of the key. Must be alphanumeric and not more than 20 characters in length.</p>
</dd>
<dt><kbd><span class="option">--key-algo=<var>&lt;key algorithm index&gt;</var></span></kbd></dt>
<dd><p>The algorithm index of the key. Refer to <a class="reference internal" href="kripta-key-structure.html#key-algorithms"><span class="std std-ref">Key algorithms</span></a>
for the algorithm index.</p>
</dd>
<dt><kbd><span class="option">--key-length=<var>&lt;key length&gt;</var></span></kbd></dt>
<dd><p>The length of the key. Not applicable for some key algorithms — refer to <a class="reference internal" href="kripta-key-structure.html#key-algorithms"><span class="std std-ref">Key algorithms</span></a>
for the possible key lengths for each key algorithm.</p>
</dd>
<dt><kbd><span class="option">--key-purpose=<var>&lt;key purpose index&gt;</var></span></kbd></dt>
<dd><p>The purpose index of the key. Refer to <a class="reference internal" href="kripta-key-structure.html#key-purposes"><span class="std std-ref">Key purposes</span></a>
for the key purpose index.</p>
</dd>
<dt><kbd><span class="option">--key-lifetime=<var>&lt;key lifetime&gt;</var></span></kbd></dt>
<dd><p>The lifetime of the key, in days. After this duration elapses, the key will expire and cannot be used
for cryptographic operations that generate new data. Refer to <a class="reference internal" href="kripta-key-structure.html#key"><span class="std std-ref">Key</span></a>
for the operations allowed with expired keys.</p>
</dd>
<dt><kbd><span class="option">--wrapping-key-partition-id=<var>&lt;partition ID&gt;</var></span></kbd></dt>
<dd><p>The identifier of the partition where the wrapping key is in.</p>
</dd>
<dt><kbd><span class="option">--wrapping-key-id=<var>&lt;key ID&gt;</var></span></kbd></dt>
<dd><p>The identifier of the wrapping key.</p>
</dd>
<dt><kbd><span class="option">--wrapped-key-path=<var>&lt;path to wrapped key&gt;</var></span></kbd></dt>
<dd><p>The absolute path to the wrapped key.</p>
</dd>
</dl>
<p><strong>Privilege level</strong>: <strong>HIGH</strong></p>
<p><strong>Error messages</strong>:</p>
<ul>
<li><p><em>Message</em>: Authentication failed!</p>
<p><em>Likely cause</em>: Wrong admin ID, wrong password, or invalid administrator card.</p>
</li>
<li><p><em>Message</em>: Partition ID must be between 1 and 10000, inclusive!</p>
<p><em>Likely cause</em>: Partition ID is out of range.</p>
</li>
<li><p><em>Message</em>: Partition ID does not exist!</p>
<p><em>Likely cause</em>: Partition with the given ID does not exist.</p>
</li>
<li><p><em>Message</em>: Invalid key lifetime duration!</p>
<p><em>Likely cause</em>: Key lifetime duration is too long.</p>
</li>
<li><p><em>Message</em>: Invalid key length for specified key algorithm!</p>
<p><em>Likely cause</em>: Key length is not supported for the given algorithm.</p>
</li>
<li><p><em>Message</em>: Invalid combination of key algorithm and purpose!</p>
<p><em>Likely cause</em>: Key purpose is not applicable for the given algorithm, or key purpose index is out of bounds.</p>
</li>
<li><p><em>Message</em>: Importing key with wrapping purpose is not allowed!</p>
<p><em>Likely cause</em>: Attempted to import a key with the key purpose set to wrapping.</p>
</li>
<li><p><em>Message</em>: Key length is not applicable for EC keys!</p>
<p><em>Likely cause</em>: Used <code class="docutils literal notranslate"><span class="pre">--key-length</span></code> flag with ECDSA and EdDSA keys.</p>
</li>
<li><p><em>Message</em>: Invalid key algorithm!</p>
<p><em>Likely cause</em>: Key algorithm index is out of bounds.</p>
</li>
<li><p><em>Message</em>: Wrapping key ID does not exist!</p>
<p><em>Likely cause</em>: Key with the given ID does not exist in the given partition.</p>
</li>
<li><p><em>Message</em>: Key algorithm is not intended for key wrapping!</p>
<p><em>Likely cause</em>: Key with the given ID is not an RSA key.</p>
</li>
<li><p><em>Message</em>: Invalid wrapping key!</p>
<p><em>Likely cause</em>: Key with the given ID does not have key wrapping as its key purpose.</p>
</li>
<li><p><em>Message</em>: Cannot open wrapped key file!</p>
<p><em>Likely cause</em>: Wrong path to wrapped key.</p>
</li>
</ul>
<p><strong>Usage example</strong>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>clikk<span class="w"> </span>key<span class="w"> </span>import-pkcs11<span class="w"> </span>--partition-id<span class="o">=</span><span class="m">1</span><span class="w"> </span>--key-id<span class="o">=</span>AESKey03<span class="w"> </span>--key-label<span class="o">=</span>ImportedKey<span class="w"> </span>--key-algo<span class="o">=</span><span class="m">1</span><span class="w"> </span>--key-length<span class="o">=</span><span class="m">256</span><span class="w"> </span>--key-lifetime<span class="o">=</span><span class="m">365</span><span class="w"> </span>--key-purpose<span class="o">=</span><span class="m">1</span><span class="w"> </span>--wrapping-key-id<span class="o">=</span>RSAWrappingKey<span class="w"> </span>--wrapping-key-partition-id<span class="o">=</span><span class="m">2</span><span class="w"> </span>--wrapped-key-path<span class="o">=</span>/home/user/wrappedSessionkey.bin

<span class="go">Enter admin ID: Admin1</span>
<span class="go">Enter password:</span>
<span class="go">Insert the administrator card of Admin1 for two-factor authentication.</span>

<span class="go">Partition ID: 1</span>
<span class="go">Key ID: AESKey03</span>
<span class="go">Key type: AESSecretKey</span>
<span class="go">Key purpose: Encryption</span>
</pre></div>
</div>
</section>
<section id="clikk-key-import-pkcs12">
<h3><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">key</span> <span class="pre">import-pkcs12</span></code><a class="headerlink" href="#clikk-key-import-pkcs12" title="Link to this heading"></a></h3>
<p>Import a key and a certificate chain stored in PKCS#12 format.</p>
<p>Keys and certificates in PKCS#12 format are usually stored in files with the P12 extension.</p>
<p>The imported key can only be used for certificate signing, and must be of the following algorithm:</p>
<ul class="simple">
<li><p>RSA (must be not less than 3072 bits in length)</p></li>
<li><p>ECDSA-P256</p></li>
<li><p>ECDSA-P384</p></li>
<li><p>ECDSA-P521</p></li>
<li><p>EdDSA Ed25519</p></li>
</ul>
<p><strong>Flags</strong>:</p>
<dl class="option-list">
<dt><kbd><span class="option">--partition-id=<var>&lt;partition ID&gt;</var></span></kbd></dt>
<dd><p>The identifier of the partition.</p>
</dd>
<dt><kbd><span class="option">--key-id=<var>&lt;key ID&gt;</var></span></kbd></dt>
<dd><p>The identifier of the key. Must be alphanumeric and not more than 20 characters in length.</p>
</dd>
<dt><kbd><span class="option">--key-label=<var>&lt;key label&gt;</var></span></kbd></dt>
<dd><p>The descriptive label of the key. Must be alphanumeric and not more than 20 characters in length.</p>
</dd>
<dt><kbd><span class="option">--keystore-path=<var>&lt;path to certificate file&gt;</var></span></kbd></dt>
<dd><p>The absolute path to the key, in P12 format.</p>
</dd>
</dl>
<p><strong>Privilege level</strong>: <strong>HIGH</strong></p>
<p><strong>Error messages</strong>:</p>
<ul>
<li><p><em>Message</em>: Authentication failed!</p>
<p><em>Likely cause</em>: Wrong admin ID, wrong password, or invalid administrator card.</p>
</li>
<li><p><em>Message</em>: Partition ID must be between 1 and 10000, inclusive!</p>
<p><em>Likely cause</em>: Partition ID is out of range.</p>
</li>
<li><p><em>Message</em>: Partition ID does not exist!</p>
<p><em>Likely cause</em>: Partition with the given ID does not exist.</p>
</li>
<li><p><em>Message</em>: Certificate file does not exist!</p>
<p><em>Likely cause</em>: Wrong path to certificate file.</p>
</li>
<li><p><em>Message</em>: Certificate is not in P12 format!</p>
<p><em>Likely cause</em>: Certificate file is in the wrong format.</p>
</li>
<li><p><em>Message</em>: Key length is less than 3072 bit!</p>
<p><em>Likely cause</em>: Key length is too short.</p>
</li>
<li><p><em>Message</em>: Key type is not RSA!</p>
<p><em>Likely cause</em>: Key in the certificate is not an RSA key.</p>
</li>
<li><p><em>Message</em>: Certificate with the given DN already exists!</p>
<p><em>Likely cause</em>: Certificate with the same Distinguished Name already exists.</p>
</li>
<li><p><em>Message</em>: Certificate associated with the key ID already exists!</p>
<p><em>Likely cause</em>: Key with the given ID already has a certificate.</p>
</li>
</ul>
<p><strong>Usage example</strong>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>clikk<span class="w"> </span>key<span class="w"> </span>import-pkcs12<span class="w"> </span>--partition-id<span class="o">=</span><span class="m">2</span><span class="w"> </span>--key-id<span class="o">=</span>Finance02<span class="w"> </span>--key-label<span class="o">=</span>finance02ImportKey<span class="w"> </span>--keystore-path<span class="o">=</span>/home/user/Documents/certificatepkcs12.p12

<span class="go">Enter certificate password:</span>

<span class="go">Enter admin ID: Admin1</span>
<span class="go">Enter password:</span>
<span class="go">Insert the administrator card of Admin1 for two-factor authentication.</span>

<span class="go">Key and certificate have been imported successfully.</span>
</pre></div>
</div>
</section>
<section id="clikk-key-generate-csr">
<h3><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">key</span> <span class="pre">generate-csr</span></code><a class="headerlink" href="#clikk-key-generate-csr" title="Link to this heading"></a></h3>
<p>Create a certificate signing request (CSR) from an existing key pair.</p>
<p>The generated CSR may be signed by external parties to create a certificate.</p>
<p>The key pair must be in Kripta Key’s database, and its key purpose must be wrapping, signing, or certificate signing.</p>
<p><strong>Flags</strong>:</p>
<dl class="option-list">
<dt><kbd><span class="option">--partition-id=<var>&lt;partition ID&gt;</var></span></kbd></dt>
<dd><p>The identifier of the partition.</p>
</dd>
<dt><kbd><span class="option">--key-id=<var>&lt;key ID&gt;</var></span></kbd></dt>
<dd><p>The identifier of the key.</p>
</dd>
<dt><kbd><span class="option">--output-csr-path=<var>&lt;path to output file&gt;</var></span></kbd></dt>
<dd><p>The absolute path where the output CSR file will be written to.</p>
</dd>
</dl>
<p><strong>Privilege level</strong>: <strong>HIGH</strong></p>
<p><strong>Error messages</strong>:</p>
<ul>
<li><p><em>Message</em>: Authentication failed!</p>
<p><em>Likely cause</em>: Wrong admin ID, wrong password, or invalid administrator card.</p>
</li>
<li><p><em>Message</em>: Partition ID must be between 1 and 10000, inclusive!</p>
<p><em>Likely cause</em>: Partition ID is out of range.</p>
</li>
<li><p><em>Message</em>: Partition ID does not exist!</p>
<p><em>Likely cause</em>: Partition with the given ID does not exist.</p>
</li>
<li><p><em>Message</em>: Key ID does not exist!</p>
<p><em>Likely cause</em>: Key with the given ID does not exist in the given partition.</p>
</li>
<li><p><em>Message</em>: Output filename already exists!</p>
<p><em>Likely cause</em>: Output path is not empty.</p>
</li>
<li><p><em>Message</em>: Key algorithm is not intended for certificate signing!</p>
<p><em>Likely cause</em>: Key algorithm is not applicable for certificates.</p>
</li>
<li><p><em>Message</em>: Key ID is not intended for certificate signing!</p>
<p><em>Likely cause</em>: Key with the given ID has incompatible key purpose for CSR generation.</p>
</li>
<li><p><em>Message</em>: Certificate associated with the key ID already exists!</p>
<p><em>Likely cause</em>: Key with the given ID already has a certificate.</p>
</li>
<li><p><em>Message</em>: Subject or Distinguished Name’s length must be less than 256 characters!</p>
<p><em>Likely cause</em>: Input to DN prompt is too long.</p>
</li>
<li><p><em>Message</em>: CSR file creation failed!</p>
<p><em>Likely cause</em>: Unable to write to the given output path.</p>
</li>
</ul>
<p><strong>Usage example</strong>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>clikk<span class="w"> </span>key<span class="w"> </span>generate-csr<span class="w"> </span>--partition-id<span class="o">=</span><span class="m">2</span><span class="w"> </span>--key-id<span class="o">=</span>RSA4096Key01<span class="w"> </span>--output-csr-path<span class="o">=</span>Finance01.csr

<span class="go">Enter admin ID: Admin1</span>
<span class="go">Enter password:</span>
<span class="go">Insert the administrator card of Admin1 for two-factor authentication.</span>

<span class="go">This action requires a Distinguished Name for the certificate.</span>
<span class="go">Hence, input will be required for each field in the Distinguished Name.</span>
<span class="go">Please enter valid data in each field.</span>
<span class="go">------</span>
<span class="go">[-] Common Name (fully qualified domain name): www.klaviskripta.com</span>
<span class="go">[-] Country Name (2 letter code) (Default: []): ID</span>
<span class="go">[-] State or Province Name (Default: []): DKI Jakarta</span>
<span class="go">[-] Locality or City Name (Default: []): Jakarta Pusat</span>
<span class="go">[-] Organization Name (legal company name) (Default: []): PT. Klavis Kripta Inovasi</span>
<span class="go">[-] Organizational Unit Name (section or department) (Default: []): Finance</span>
<span class="go">[-] Email Address (Default: []): finance@klaviskripta.com</span>

<span class="go">CSR has been generated and written successfully to /home/user/Documents/Finance01.csr.</span>
</pre></div>
</div>
</section>
<section id="clikk-key-revoke">
<h3><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">key</span> <span class="pre">revoke</span></code><a class="headerlink" href="#clikk-key-revoke" title="Link to this heading"></a></h3>
<p>Revoke all key material under a key ID.</p>
<p>Key revocation is <strong>irreversible</strong>. Any certificate associated with the key will be revoked as well.</p>
<p>Revoked keys cannot be rotated, updated, exported, or used for cryptographic operations that generate new data.</p>
<p><strong>Flags</strong>:</p>
<dl class="option-list">
<dt><kbd><span class="option">--partition-id=<var>&lt;partition ID&gt;</var></span></kbd></dt>
<dd><p>The identifier of the partition.</p>
</dd>
<dt><kbd><span class="option">--key-id=<var>&lt;key ID&gt;</var></span></kbd></dt>
<dd><p>The identifier of the key.</p>
</dd>
</dl>
<p><strong>Privilege level</strong>: <strong>CRITICAL</strong></p>
<p><strong>Error messages</strong>:</p>
<ul>
<li><p><em>Message</em>: Authentication failed!</p>
<p><em>Likely cause</em>: Wrong admin ID, wrong password, or invalid administrator card.</p>
</li>
<li><p><em>Message</em>: Partition ID must be between 1 and 10000, inclusive!</p>
<p><em>Likely cause</em>: Partition ID is out of range.</p>
</li>
<li><p><em>Message</em>: Partition ID does not exist!</p>
<p><em>Likely cause</em>: Partition with the given ID does not exist.</p>
</li>
<li><p><em>Message</em>: Key ID does not exist!</p>
<p><em>Likely cause</em>: Key with the given ID does not exist in the given partition.</p>
</li>
<li><p><em>Message</em>: Key has been revoked!</p>
<p><em>Likely cause</em>: Key with the given ID has already been revoked.</p>
</li>
</ul>
<p><strong>Usage example</strong>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>clikk<span class="w"> </span>key<span class="w"> </span>revoke<span class="w"> </span>--key-id<span class="o">=</span>AESKey01<span class="w"> </span>--partition-id<span class="o">=</span><span class="m">2</span>

<span class="go">Read the following points before proceeding with key revocation:</span>
<span class="go">- Key revocation is IRREVERSIBLE.</span>
<span class="go">- All certificates associated with the key will be revoked as well.</span>
<span class="go">- A revoked key CANNOT be rotated.</span>
<span class="go">- A revoked key CANNOT be used cryptographic functions that generate new data, such as `mac/generate`,</span>
<span class="go">`encrypt`, `seal`, `tokenize`, `sign`, `cert/sign`, and any function that involves key wrapping.</span>
<span class="go">- Otherwise, a revoked key MAY be used for other cryptographic functions, such as `mac/verify`, `decrypt`,</span>
<span class="go">`unseal`, `detokenize`, `verify`, `cert/verify`, and any function that involves key unwrapping.</span>
<span class="go">- A revoked key CANNOT be used with any CLIKK command, except for `key info` and `key delete`.</span>

<span class="go">Are you sure you want to continue? Type `Le%C;` to continue, or press Enter to cancel.</span>
<span class="go">&gt; Le%C;</span>

<span class="go">Enter admin ID: Admin1</span>
<span class="go">Enter password:</span>
<span class="go">Insert the administrator card of Admin1 for two-factor authentication.</span>

<span class="go">Dual control authentication -- credential of a second user is required.</span>
<span class="go">Admin1 is currently logged in.</span>

<span class="go">Enter admin ID: Admin2</span>
<span class="go">Enter password:</span>
<span class="go">Insert the administrator card of Admin2 for two-factor authentication.</span>

<span class="go">Key has been revoked successfully.</span>
</pre></div>
</div>
</section>
<section id="clikk-key-delete">
<h3><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">key</span> <span class="pre">delete</span></code><a class="headerlink" href="#clikk-key-delete" title="Link to this heading"></a></h3>
<p>Delete a key permanently.</p>
<p>Key deletion is <strong>irreversible</strong>. Any certificate associated with the key will be deleted as well.</p>
<p>To avoid accidental deletion, only revoked keys may be deleted.</p>
<p><strong>Flags</strong>:</p>
<dl class="option-list">
<dt><kbd><span class="option">--partition-id=<var>&lt;partition ID&gt;</var></span></kbd></dt>
<dd><p>The identifier of the partition.</p>
</dd>
<dt><kbd><span class="option">--key-id=<var>&lt;key ID&gt;</var></span></kbd></dt>
<dd><p>The identifier of the key.</p>
</dd>
</dl>
<p><strong>Privilege level</strong>: <strong>CRITICAL</strong></p>
<p><strong>Error messages</strong>:</p>
<ul>
<li><p><em>Message</em>: Authentication failed!</p>
<p><em>Likely cause</em>: Wrong admin ID, wrong password, or invalid administrator card.</p>
</li>
<li><p><em>Message</em>: Partition ID must be between 1 and 10000, inclusive!</p>
<p><em>Likely cause</em>: Partition ID is out of range.</p>
</li>
<li><p><em>Message</em>: Partition ID does not exist!</p>
<p><em>Likely cause</em>: Partition with the given ID does not exist.</p>
</li>
<li><p><em>Message</em>: Key ID does not exist!</p>
<p><em>Likely cause</em>: Key with the given ID does not exist in the given partition.</p>
</li>
<li><p><em>Message</em>: Unable to delete key that is not revoked!</p>
<p><em>Likely cause</em>: Key with the given ID has not been revoked.</p>
</li>
</ul>
<p><strong>Usage example</strong>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>clikk<span class="w"> </span>key<span class="w"> </span>delete<span class="w"> </span>--key-id<span class="o">=</span>AESKey01<span class="w"> </span>--partition-id<span class="o">=</span><span class="m">2</span>

<span class="go">Read the following points before proceeding with key deletion:</span>
<span class="go">- Key destruction is IRREVERSIBLE.</span>
<span class="go">- Any certificate associated with the key will be deleted as well.</span>
<span class="go">- Any data associated with this key WILL be lost once the key is deleted.</span>

<span class="go">Are you sure you want to continue? Type `^mb!z` to continue, or press Enter to cancel.</span>
<span class="go">&gt; ^mb!z</span>

<span class="go">Enter admin ID: Admin1</span>
<span class="go">Enter password:</span>
<span class="go">Insert the administrator card of Admin 1 for two-factor authentication.</span>

<span class="go">Dual control authentication -- credential of a second user is required.</span>
<span class="go">Admin1 is currently logged in.</span>

<span class="go">Enter admin ID: Admin2</span>
<span class="go">Enter password:</span>
<span class="go">Insert the administrator card of Admin2 for two-factor authentication.</span>

<span class="go">Key has been deleted successfully.</span>
</pre></div>
</div>
</section>
</section>
<section id="certificate">
<h2>Certificate<a class="headerlink" href="#certificate" title="Link to this heading"></a></h2>
<p>Kripta Key is capable of managing certificates as well. Administrators may create a self-signed certificate
or import an existing certificate. Certificates managed by Kripta Key must have their corresponding keys managed
by Kripta Key as well.</p>
<section id="clikk-cert-self-sign">
<h3><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">cert</span> <span class="pre">self-sign</span></code><a class="headerlink" href="#clikk-cert-self-sign" title="Link to this heading"></a></h3>
<p>Create a self-signed certificate.</p>
<p>The key associated with the certificate must have certificate signing as its key purpose.</p>
<p>The Common Name is mandatory for the certificate’s Distinguished Name.</p>
<p><strong>Flags</strong>:</p>
<dl class="option-list">
<dt><kbd><span class="option">--partition-id=<var>&lt;partition ID&gt;</var></span></kbd></dt>
<dd><p>The identifier of the partition.</p>
</dd>
<dt><kbd><span class="option">--key-id=<var>&lt;key ID&gt;</var></span></kbd></dt>
<dd><p>The identifier of the key.</p>
</dd>
<dt><kbd><span class="option">--output-file-path=<var>&lt;path to output file&gt;</var></span></kbd></dt>
<dd><p>The absolute path where the output file will be written to.</p>
</dd>
<dt><kbd><span class="option">--ext-file-path=<var>&lt;path to extension file&gt;</var></span></kbd></dt>
<dd><p>The absolute path where the extension file is located. This parameter is optional but mandatory if you want to create a self-signed certificate that will be used to sign another certificate.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">{</span>
<span class="go">&quot;basic_constraints&quot;: &quot;critical,CA:TRUE&quot;,</span>
<span class="go">&quot;key_usage&quot;: &quot;critical,digitalSignature,keyCertSign,cRLSign&quot;</span>
<span class="go">}</span>
</pre></div>
</div>
</dd>
</dl>
<p><strong>Privilege level</strong>: <strong>HIGH</strong></p>
<p><strong>Error messages</strong>:</p>
<ul>
<li><p><em>Message</em>: Authentication failed!</p>
<p><em>Likely cause</em>: Wrong admin ID, wrong password, or invalid administrator card.</p>
</li>
<li><p><em>Message</em>: Partition ID must be between 1 and 10000, inclusive!</p>
<p><em>Likely cause</em>: Partition ID is out of range.</p>
</li>
<li><p><em>Message</em>: Partition ID does not exist!</p>
<p><em>Likely cause</em>: Partition with the given ID does not exist.</p>
</li>
<li><p><em>Message</em>: Key ID does not exist!</p>
<p><em>Likely cause</em>: Key with the given ID does not exist in the given partition.</p>
</li>
<li><p><em>Message</em>: Key algorithm is not intended for certificate signing!</p>
<p><em>Likely cause</em>: Key algorithm is not suitable for certificate signing.</p>
</li>
<li><p><em>Message</em>: Invalid key length for certificate signing!</p>
<p><em>Likely cause</em>: Key length is too short.</p>
</li>
<li><p><em>Message</em>: Key ID is not intended for certificate signing!</p>
<p><em>Likely cause</em>: Key with the given ID does not have certificate signing as its key purpose.</p>
</li>
<li><p><em>Message</em>: Certificate associated with the key ID already exists!</p>
<p><em>Likely cause</em>: Key with the given ID already has a certificate.</p>
</li>
<li><p><em>Message</em>: Output filename already exists!</p>
<p><em>Likely cause</em>: Output path is not empty.</p>
</li>
<li><p><em>Message</em>: Failed to create output wrapped key file!</p>
<p><em>Likely cause</em>: Unable to write to the given output path.</p>
</li>
</ul>
<p><strong>Usage example</strong>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>clikk<span class="w"> </span>cert<span class="w"> </span>self-sign<span class="w"> </span>--partition-id<span class="o">=</span><span class="m">1</span><span class="w"> </span>--key-id<span class="o">=</span>ECDSAKey01<span class="w"> </span>--output-file-path<span class="o">=</span>/home/user/Documents/Finance.pem

<span class="go">Enter admin ID: Admin1</span>
<span class="go">Enter password:</span>
<span class="go">Insert the administrator card of Admin1 for two-factor authentication.</span>

<span class="go">This action requires a Distinguished Name for the certificate.</span>
<span class="go">Hence, input will be required for each field in the Distinguished Name.</span>
<span class="go">Please enter valid data in each field.</span>
<span class="go">------</span>
<span class="go">[-] Common Name (fully qualified domain name): www.klaviskripta.com</span>
<span class="go">[-] Country Name (2 letter code) (Default: []): ID</span>
<span class="go">[-] State or Province Name (Default: []): DKI Jakarta</span>
<span class="go">[-] Locality or City Name (Default: []): Jakarta Pusat</span>
<span class="go">[-] Organization Name (legal company name) (Default: []): PT. Klavis Kripta Inovasi</span>
<span class="go">[-] Organizational Unit Name (section or department) (Default: []): Finance</span>
<span class="go">[-] Email Address (Default: []): finance@klaviskripta.com</span>
<span class="go">[-] Validity period, in days: 365</span>

<span class="go">Self-signed certificate created and saved successfully to /home/user/Documents/Finance.pem.</span>
</pre></div>
</div>
</section>
<section id="clikk-cert-list">
<h3><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">cert</span> <span class="pre">list</span></code><a class="headerlink" href="#clikk-cert-list" title="Link to this heading"></a></h3>
<p>List all available certificates in a given partition.</p>
<p><strong>Flags</strong>:</p>
<dl class="option-list">
<dt><kbd><span class="option">--partition-id=<var>&lt;partition ID&gt;</var></span></kbd></dt>
<dd><p>The identifier of the partition.</p>
</dd>
</dl>
<p><strong>Privilege level</strong>: <strong>NORMAL</strong></p>
<p><strong>Error messages</strong>:</p>
<ul>
<li><p><em>Message</em>: Authentication failed!</p>
<p><em>Likely cause</em>: Wrong admin ID, or wrong password.</p>
</li>
<li><p><em>Message</em>: Partition ID must be between 1 and 10000, inclusive!</p>
<p><em>Likely cause</em>: Partition ID is out of range.</p>
</li>
<li><p><em>Message</em>: Partition ID does not exist!</p>
<p><em>Likely cause</em>: Partition with the given ID does not exist.</p>
</li>
</ul>
<p><strong>Usage example</strong>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>clikk<span class="w"> </span>cert<span class="w"> </span>list<span class="w"> </span>--partition-id<span class="o">=</span><span class="m">1</span>

<span class="go">Enter admin ID: Admin1</span>
<span class="go">Enter password:</span>

<span class="go">Certificate list:</span>
<span class="go">- Key ID: Finance01</span>
<span class="go">Distinguished Name (DN): C=ID, ST=DKI Jakarta, L=Jakarta Pusat, O=PT. Klavis Kripta Inovasi, OU=Finance, CN=Klavis Kripta/emailAddress=mail@klaviskripta.com</span>
<span class="go">- Key ID: Finance02</span>
<span class="go">Distinguished Name (DN): C=ID, ST=DKI Jakarta, L=Jakarta Pusat, O=PT.Klavis Kripta Inovasi, OU=Finance, CN=Budi/emailAddress=budi@klaviskripta.com</span>

<span class="go">Revoked certificates:</span>
<span class="go">No certificate has been revoked.</span>
</pre></div>
</div>
</section>
<section id="clikk-cert-info">
<h3><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">cert</span> <span class="pre">info</span></code><a class="headerlink" href="#clikk-cert-info" title="Link to this heading"></a></h3>
<p>Retrieve information about a certificate.</p>
<p>The information includes the key version, issuance date, expiry date, certificate subject,
and the certificate itself, in PEM format.</p>
<p><strong>Flags</strong>:</p>
<dl class="option-list">
<dt><kbd><span class="option">--partition-id=<var>&lt;partition ID&gt;</var></span></kbd></dt>
<dd><p>The identifier of the partition.</p>
</dd>
<dt><kbd><span class="option">--key-id=<var>&lt;key ID&gt;</var></span></kbd></dt>
<dd><p>The identifier of the key associated with the certificate.</p>
</dd>
</dl>
<p><strong>Privilege level</strong>: <strong>NORMAL</strong></p>
<p><strong>Error messages</strong>:</p>
<ul>
<li><p><em>Message</em>: Authentication failed!</p>
<p><em>Likely cause</em>: Wrong admin ID, or wrong password.</p>
</li>
<li><p><em>Message</em>: Partition ID must be between 1 and 10000, inclusive!</p>
<p><em>Likely cause</em>: Partition ID is out of range.</p>
</li>
<li><p><em>Message</em>: Partition ID does not exist!</p>
<p><em>Likely cause</em>: Partition with the given ID does not exist.</p>
</li>
<li><p><em>Message</em>: Certificate with the specific key ID does not exist!</p>
<p><em>Likely cause</em>: Key with the given ID does not exist, or key does not have an associated certificate.</p>
</li>
</ul>
<p><strong>Usage example</strong>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>clikk<span class="w"> </span>cert<span class="w"> </span>info<span class="w"> </span>--partition-id<span class="o">=</span><span class="m">1</span><span class="w"> </span>--key-id<span class="o">=</span>ECDSAKey01

<span class="go">Enter admin ID: Admin1</span>
<span class="go">Enter password:</span>

<span class="go">Partition ID: 1</span>
<span class="go">Key ID: ECDSAKey01</span>
<span class="go">Key version: 0</span>
<span class="go">Issue date: 2023-03-28 13:48:54 WIB</span>
<span class="go">Expiry date: 2024-03-27 13:48:54 WIB</span>
<span class="go">Subject: C=ID, ST=DKI Jakarta, L=Jakarta Pusat, O=PT. Klavis Kripta Inovasi, OU=Finance, CN=Klavis Kripta/emailAddress=mail@Klavis Kripta.com</span>
<span class="go">Certificate: -----BEGIN CERTIFICATE-----</span>
<span class="go">MIICszCCAlmgAwIBAgIBADAKBggqhkjOPQQDAjCBrjELMAkGA1UEBhMCSUQxFDAS</span>
<span class="go">BgNVBAgMC0RLSSBKYWthcnRhMRYwFAYDVQQHDA1KYWthcnRhIFB1c2F0MSYwJAYD</span>
<span class="go">VQQKDB1QVC4gU2FuZGhpZ3VuYSBXaWR5YSBQcm90ZWtzaTEQMA4GA1UECwwHRmlu</span>
<span class="go">YW5jZTETMBEGA1UEAwwKc2FuZGhpZ3VuYTEiMCAGCSqGSIb3DQEJARYTbWFpbEBz</span>
<span class="go">YW5kaGlndW5hLmNvbTAeFw0yMzAzMjgwNjQ4NTRaFw0yNDAzMjcwNjQ4NTRaMIGu</span>
<span class="go">MQswCQYDVQQGEwJJRDEUMBIGA1UECAwLREtJIEpha2FydGExFjAUBgNVBAcMDUph</span>
<span class="go">a2FydGEgUHVzYXQxJjAkBgNVBAoMHVBULiBTYW5kaGlndW5hIFdpZHlhIFByb3Rl</span>
<span class="go">a3NpMRAwDgYDVQQLDAdGaW5hbmNlMRMwEQYDVQQDDApzYW5kaGlndW5hMSIwIAYJ</span>
<span class="go">KoZIhvcNAQkBFhNtYWlsQHNhbmRoaWd1bmEuY29tMFkwEwYHKoZIzj0CAQYIKoZI</span>
<span class="go">zj0DAQcDQgAEyG/SBff1WOd3ieT5x+dK1mQ98Kj+APKAfffiwyjYqi67MebvY/KH</span>
<span class="go">ZndAz1vrQ0wShYzFntdX5snn/V/N+X1fraNmMGQwEgYDVR0TAQH/BAgwBgEB/wIB</span>
<span class="go">ATAOBgNVHQ8BAf8EBAMCAQYwHQYDVR0OBBYEFMFyoHsA02b47ef7VPefmCBb0Mcv</span>
<span class="go">MB8GA1UdIwQYMBaAFMFyoHsA02b47ef7VPefmCBb0McvMAoGCCqGSM49BAMCA0gA</span>
<span class="go">MEUCIASqesgM9eVHbIeAPSjRUvCaRLT3Px3yhX3v5jgdWFZhAiEAivpFby5Mw6Zq</span>
<span class="go">FyR3cpULcGPNZbBtad8GwvxelTZxbLY=</span>
<span class="go">-----END CERTIFICATE-----</span>
</pre></div>
</div>
</section>
<section id="clikk-cert-renew">
<h3><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">cert</span> <span class="pre">renew</span></code><a class="headerlink" href="#clikk-cert-renew" title="Link to this heading"></a></h3>
<p>Renew a self-signed certificate.</p>
<p>Renewing a certificate updates its validity period. The self-signed certificate must be stored in the system.</p>
<p><strong>Flags</strong>:</p>
<dl class="option-list">
<dt><kbd><span class="option">--partition-id=<var>&lt;partition ID&gt;</var></span></kbd></dt>
<dd><p>The identifier of the partition.</p>
</dd>
<dt><kbd><span class="option">--key-id=<var>&lt;key ID&gt;</var></span></kbd></dt>
<dd><p>The identifier of the key associated with the certificate.</p>
</dd>
<dt><kbd><span class="option">--validity-period=<var>&lt;validity period&gt;</var></span></kbd></dt>
<dd><p>The validity period of the renewed certificate, in days. Must be a number between 30 and 1 825, inclusive.</p>
</dd>
<dt><kbd><span class="option">--output-file-path=<var>&lt;path to output file&gt;</var></span></kbd></dt>
<dd><p>The absolute path where the output file will be written to.</p>
</dd>
</dl>
<p><strong>Privilege level</strong>: <strong>HIGH</strong></p>
<p><strong>Error messages</strong>:</p>
<ul>
<li><p><em>Message</em>: Authentication failed!</p>
<p><em>Likely cause</em>: Wrong admin ID, wrong password, or invalid administrator card.</p>
</li>
<li><p><em>Message</em>: Partition ID must be between 1 and 10000, inclusive!</p>
<p><em>Likely cause</em>: Partition ID is out of range.</p>
</li>
<li><p><em>Message</em>: Partition ID does not exist!</p>
<p><em>Likely cause</em>: Partition with the given ID does not exist.</p>
</li>
<li><p><em>Message</em>: Output filename already exists!</p>
<p><em>Likely cause</em>: Output path is not empty.</p>
</li>
<li><p><em>Message</em>: Failed to create output file!</p>
<p><em>Likely cause</em>: Unable to write to the given output path.</p>
</li>
<li><p><em>Message</em>: Key ID does not exist!</p>
<p><em>Likely cause</em>: Key with the given ID does not exist in the given partition.</p>
</li>
<li><p><em>Message</em>: Invalid key algorithm!</p>
<p><em>Likely cause</em>: Key with the given ID does not have an appropriate key purpose.</p>
</li>
<li><p><em>Message</em>: Certificate with the specific key ID does not exist!</p>
<p><em>Likely cause</em>: Key with the given ID does not exist, or key does not have an associated certificate.</p>
</li>
<li><p><em>Message</em>: Imported certificate cannot be renewed!</p>
<p><em>Likely cause</em>: Attempted to renew an imported certificate.</p>
</li>
<li><p><em>Message</em>: Certificate validity period must be between 30 and 1825 days, inclusive!</p>
<p><em>Likely cause</em>: Certificate validity period is out of range.</p>
</li>
</ul>
<p><strong>Usage example</strong>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>clikk<span class="w"> </span>cert<span class="w"> </span>renew<span class="w"> </span>--partition-id<span class="o">=</span><span class="m">1</span><span class="w"> </span>--key-id<span class="o">=</span>ECDSAKey01<span class="w"> </span>--validity-period<span class="o">=</span><span class="m">500</span><span class="w"> </span>--output-file-path<span class="o">=</span>/home/user/Documents/FinanceCert01.pem

<span class="go">This will renew an existing certificate.</span>
<span class="go">Are you sure you want to continue? Type `2hW` to continue, or press Enter to cancel.</span>
<span class="go">&gt; 2hW</span>

<span class="go">Enter admin ID: Admin1</span>
<span class="go">Enter password:</span>
<span class="go">Insert the administrator card of Admin1 for two-factor authentication.</span>

<span class="go">Self-signed certificate has been renewed successfully.</span>
</pre></div>
</div>
</section>
<section id="clikk-cert-export">
<h3><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">cert</span> <span class="pre">export</span></code><a class="headerlink" href="#clikk-cert-export" title="Link to this heading"></a></h3>
<p>Export a certificate.</p>
<p>The exported certificate will be in PEM format.</p>
<p><strong>Flags</strong>:</p>
<dl class="option-list">
<dt><kbd><span class="option">--partition-id=<var>&lt;partition ID&gt;</var></span></kbd></dt>
<dd><p>The identifier of the partition.</p>
</dd>
<dt><kbd><span class="option">--key-id=<var>&lt;key ID&gt;</var></span></kbd></dt>
<dd><p>The identifier of the key associated with the certificate.</p>
</dd>
<dt><kbd><span class="option">--output-cert-path=<var>&lt;path to output file&gt;</var></span></kbd></dt>
<dd><p>The absolute path where the certificate file will be written to.</p>
</dd>
</dl>
<p><strong>Privilege level</strong>: <strong>NORMAL</strong></p>
<p><strong>Error messages</strong>:</p>
<ul>
<li><p><em>Message</em>: Authentication failed!</p>
<p><em>Likely cause</em>: Wrong admin ID, or wrong password.</p>
</li>
<li><p><em>Message</em>: Partition ID must be between 1 and 10000, inclusive!</p>
<p><em>Likely cause</em>: Partition ID is out of range.</p>
</li>
<li><p><em>Message</em>: Partition ID does not exist!</p>
<p><em>Likely cause</em>: Partition with the given ID does not exist.</p>
</li>
<li><p><em>Message</em>: Output filename already exists!</p>
<p><em>Likely cause</em>: Output path is not empty.</p>
</li>
<li><p><em>Message</em>: Failed to create output file!</p>
<p><em>Likely cause</em>: Unable to write to the given output path.</p>
</li>
<li><p><em>Message</em>: Key ID does not exist!</p>
<p><em>Likely cause</em>: Key with the given ID does not exist in the given partition.</p>
</li>
<li><p><em>Message</em>: Certificate with the specific key ID does not exist!</p>
<p><em>Likely cause</em>: Key with the given ID does not exist, or key does not have an associated certificate.</p>
</li>
</ul>
<p><strong>Usage example</strong>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>clikk<span class="w"> </span>cert<span class="w"> </span><span class="nb">export</span><span class="w"> </span>--partition-id<span class="o">=</span><span class="m">1</span><span class="w"> </span>--key-id<span class="o">=</span>ECDSAKey01<span class="w"> </span>--output-cert-path<span class="o">=</span>/home/user/Documents/FinanceCert01.pem

<span class="go">Enter admin ID: Admin1</span>
<span class="go">Enter password:</span>

<span class="go">Certificate has been exported successfully to /home/user/Documents/FinanceCert01.pem.</span>
</pre></div>
</div>
</section>
<section id="clikk-cert-import">
<h3><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">cert</span> <span class="pre">import</span></code><a class="headerlink" href="#clikk-cert-import" title="Link to this heading"></a></h3>
<p>Import a certificate.</p>
<p>The imported certificate may be associated with an existing key ID only if the certificate’s key pair
is already stored under that key ID. Otherwise, given permission, Kripta Key will create a new key ID
for the certificate’s public key.</p>
<p><strong>Flags</strong>:</p>
<dl class="option-list">
<dt><kbd><span class="option">--partition-id=<var>&lt;partition ID&gt;</var></span></kbd></dt>
<dd><p>The identifier of the partition.</p>
</dd>
<dt><kbd><span class="option">--key-id=<var>&lt;key ID&gt;</var></span></kbd></dt>
<dd><p>The identifier of the key associated, or to be associated with the certificate.</p>
</dd>
<dt><kbd><span class="option">--cert-file-path=<var>&lt;path to certificate file&gt;</var></span></kbd></dt>
<dd><p>The absolute path to the certificate file.</p>
</dd>
</dl>
<p><strong>Privilege level</strong>: <strong>HIGH</strong></p>
<p><strong>Error messages</strong>:</p>
<ul>
<li><p><em>Message</em>: Authentication failed!</p>
<p><em>Likely cause</em>: Wrong admin ID, wrong password, or invalid administrator card.</p>
</li>
<li><p><em>Message</em>: Partition ID must be between 1 and 10000, inclusive!</p>
<p><em>Likely cause</em>: Partition ID is out of range.</p>
</li>
<li><p><em>Message</em>: Partition ID does not exist!</p>
<p><em>Likely cause</em>: Partition with the given ID does not exist.</p>
</li>
<li><p><em>Message</em>: Certificate file does not exist!</p>
<p><em>Likely cause</em>: Wrong path to certificate file.</p>
</li>
<li><p><em>Message</em>: Invalid key algorithm!</p>
<p><em>Likely cause</em>: Key with the given ID does not have an appropriate key purpose.</p>
</li>
<li><p><em>Message</em>: Key ID is not intended for certificate signing!</p>
<p><em>Likely cause</em>: Key with the given ID does not have certificate signing as its key purpose.</p>
</li>
<li><p><em>Message</em>: The stored public key and certificate public key do not match!</p>
<p><em>Likely cause</em>: Public key with the given ID is different to the imported certificate’s public key.</p>
</li>
<li><p><em>Message</em>: Certificate with the same DN already exists!</p>
<p><em>Likely cause</em>: Certificate with the same Subject or Distinguished Name already exists.</p>
</li>
</ul>
<p><strong>Usage example</strong>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>clikk<span class="w"> </span>cert<span class="w"> </span>import<span class="w"> </span>--partition-id<span class="o">=</span><span class="m">1</span><span class="w"> </span>--key-id<span class="o">=</span>PostmanKey<span class="w"> </span>--cert-file-path<span class="o">=</span>/home/user/Documents/appcert.pem

<span class="go">Enter admin ID: Admin1</span>
<span class="go">Enter password:</span>
<span class="go">Insert the administrator card of Admin1 for two-factor authentication.</span>

<span class="go">There is no private key with the given key ID.</span>
<span class="go">As such, only the public key and the certificate will be stored in the system for encryption purposes.</span>
<span class="go">Are you sure you want to continue? Type `UFRfN` to continue, or press Enter to cancel.</span>
<span class="go">&gt; UFRfN</span>

<span class="go">Certificate has been imported successfully.</span>
</pre></div>
</div>
</section>
<section id="clikk-cert-revoke">
<h3><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">cert</span> <span class="pre">revoke</span></code><a class="headerlink" href="#clikk-cert-revoke" title="Link to this heading"></a></h3>
<p>Revoke a certificate.</p>
<p>Certificate revocation is <strong>irreversible</strong>. The key associated with the certificate will be revoked as well.</p>
<p>Revoked certificates can only be used to verify other certificates signed by them.</p>
<p><strong>Flags</strong>:</p>
<dl class="option-list">
<dt><kbd><span class="option">--partition-id=<var>&lt;partition ID&gt;</var></span></kbd></dt>
<dd><p>The identifier of the partition.</p>
</dd>
<dt><kbd><span class="option">--key-id=<var>&lt;key ID&gt;</var></span></kbd></dt>
<dd><p>The identifier of the key associated with the certificate.</p>
</dd>
</dl>
<p><strong>Privilege level</strong>: <strong>CRITICAL</strong></p>
<p><strong>Error messages</strong>:</p>
<ul>
<li><p><em>Message</em>: Authentication failed!</p>
<p><em>Likely cause</em>: Wrong admin ID, wrong password, or invalid administrator card.</p>
</li>
<li><p><em>Message</em>: Partition ID must be between 1 and 10000, inclusive!</p>
<p><em>Likely cause</em>: Partition ID is out of range.</p>
</li>
<li><p><em>Message</em>: Partition ID does not exist!</p>
<p><em>Likely cause</em>: Partition with the given ID does not exist.</p>
</li>
<li><p><em>Message</em>: Key ID does not exist!</p>
<p><em>Likely cause</em>: Key with the given ID does not exist in the given partition.</p>
</li>
<li><p><em>Message</em>: Certificate with the specific key ID does not exist!</p>
<p><em>Likely cause</em>: Key with the given ID does not exist, or key does not have an associated certificate.</p>
</li>
<li><p><em>Message</em>: The certificate has been revoked!</p>
<p><em>Likely cause</em>: Certificate associated with key with the given ID has already been revoked.</p>
</li>
</ul>
<p><strong>Usage example</strong>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>clikk<span class="w"> </span>cert<span class="w"> </span>revoke<span class="w"> </span>--partition-id<span class="o">=</span><span class="m">1</span><span class="w"> </span>--key-id<span class="o">=</span>Finance02

<span class="go">Read the following points before proceeding with certificate revocation:</span>
<span class="go">- Certificate revocation is IRREVERSIBLE.</span>
<span class="go">- All certificates signed by this certificate will be invalidated.</span>

<span class="go">Are you sure you want to continue? Type `QYQ!G` to continue, or press Enter to cancel.</span>
<span class="go">&gt; QYQ!G</span>

<span class="go">Enter admin ID: Admin1</span>
<span class="go">Enter password:</span>
<span class="go">Insert the administrator card of Admin1 for two-factor authentication.</span>

<span class="go">Dual control authentication -- credential of a second user is required.</span>
<span class="go">Admin1 is currently logged in.</span>

<span class="go">Enter admin ID: Admin2</span>
<span class="go">Enter password:</span>
<span class="go">Insert the administrator card of Admin2 for two-factor authentication.</span>

<span class="go">Certificate has been revoked successfully.</span>
</pre></div>
</div>
</section>
<section id="clikk-cert-delete">
<h3><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">cert</span> <span class="pre">delete</span></code><a class="headerlink" href="#clikk-cert-delete" title="Link to this heading"></a></h3>
<p>Delete a certificate permanently.</p>
<p>Certificate deletion is <strong>irreversible</strong>, and will invalidate certificates signed by it, rendering them unverifiable.</p>
<p>To avoid accidental deletion, only revoked certificate may be deleted.</p>
<p><strong>Flags</strong>:</p>
<dl class="option-list">
<dt><kbd><span class="option">--partition-id=<var>&lt;partition ID&gt;</var></span></kbd></dt>
<dd><p>The identifier of the partition.</p>
</dd>
<dt><kbd><span class="option">--key-id=<var>&lt;key ID&gt;</var></span></kbd></dt>
<dd><p>The identifier of the key associated with the certificate.</p>
</dd>
</dl>
<p><strong>Privilege level</strong>: <strong>CRITICAL</strong></p>
<p><strong>Error messages</strong>:</p>
<ul>
<li><p><em>Message</em>: Authentication failed!</p>
<p><em>Likely cause</em>: Wrong admin ID, wrong password, or invalid administrator card.</p>
</li>
<li><p><em>Message</em>: Partition ID must be between 1 and 10000, inclusive!</p>
<p><em>Likely cause</em>: Partition ID is out of range.</p>
</li>
<li><p><em>Message</em>: Partition ID does not exist!</p>
<p><em>Likely cause</em>: Partition with the given ID does not exist.</p>
</li>
<li><p><em>Message</em>: Key ID does not exist!</p>
<p><em>Likely cause</em>: Key with the given ID does not exist in the given partition.</p>
</li>
<li><p><em>Message</em>: Certificate with the specific key ID does not exist!</p>
<p><em>Likely cause</em>: Key with the given ID does not exist, or key does not have an associated certificate.</p>
</li>
<li><p><em>Message</em>: Unable to delete certificate that is not revoked!</p>
<p><em>Likely cause</em>: Certificate associated with key with the given ID has not been revoked.</p>
</li>
</ul>
<p><strong>Usage example</strong>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>clikk<span class="w"> </span>cert<span class="w"> </span>delete<span class="w"> </span>--partition-id<span class="o">=</span><span class="m">1</span><span class="w"> </span>--key-id<span class="o">=</span>Finance02

<span class="go">Read the following points before proceeding with certificate deletion:</span>
<span class="go">- Certificate destruction is IRREVERSIBLE.</span>
<span class="go">- All certificates signed by this certificate will be invalidated and unverifiable.</span>

<span class="go">Are you sure you want to continue? Type `$X1FK` to continue, or press Enter to cancel.</span>
<span class="go">&gt; $X1FK</span>

<span class="go">Enter admin ID: Admin1</span>
<span class="go">Enter password:</span>
<span class="go">Insert the administrator card of Admin1 for two-factor authentication.</span>

<span class="go">Dual control authentication -- credential of second user is required.</span>
<span class="go">Admin1 is currently logged in.</span>

<span class="go">Enter admin ID: Admin2</span>
<span class="go">Enter password:</span>
<span class="go">Insert the administrator card of Admin2 for two-factor authentication.</span>

<span class="go">Certificate has been deleted successfully.</span>
</pre></div>
</div>
</section>
</section>
<section id="secret">
<h2>Secret<a class="headerlink" href="#secret" title="Link to this heading"></a></h2>
<p>Kripta Key is also capable of managing and generating secrets. Here, secrets are defined as short snippets of data
that is typable (i.e., not binary data) and is considered confidential, to some extent. Examples of a secret include
login credentials or a database password.</p>
<p>Just like other objects in Kripta Key, each secret is associated with a partition.</p>
<section id="clikk-secret-add">
<h3><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">secret</span> <span class="pre">add</span></code><a class="headerlink" href="#clikk-secret-add" title="Link to this heading"></a></h3>
<p>Add a secret.</p>
<p><strong>Flags</strong>:</p>
<dl class="option-list">
<dt><kbd><span class="option">--partition-id=<var>&lt;partition ID&gt;</var></span></kbd></dt>
<dd><p>The identifier of the partition.</p>
</dd>
<dt><kbd><span class="option">--secret-id=<var>&lt;secret ID&gt;</var></span></kbd></dt>
<dd><p>The identifier of the secret. Must be alphanumeric and not more than 20 characters in length.</p>
</dd>
<dt><kbd><span class="option">--secret-label=<var>&lt;secret label&gt;</var></span></kbd></dt>
<dd><p>The descriptive label of the secret. Must be alphanumeric and not more than 20 characters in length. Optional.</p>
</dd>
<dt><kbd><span class="option">--secret-data=<var>&lt;secret data&gt;</var></span></kbd></dt>
<dd><p>The contents of the secret. Must be not more than 256 characters in length. Be aware of the terminal’s
special characters.</p>
</dd>
</dl>
<p><strong>Privilege level</strong>: <strong>HIGH</strong></p>
<p><strong>Error messages</strong>:</p>
<ul>
<li><p><em>Message</em>: Authentication failed!</p>
<p><em>Likely cause</em>: Wrong admin ID, wrong password, or invalid administrator card.</p>
</li>
<li><p><em>Message</em>: Partition ID must be between 1 and 10000, inclusive!</p>
<p><em>Likely cause</em>: Partition ID is out of range.</p>
</li>
<li><p><em>Message</em>: Partition ID does not exist!</p>
<p><em>Likely cause</em>: Partition with the given ID does not exist.</p>
</li>
<li><p><em>Message</em>: Secret ID already exists!</p>
<p><em>Likely cause</em>: Secret with the given ID already exists.</p>
</li>
<li><p><em>Message</em>: Secret data cannot be more than 256 bytes!</p>
<p><em>Likely cause</em>: Secret data is too long.</p>
</li>
</ul>
<p><strong>Usage example</strong>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>clikk<span class="w"> </span>secret<span class="w"> </span>add<span class="w"> </span>--partition-id<span class="o">=</span><span class="m">1</span><span class="w"> </span>--secret-id<span class="o">=</span>PasswordDBFinance<span class="w"> </span>--secret-label<span class="o">=</span>Finance<span class="w"> </span>--secret-data<span class="o">=</span><span class="s1">&#39;hdkfuig4535ushh%&#39;</span>

<span class="go">Enter admin ID: Admin1</span>
<span class="go">Enter password:</span>
<span class="go">Insert the administrator card of Admin1 for two-factor authentication.</span>

<span class="go">Secret has been added successfully.</span>
</pre></div>
</div>
</section>
<section id="clikk-secret-generate">
<h3><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">secret</span> <span class="pre">generate</span></code><a class="headerlink" href="#clikk-secret-generate" title="Link to this heading"></a></h3>
<p>Generate a secret.</p>
<p>The secret will be generated securely and randomly.</p>
<p><strong>Flags</strong>:</p>
<dl class="option-list">
<dt><kbd><span class="option">--partition-id=<var>&lt;partition ID&gt;</var></span></kbd></dt>
<dd><p>The identifier of the partition.</p>
</dd>
<dt><kbd><span class="option">--secret-id=<var>&lt;secret ID&gt;</var></span></kbd></dt>
<dd><p>The identifier of the secret. Must be alphanumeric and not more than 20 characters in length.</p>
</dd>
<dt><kbd><span class="option">--secret-label=<var>&lt;secret label&gt;</var></span></kbd></dt>
<dd><p>The descriptive label of the secret. Must be alphanumeric and not more than 20 characters in length.</p>
</dd>
<dt><kbd><span class="option">--secret-length=<var>&lt;secret length&gt;</var></span></kbd></dt>
<dd><p>The length of the secret. Must be a number between 5 and 256, inclusive.</p>
</dd>
<dt><kbd><span class="option">--secret-charset=<var>&lt;secret charset index&gt;</var></span></kbd></dt>
<dd><p>The character set index of the secret. Refer to the following list for the character set index:</p>
<ul class="simple">
<li><p>Alphabetic upper case [1]</p></li>
<li><p>Alphabetic lower case [2]</p></li>
<li><p>Alphabetic mixed case [3]</p></li>
<li><p>Alphanumeric mixed case [4]</p></li>
<li><p>Alphanumeric mixed case with special characters [5]</p></li>
</ul>
</dd>
</dl>
<p><strong>Privilege level</strong>: <strong>HIGH</strong></p>
<p><strong>Error messages</strong>:</p>
<ul>
<li><p><em>Message</em>: Authentication failed!</p>
<p><em>Likely cause</em>: Wrong admin ID, wrong password, or invalid administrator card.</p>
</li>
<li><p><em>Message</em>: Partition ID must be between 1 and 10000, inclusive!</p>
<p><em>Likely cause</em>: Partition ID is out of range.</p>
</li>
<li><p><em>Message</em>: Partition ID does not exist!</p>
<p><em>Likely cause</em>: Partition with the given ID does not exist.</p>
</li>
<li><p><em>Message</em>: Secret ID already exists!</p>
<p><em>Likely cause</em>: Secret with the given ID already exists.</p>
</li>
<li><p><em>Message</em>: Secret length must be between 5 and 256 characters, inclusive!</p>
<p><em>Likely cause</em>: Secret length is out of bounds.</p>
</li>
<li><p><em>Message</em>: Unrecognized charset!</p>
<p><em>Likely cause</em>: Secret character set index is out of bounds.</p>
</li>
</ul>
<p><strong>Usage example</strong>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>clikk<span class="w"> </span>secret<span class="w"> </span>generate<span class="w"> </span>--partition-id<span class="o">=</span><span class="m">1</span><span class="w"> </span>--secret-id<span class="o">=</span>PasswordDBSupport<span class="w"> </span>--secret-label<span class="o">=</span>onlyweknow<span class="w"> </span>--secret-length<span class="o">=</span><span class="m">20</span><span class="w"> </span>--secret-charset<span class="o">=</span><span class="m">5</span>

<span class="go">Enter admin ID: Admin1</span>
<span class="go">Enter password:</span>
<span class="go">Insert the administrator card of Admin1 for two-factor authentication.</span>

<span class="go">Secret has been generated successfully.</span>
</pre></div>
</div>
</section>
<section id="clikk-secret-list">
<h3><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">secret</span> <span class="pre">list</span></code><a class="headerlink" href="#clikk-secret-list" title="Link to this heading"></a></h3>
<p>List all available secrets in a given partition.</p>
<p><strong>Flags</strong>:</p>
<dl class="option-list">
<dt><kbd><span class="option">--partition-id=<var>&lt;partition ID&gt;</var></span></kbd></dt>
<dd><p>The identifier of the partition.</p>
</dd>
</dl>
<p><strong>Privilege level</strong>: <strong>NORMAL</strong></p>
<p><strong>Error messages</strong>:</p>
<ul>
<li><p><em>Message</em>: Authentication failed!</p>
<p><em>Likely cause</em>: Wrong admin ID, or wrong password.</p>
</li>
<li><p><em>Message</em>: Partition ID must be between 1 and 10000, inclusive!</p>
<p><em>Likely cause</em>: Partition ID is out of range.</p>
</li>
<li><p><em>Message</em>: Partition ID does not exist!</p>
<p><em>Likely cause</em>: Partition with the given ID does not exist.</p>
</li>
</ul>
<p><strong>Usage example</strong>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>clikk<span class="w"> </span>secret<span class="w"> </span>list<span class="w"> </span>--partition-id<span class="o">=</span><span class="m">1</span>

<span class="go">Enter admin ID: Admin1</span>
<span class="go">Enter password:</span>

<span class="go">Secret ID(s):</span>
<span class="go">PasswordDBFinance</span>
<span class="go">PasswordDBSupport</span>
</pre></div>
</div>
</section>
<section id="clikk-secret-info">
<h3><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">secret</span> <span class="pre">info</span></code><a class="headerlink" href="#clikk-secret-info" title="Link to this heading"></a></h3>
<p>Retrieve information about a secret.</p>
<p><strong>Flags</strong>:</p>
<dl class="option-list">
<dt><kbd><span class="option">--partition-id=<var>&lt;partition ID&gt;</var></span></kbd></dt>
<dd><p>The identifier of the partition.</p>
</dd>
<dt><kbd><span class="option">--secret-id=<var>&lt;secret ID&gt;</var></span></kbd></dt>
<dd><p>The identifier of the secret.</p>
</dd>
</dl>
<p><strong>Privilege level</strong>: <strong>NORMAL</strong></p>
<p><strong>Error messages</strong>:</p>
<ul>
<li><p><em>Message</em>: Authentication failed!</p>
<p><em>Likely cause</em>: Wrong admin ID, wrong password, or invalid administrator card.</p>
</li>
<li><p><em>Message</em>: Partition ID must be between 1 and 10000, inclusive!</p>
<p><em>Likely cause</em>: Partition ID is out of range.</p>
</li>
<li><p><em>Message</em>: Partition ID does not exist!</p>
<p><em>Likely cause</em>: Partition with the given ID does not exist.</p>
</li>
<li><p><em>Message</em>: Secret ID does not exist!</p>
<p><em>Likely cause</em>: Secret with the given ID does not exist.</p>
</li>
</ul>
<p><strong>Usage example</strong>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>clikk<span class="w"> </span>secret<span class="w"> </span>info<span class="w"> </span>--partition-id<span class="o">=</span><span class="m">1</span><span class="w"> </span>--secret-id<span class="o">=</span>PasswordDBFinance

<span class="go">Enter admin ID: Admin1</span>
<span class="go">Enter password:</span>

<span class="go">Secret ID: PasswordDBFinance</span>
<span class="go">Secret label: Finance</span>
</pre></div>
</div>
</section>
<section id="clikk-secret-update">
<h3><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">secret</span> <span class="pre">update</span></code><a class="headerlink" href="#clikk-secret-update" title="Link to this heading"></a></h3>
<p>Update the contents of a secret.</p>
<p><strong>Flags</strong>:</p>
<dl class="option-list">
<dt><kbd><span class="option">--partition-id=<var>&lt;partition ID&gt;</var></span></kbd></dt>
<dd><p>The identifier of the partition.</p>
</dd>
<dt><kbd><span class="option">--secret-id=<var>&lt;secret ID&gt;</var></span></kbd></dt>
<dd><p>The identifier of the secret.</p>
</dd>
<dt><kbd><span class="option">--secret-data=<var>&lt;secret data&gt;</var></span></kbd></dt>
<dd><p>The contents of the secret. Must be not more than 256 characters in length. Be aware of the terminal’s
special characters.</p>
</dd>
</dl>
<p><strong>Privilege level</strong>: <strong>HIGH</strong></p>
<p><strong>Error messages</strong>:</p>
<ul>
<li><p><em>Message</em>: Authentication failed!</p>
<p><em>Likely cause</em>: Wrong admin ID, wrong password, or invalid administrator card.</p>
</li>
<li><p><em>Message</em>: Partition ID must be between 1 and 10000, inclusive!</p>
<p><em>Likely cause</em>: Partition ID is out of range.</p>
</li>
<li><p><em>Message</em>: Partition ID does not exist!</p>
<p><em>Likely cause</em>: Partition with the given ID does not exist.</p>
</li>
<li><p><em>Message</em>: Secret ID does not exist!</p>
<p><em>Likely cause</em>: Secret with the given ID does not exist.</p>
</li>
<li><p><em>Message</em>: Secret data cannot be more than 256 bytes!</p>
<p><em>Likely cause</em>: Secret data is too long.</p>
</li>
</ul>
<p><strong>Usage example</strong>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>clikk<span class="w"> </span>secret<span class="w"> </span>update<span class="w"> </span>--partition-id<span class="o">=</span><span class="m">1</span><span class="w"> </span>--secret-id<span class="o">=</span>PasswordDBFinance<span class="w"> </span>--secret-data<span class="o">=</span><span class="s1">&#39;hdkfuig4535ushh%&#39;</span>

<span class="go">Enter admin ID: Admin1</span>
<span class="go">Enter password:</span>
<span class="go">Insert the administrator card of Admin1 for two-factor authentication.</span>

<span class="go">Secret has been updated successfully.</span>
</pre></div>
</div>
</section>
<section id="clikk-secret-delete">
<h3><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">secret</span> <span class="pre">delete</span></code><a class="headerlink" href="#clikk-secret-delete" title="Link to this heading"></a></h3>
<p>Delete a secret permanently.</p>
<p>Secret deletion is <strong>irreversible</strong>.</p>
<p><strong>Flags</strong>:</p>
<dl class="option-list">
<dt><kbd><span class="option">--partition-id=<var>&lt;partition ID&gt;</var></span></kbd></dt>
<dd><p>The identifier of the partition.</p>
</dd>
<dt><kbd><span class="option">--secret-id=<var>&lt;secret ID&gt;</var></span></kbd></dt>
<dd><p>The identifier of the secret.</p>
</dd>
</dl>
<p><strong>Privilege level</strong>: <strong>HIGH</strong></p>
<p><strong>Error messages</strong>:</p>
<ul>
<li><p><em>Message</em>: Authentication failed!</p>
<p><em>Likely cause</em>: Wrong admin ID, wrong password, or invalid administrator card.</p>
</li>
<li><p><em>Message</em>: Partition ID must be between 1 and 10000, inclusive!</p>
<p><em>Likely cause</em>: Partition ID is out of range.</p>
</li>
<li><p><em>Message</em>: Partition ID does not exist!</p>
<p><em>Likely cause</em>: Partition with the given ID does not exist.</p>
</li>
<li><p><em>Message</em>: Secret ID does not exist!</p>
<p><em>Likely cause</em>: Secret with the given ID does not exist.</p>
</li>
</ul>
<p><strong>Usage example</strong>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>clikk<span class="w"> </span>secret<span class="w"> </span>delete<span class="w"> </span>--partition-id<span class="o">=</span><span class="m">1</span><span class="w"> </span>--secret-id<span class="o">=</span>PasswordDBSupport

<span class="go">This will delete the given secret. Ensure that no applications are using this secret.</span>
<span class="go">Are you sure you want to continue? Type `vUo` to continue, or press Enter to cancel.</span>
<span class="go">&gt; vUo</span>

<span class="go">Enter admin ID: Admin1</span>
<span class="go">Enter password:</span>
<span class="go">Insert the administrator card of Admin1 for two-factor authentication.</span>

<span class="go">Secret has been deleted successfully.</span>
</pre></div>
</div>
</section>
</section>
<section id="application">
<h2>Application<a class="headerlink" href="#application" title="Link to this heading"></a></h2>
<p>Kripta Key offers application management, acting as an access control mechanism over its cryptographic object
and services. It performs this by having a whitelist of applications allowed to access a KK-Cryptoservice instance,
and by requiring the application to present a valid certificate, which is created when the application is added
to Kripta Key.</p>
<p>Additionally, the application must know the password for the partition it intends to access, and that the partition
has been added to the KK-Cryptoservice instance it is accessing.</p>
<section id="clikk-app-add">
<h3><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">app</span> <span class="pre">add</span></code><a class="headerlink" href="#clikk-app-add" title="Link to this heading"></a></h3>
<p>Add an application.</p>
<p>This command requires the application’s CSR, which will be signed by Kripta Key.</p>
<p><strong>Flags</strong>:</p>
<dl class="option-list">
<dt><kbd><span class="option">--app-id=<var>&lt;application ID&gt;</var></span></kbd></dt>
<dd><p>The identifier of the application. Must be alphanumeric and not more than 20 characters in length.</p>
</dd>
<dt><kbd><span class="option">--validity-period=<var>&lt;validity period&gt;</var></span></kbd></dt>
<dd><p>The validity period of the application’s certificate, in days. Must be a number between 30 and 1 825, inclusive.</p>
</dd>
<dt><kbd><span class="option">--csr-file-path=<var>&lt;path to CSR file&gt;</var></span></kbd></dt>
<dd><p>The absolute path to the application’s CSR file.</p>
</dd>
<dt><kbd><span class="option">--output-cert-path=<var>&lt;path to output file&gt;</var></span></kbd></dt>
<dd><p>The absolute path where the application’s certificate file will be written to.</p>
</dd>
</dl>
<p><strong>Privilege level</strong>: <strong>HIGH</strong></p>
<p><strong>Error messages</strong>:</p>
<ul>
<li><p><em>Message</em>: Authentication failed!</p>
<p><em>Likely cause</em>: Wrong admin ID, wrong password, or invalid administrator card.</p>
</li>
<li><p><em>Message</em>: Application ID already exists!</p>
<p><em>Likely cause</em>: Application with the given ID already exists.</p>
</li>
<li><p><em>Message</em>: Validity period must be between 30 and 1825 in days!</p>
<p><em>Likely cause</em>: Certificate validity period is out of range.</p>
</li>
<li><p><em>Message</em>: Output filename already exists!</p>
<p><em>Likely cause</em>: Output path is not empty.</p>
</li>
<li><p><em>Message</em>: Failed to create output certificate file!</p>
<p><em>Likely cause</em>: Unable to write to the given output path.</p>
</li>
<li><p><em>Message</em>: Failed to open CSR path!</p>
<p><em>Likely cause</em>: Wrong path to CSR file.</p>
</li>
<li><p><em>Message</em>: Invalid CSR content!</p>
<p><em>Likely cause</em>: Invalid, or corrupted CSR file.</p>
</li>
<li><p><em>Message</em>: The public key has been used by another application!</p>
<p><em>Likely cause</em>: Another application has the same key pair.</p>
</li>
</ul>
<p><strong>Usage example</strong>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>clikk<span class="w"> </span>app<span class="w"> </span>add<span class="w"> </span>--csr-file-path<span class="o">=</span>appcsr.pem<span class="w"> </span>--app-id<span class="o">=</span>postman<span class="w"> </span>--validity-period<span class="o">=</span><span class="m">365</span><span class="w"> </span>--output-cert-path<span class="o">=</span>/home/user/Documents/bot-kms-2/postman_CER.pem

<span class="go">Enter admin ID: Admin1</span>
<span class="go">Enter password:</span>
<span class="go">Insert the administrator card of Admin1 for two-factor authentication.</span>

<span class="go">App ID: postman</span>
<span class="go">Subject: C=ID, ST=DKI, L=Jakarta, O=PT. Klavis Kripta Inovasi, OU= Support, CN=mail@klaviskripta.com</span>
<span class="go">Registration date: 2023-01-11 09:40:35 WIB</span>
<span class="go">Expiry date: 2024-01-10 09:40:35 WIB</span>

<span class="go">Application has been added successfully.</span>
<span class="go">Certificate has been written successfully to /home/user/Documents/bot-kms-2/postman_CER.pem.</span>
</pre></div>
</div>
</section>
<section id="clikk-app-list">
<h3><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">app</span> <span class="pre">list</span></code><a class="headerlink" href="#clikk-app-list" title="Link to this heading"></a></h3>
<p>List all available applications.</p>
<p><strong>Flags</strong>: None.</p>
<p><strong>Privilege level</strong>: <strong>NORMAL</strong></p>
<p><strong>Error messages</strong>:</p>
<ul>
<li><p><em>Message</em>: Authentication failed!</p>
<p><em>Likely cause</em>: Wrong admin ID, or wrong password.</p>
</li>
</ul>
<p><strong>Usage example</strong>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>clikk<span class="w"> </span>app<span class="w"> </span>list

<span class="go">Enter admin ID: Admin1</span>
<span class="go">Enter password:</span>

<span class="go">Application ID(s):</span>
<span class="go">jmeter</span>
<span class="go">postman</span>
</pre></div>
</div>
</section>
<section id="clikk-app-info">
<h3><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">app</span> <span class="pre">info</span></code><a class="headerlink" href="#clikk-app-info" title="Link to this heading"></a></h3>
<p>Retrieve information about an application.</p>
<p>The information includes the application’s subject (Distinguished Name), Base64 encoded public key hash,
registration date, certificate expiry date, and the list of partitions the application can access.</p>
<p>If desired, the application’s certificate can be exported to a file.</p>
<p><strong>Flags</strong>:</p>
<dl class="option-list">
<dt><kbd><span class="option">--app-id=<var>&lt;application ID&gt;</var></span></kbd></dt>
<dd><p>The identifier of the application.</p>
</dd>
<dt><kbd><span class="option">--verbose</span></kbd></dt>
<dd><p>If present, show the application’s certificate as well, in PEM format.</p>
</dd>
<dt><kbd><span class="option">--output-cert-path=<var>&lt;path to output file&gt;</var></span></kbd></dt>
<dd><p>The absolute path where the application’s certificate file will be written to. Optional.</p>
</dd>
</dl>
<p><strong>Privilege level</strong>: <strong>NORMAL</strong></p>
<p><strong>Error messages</strong>:</p>
<ul>
<li><p><em>Message</em>: Authentication failed!</p>
<p><em>Likely cause</em>: Wrong admin ID, or wrong password.</p>
</li>
<li><p><em>Message</em>: Application ID does not exist!</p>
<p><em>Likely cause</em>: Application with the given ID does not exist.</p>
</li>
<li><p><em>Message</em>: Output certificate path exists!</p>
<p><em>Likely cause</em>: Output path is not empty.</p>
</li>
<li><p><em>Message</em>: Cannot create output certificate file!</p>
<p><em>Likely cause</em>: Unable to write to the given output path.</p>
</li>
</ul>
<p><strong>Usage example</strong>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>clikk<span class="w"> </span>app<span class="w"> </span>info<span class="w"> </span>--app-id<span class="o">=</span>postman

<span class="go">Enter admin ID: Admin1</span>
<span class="go">Enter password:</span>

<span class="go">App ID: postman</span>
<span class="go">Subject: C=ID, ST=DKI Jakarta, L=Jakarta Selatan, O=PT. CompanyA, OU=Support, CN=companya.com</span>
<span class="go">Encoded public key hash: GBTh8LdL3Vt6pVsnULMjekYfAp0=</span>
<span class="go">Registration date: 2023-08-07 10:17:33 WIB</span>
<span class="go">Expiry date: 2024-08-06 10:17:33 WIB</span>
<span class="go">Partition ID(s):</span>
<span class="go">- 1</span>
</pre></div>
</div>
</section>
<section id="clikk-app-renew">
<h3><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">app</span> <span class="pre">renew</span></code><a class="headerlink" href="#clikk-app-renew" title="Link to this heading"></a></h3>
<p>Renew an application’s certificate.</p>
<p>This requires a separate CSR for each renewal. The application to be renewed must already be present in Kripta Key.</p>
<p><strong>Flags</strong>:</p>
<dl class="option-list">
<dt><kbd><span class="option">--app-id=<var>&lt;application ID&gt;</var></span></kbd></dt>
<dd><p>The identifier of the application.</p>
</dd>
<dt><kbd><span class="option">--csr-file-path=<var>&lt;path to CSR file&gt;</var></span></kbd></dt>
<dd><p>The absolute path to the application’s CSR file.</p>
</dd>
<dt><kbd><span class="option">--output-cert-path=<var>&lt;path to output file&gt;</var></span></kbd></dt>
<dd><p>The absolute path where the application’s certificate file will be written to.</p>
</dd>
<dt><kbd><span class="option">--validity-period=<var>&lt;validity period&gt;</var></span></kbd></dt>
<dd><p>The validity period of the application’s certificate, in days. Must be a number between 30 and 1 825, inclusive.</p>
</dd>
</dl>
<p><strong>Privilege level</strong>: <strong>CRITICAL</strong></p>
<p><strong>Error messages</strong>:</p>
<ul>
<li><p><em>Message</em>: Authentication failed!</p>
<p><em>Likely cause</em>: Wrong admin ID, wrong password, or invalid administrator card.</p>
</li>
<li><p><em>Message</em>: Application ID does not exist!</p>
<p><em>Likely cause</em>: Application with the given ID does not exist.</p>
</li>
<li><p><em>Message</em>: Validity period must be between 30 and 1825 in days!</p>
<p><em>Likely cause</em>: Certificate validity period is out of range.</p>
</li>
<li><p><em>Message</em>: Output filename already exists!</p>
<p><em>Likely cause</em>: Output path is not empty.</p>
</li>
<li><p><em>Message</em>: Failed to create output certificate file!</p>
<p><em>Likely cause</em>: Unable to write to the given output path.</p>
</li>
<li><p><em>Message</em>: Failed to open CSR path!</p>
<p><em>Likely cause</em>: Wrong path to CSR file.</p>
</li>
<li><p><em>Message</em>: Invalid CSR content!</p>
<p><em>Likely cause</em>: Invalid or corrupted CSR file.</p>
</li>
<li><p><em>Message</em>: Renewing application certificate with different subject or distinguished name is not allowed!</p>
<p><em>Likely cause</em>: CSR has a different Subject/Distinguished Name to the existing certificate.</p>
</li>
</ul>
<p><strong>Usage example</strong>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>clikk<span class="w"> </span>app<span class="w"> </span>renew<span class="w"> </span>--csr-file-path<span class="o">=</span>/home/user/jmeter_CSR.pem<span class="w"> </span>--app-id<span class="o">=</span>jmeter<span class="w"> </span>--validity-period<span class="o">=</span><span class="m">365</span><span class="w"> </span>--output-cert-path<span class="o">=</span>/tmp/jmeter_CER.pem

<span class="go">This will renew an existing application&#39;s certificate.</span>
<span class="go">Ensure that the DN (subject) in the CSR matches with the one in KK-Manager&#39;s database.</span>
<span class="go">Run `clikk app info` to check the DN of an existing application.</span>
<span class="go">Are you sure you want to continue? Type `AmnaT` to continue, or press Enter to cancel.</span>
<span class="go">&gt; AmnaT</span>

<span class="go">Enter admin ID: Admin1</span>
<span class="go">Enter password:</span>
<span class="go">Insert the administrator card of Admin1 for two-factor authentication.</span>

<span class="go">Dual control authentication -- credential of second user is required.</span>
<span class="go">Admin1 is currently logged in.</span>

<span class="go">Enter admin ID: Admin2</span>
<span class="go">Enter password:</span>
<span class="go">Insert the administrator card of Admin2 for two-factor authentication.</span>

<span class="go">App ID: jmeter</span>
<span class="go">Subject: C=ID, ST=DKI Jakarta, L=South Jakarta, O=PT. Klavis Kripta Inovasi, OU=Quality Assurance, CN=QA/emailAddress=main@klaviskripta.com</span>
<span class="go">Registration date: 2023-03-20 15:19:25 WIB</span>
<span class="go">Certificate: -----BEGIN CERTIFICATE-----</span>
<span class="go">MIIFnjCCA4agAwIBAgIBADANBgkqhkiG9w0BAQsFADCBtDELMAkGA1UEBhMCSUQx</span>
<span class="go">FzAVBgNVBAgMDktlcHVsYXVhbiBSaWF1MQ4wDAYDVQQHDAVCYXRhbTETMBEGA1UE</span>
<span class="go">CgwKU2FuZGhpZ3VuYTEcMBoGA1UECwwTUHJvZHVjdCBEZXZlbG9wbWVudDEiMCAG</span>
<span class="go">A1UEAwwZZGVwbG95bWVudC5zYW5kaGlndW5hLmNvbTElMCMGCSqGSIb3DQEJARYW</span>
<span class="go">c3VwcG9ydEBzYW5kaGlndW5hLmNvbTAeFw0yMzAzMjAwODE5MjVaFw0yNDAzMTkw</span>
<span class="go">ODE5MjVaMIGrMQswCQYDVQQGEwJJRDEXMBUGA1UECAwOS2VwdWxhdWFuIFJpYXUx</span>

<span class="go">Application has been renewed successfully.</span>
</pre></div>
</div>
</section>
<section id="clikk-app-delete">
<h3><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">app</span> <span class="pre">delete</span></code><a class="headerlink" href="#clikk-app-delete" title="Link to this heading"></a></h3>
<p>Delete an application permanently.</p>
<p>This will revoke an application’s access to any KK-Cryptoservice instance. Before an application can be deleted,
it must be removed from all partitions it has been added to.</p>
<p><strong>Flags</strong>:</p>
<dl class="option-list">
<dt><kbd><span class="option">--app-id=<var>&lt;application ID&gt;</var></span></kbd></dt>
<dd><p>The identifier of the application.</p>
</dd>
</dl>
<p><strong>Privilege level</strong>: <strong>HIGH</strong></p>
<p><strong>Error messages</strong>:</p>
<ul>
<li><p><em>Message</em>: Authentication failed!</p>
<p><em>Likely cause</em>: Wrong admin ID, wrong password, or invalid administrator card.</p>
</li>
<li><p><em>Message</em>: Application ID does not exist!</p>
<p><em>Likely cause</em>: Application with the given ID does not exist.</p>
</li>
<li><p><em>Message</em>: Deleting an application that is still being referenced to by a partition is not allowed.</p>
<p><em>Likely cause</em>: Application has not been removed from all partitions.</p>
</li>
</ul>
<p><strong>Usage example</strong>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>clikk<span class="w"> </span>app<span class="w"> </span>delete<span class="w"> </span>--app-id<span class="o">=</span>jmeter

<span class="go">This will delete the given application. Ensure that it has been removed from all partitions.</span>
<span class="go">Are you sure you want to continue? Type `Yqe` to continue, or press Enter to cancel.</span>
<span class="go">&gt; Yqe</span>

<span class="go">Enter admin ID: Admin1</span>
<span class="go">Enter password:</span>
<span class="go">Insert the administrator card of Admin1 for two-factor authentication.</span>

<span class="go">Application has been deleted successfully.</span>
</pre></div>
</div>
</section>
</section>
<section id="kk-manager">
<h2>KK-Manager<a class="headerlink" href="#kk-manager" title="Link to this heading"></a></h2>
<p>KK-Manager is a centralized server that contains Kripta Key’s main database. This command offers functionalities
that allows the administrator to examine, manage, and maintain the Kripta Key installation. This command
operates on the KK-Manager instance CLIKK is currently connected to. Hence, it can also be used to manage
KK-Manager-DR instances.</p>
<section id="clikk-kk-manager-status">
<h3><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">kk-manager</span> <span class="pre">status</span></code><a class="headerlink" href="#clikk-kk-manager-status" title="Link to this heading"></a></h3>
<p>Show the status of KK-Manager.</p>
<p>Information shown includes:</p>
<ul class="simple">
<li><p>KK-Manager daemon start time</p></li>
<li><p>KK-Manager module version</p></li>
<li><p>KK-Manager machine’s FMSPC</p></li>
<li><p>KK-Manager machine’s processor package type</p></li>
<li><p>Last five commands executed via CLIKK</p></li>
<li><p>Number of audit log entries queued</p></li>
<li><p>List of registered KK-Cryptoservice instances</p></li>
<li><p>List of registered KK-Manager-DR instances, if any</p></li>
<li><p>Status of KK-Auditor instance</p></li>
<li><p>License information, which includes:</p>
<ul>
<li><p>Deployment ID</p></li>
<li><p>Product edition</p></li>
<li><p>License model</p></li>
<li><p>Remaining KK-Cryptoservice instance quota</p></li>
<li><p>Remaining KK-Manager-DR instance quota</p></li>
<li><p>Registration date</p></li>
<li><p>Expiry date</p></li>
</ul>
</li>
</ul>
<p><strong>Flags</strong>:</p>
<dl class="option-list">
<dt><kbd><span class="option">--verify</span></kbd></dt>
<dd><p>If present, verify the integrity of the database instead.</p>
</dd>
</dl>
<p><strong>Privilege level</strong>: <strong>NORMAL</strong></p>
<p><strong>Error messages</strong>:</p>
<ul>
<li><p><em>Message</em>: Authentication failed!</p>
<p><em>Likely cause</em>: Wrong admin ID, or wrong password.</p>
</li>
</ul>
<p><strong>Usage example</strong>:</p>
<ul>
<li><p>Check KK-Manager status.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>clikk<span class="w"> </span>kk-manager<span class="w"> </span>status

<span class="go">Enter admin ID: Admin1</span>
<span class="go">Enter password:</span>

<span class="go">KRIPTA KEY status as of 2023-03-24 14:59:21 WIB</span>
<span class="go">===============================================</span>

<span class="go">KK-Manager information:</span>
<span class="go">- Started on: 2023-03-24 14:32:56 WIB</span>
<span class="go">- Version: 24.1.0007-GA</span>
<span class="go">- Machine FMSPC: 00A065310000</span>
<span class="go">- Processor package type: processor</span>
<span class="go">- Last five executed commands:</span>
<span class="go">-- 2023-03-24 14:49:14 WIB: clikk partition info --partition-id=1</span>
<span class="go">-- 2023-03-24 14:49:16 WIB: clikk admin list</span>
<span class="go">-- 2023-03-24 14:55:22 WIB: clikk admin info --user-id=Admin1</span>
<span class="go">-- 2023-03-24 14:57:03 WIB: clikk kk-cryptoservice add-partition --kk-cryptoservice-name=KK-CSOne --partition-id=3</span>
<span class="go">-- 2023-03-24 14:57:17 WIB: clikk partition add-app --partition-id=3 --app-id=jmeter</span>
<span class="go">- Number of KK-Auditor entry in queue: 0</span>

<span class="go">KK-Cryptoservice information:</span>
<span class="go">- KK-CSOne (B41BEB6BXXXXXXXXXXXXXXXXXXXXXXX), last heartbeat: 2023-03-24 14:58:32 WIB</span>

<span class="go">KK-Manager-DR information:</span>
<span class="go">- KK-Mdr_1 (42ACCC9FXXXXXXXXXXXXXXXXXXXXXXXXXXXX), last heartbeat: 2023-03-24 14:58:55 WIB</span>

<span class="go">KK-Auditor information: Ready</span>

<span class="go">Kripta Key deployment license information</span>
<span class="go">- Deployment ID: 1234</span>
<span class="go">- Product edition: Enterprise</span>
<span class="go">- License model: Subscription</span>
<span class="go">- Remaining KK-Cryptoservice instance registrations: 4</span>
<span class="go">- Remaining KK-Manager-DR instance registrations: 0</span>
<span class="go">- Registration date: 2022-12-26 00:00:00 WIB</span>
<span class="go">- Expiry date: 2025-12-26 00:00:00 WIB</span>
</pre></div>
</div>
</li>
<li><p>Verify KK-Manager database.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>clikk<span class="w"> </span>kk-manager<span class="w"> </span>status<span class="w"> </span>--verify

<span class="go">Enter admin ID: Admin1</span>
<span class="go">Enter password:</span>

<span class="go">KK-Manager has been verified successfully. Database is in good condition.</span>
</pre></div>
</div>
</li>
</ul>
</section>
<section id="clikk-kk-manager-acl">
<h3><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">kk-manager</span> <span class="pre">acl</span></code><a class="headerlink" href="#clikk-kk-manager-acl" title="Link to this heading"></a></h3>
<p>Show the access control list for each KK-Cryptoservice instance.</p>
<p>The access control list is a list of partitions available in each KK-Cryptoservice instance, as well as
a list of partitions each application can access.</p>
<p>For each KK-Cryptoservice instance, this command also shows each month’s last HMAC, for transaction counting purposes.</p>
<p><strong>Flags</strong>:</p>
<dl class="option-list">
<dt><kbd><span class="option">--output-file-path=<var>&lt;path to output file&gt;</var></span></kbd></dt>
<dd><p>The absolute path where the ACL file will be written to. Optional. If present, the ACL is not shown in console.</p>
</dd>
</dl>
<p><strong>Privilege level</strong>: <strong>NORMAL</strong></p>
<p><strong>Error messages</strong>:</p>
<ul>
<li><p><em>Message</em>: Authentication failed!</p>
<p><em>Likely cause</em>: Wrong admin ID, or wrong password.</p>
</li>
<li><p><em>Message</em>: Output filename already exists!</p>
<p><em>Likely cause</em>: Output path is not empty.</p>
</li>
<li><p><em>Message</em>: Failed to create output file!</p>
<p><em>Likely cause</em>: Unable to write to the given output path.</p>
</li>
</ul>
<p><strong>Usage example</strong>:</p>
<ul>
<li><p>Show the access control list.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>clikk<span class="w"> </span>kk-manager<span class="w"> </span>acl

<span class="go">Enter admin ID: Admin1</span>
<span class="go">Enter password:</span>

<span class="go">KK-CSOne(cXY71nwAcf3dA9+AVHWn82IGrQT8LdgCqstOz+G5P8g= HMAC-1 3/2022, MJA363QY2JBKC4K3rlKhwmNYzGuZeH8uDFa2RVfvtAE= HMAC-2 4/2022, zr7A92BmVU9h7yZtXmNoBL0HLglmwAaBnF6mXdYUpKc= HMAC-3 5/2022):</span>
<span class="go">    Partition 3:</span>
<span class="go">        jmeter</span>

<span class="go">jmeter:</span>
<span class="go">    Partition 3</span>

<span class="go">postman:</span>
<span class="go">    No partitions added.</span>
</pre></div>
</div>
</li>
<li><p>Write the access control list to file.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>clikk<span class="w"> </span>kk-manager<span class="w"> </span>acl<span class="w"> </span>-–output-file-path<span class="o">=</span>/home/user/ACL.file

<span class="go">Enter admin ID: Admin1</span>
<span class="go">Enter password:</span>

<span class="go">Access control list has been written successfully to /home/user/ACL.file.</span>
</pre></div>
</div>
</li>
</ul>
</section>
<section id="clikk-kk-manager-request-license">
<h3><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">kk-manager</span> <span class="pre">request-license</span></code><a class="headerlink" href="#clikk-kk-manager-request-license" title="Link to this heading"></a></h3>
<p>Generate a license request file.</p>
<p>This command will prompt for a Distinguished Name.</p>
<p>Refer to <a class="reference internal" href="../license-guide/license-request.html"><span class="doc">Requesting a license</span></a> for steps on requesting a license.</p>
<p><strong>Flags</strong>:</p>
<dl class="option-list">
<dt><kbd><span class="option">--out-license-request=<var>&lt;path to output file&gt;</var></span></kbd></dt>
<dd><p>The absolute path where the license request will be written to.</p>
</dd>
</dl>
<p><strong>Privilege level</strong>: <strong>HIGH</strong></p>
<p><strong>Error messages</strong>:</p>
<ul>
<li><p><em>Message</em>: Authentication failed!</p>
<p><em>Likely cause</em>: Wrong admin ID, wrong password, or invalid administrator card.</p>
</li>
<li><p><em>Message</em>: Subject or Distinguished Name’s length must be less than 256 characters!</p>
<p><em>Likely cause</em>: Input to DN prompt is too long.</p>
</li>
<li><p><em>Message</em>: Output filename already exists!</p>
<p><em>Likely cause</em>: Output path is not empty.</p>
</li>
<li><p><em>Message</em>: Failed to create output file!</p>
<p><em>Likely cause</em>: Unable to write to the given output path.</p>
</li>
</ul>
<p><strong>Usage example</strong>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>clikk<span class="w"> </span>kk-manager<span class="w"> </span>request-license<span class="w"> </span>--out-license-request<span class="o">=</span>/path/to/licenserequest.bin

<span class="go">This action requires a Distinguished Name for the certificate.</span>
<span class="go">Hence, input will be required for each field in the Distinguished Name.</span>
<span class="go">Please enter valid data in each field.</span>
<span class="go">------</span>
<span class="go">[-] Common Name (the fully qualified domain name): example.com</span>
<span class="go">[-] Country Name (2 letter code) (Default: []): ID</span>
<span class="go">[-] State or Province Name (Default: []): DKI Jakarta</span>
<span class="go">[-] Locality or City Name (Default: []): South Jakarta</span>
<span class="go">[-] Organization Name (legal company name) (Default: []): PT. Example Corp.</span>
<span class="go">[-] Organizational Unit Name (section or department) (Default: []): Support</span>
<span class="go">[-] Email Address (Default: []): support@example.com</span>

<span class="go">Enter admin ID: Admin1</span>
<span class="go">Enter password:</span>
<span class="go">Insert the administrator card of Admin1 for two-factor authentication.</span>

<span class="go">License request file has been generated and saved successfully to /path/to/licenserequest.bin.</span>
</pre></div>
</div>
</section>
<section id="clikk-kk-manager-apply-license">
<h3><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">kk-manager</span> <span class="pre">apply-license</span></code><a class="headerlink" href="#clikk-kk-manager-apply-license" title="Link to this heading"></a></h3>
<p>Apply a license file to the Kripta Key deployment.</p>
<p>The license file is obtained from Klavis Kripta after sending the license request in.</p>
<p>Refer to <a class="reference internal" href="../license-guide/license-apply.html"><span class="doc">Applying your license</span></a> for steps on applying a license.</p>
<p><strong>Flags</strong>:</p>
<dl class="option-list">
<dt><kbd><span class="option">--license-file=<var>&lt;path to license file&gt;</var></span></kbd></dt>
<dd><p>The absolute path to the license file.</p>
</dd>
</dl>
<p><strong>Privilege level</strong>: <strong>CRITICAL</strong></p>
<p><strong>Error messages</strong>:</p>
<ul>
<li><p><em>Message</em>: Authentication failed!</p>
<p><em>Likely cause</em>: Wrong admin ID, wrong password, or invalid administrator card.</p>
</li>
<li><p><em>Message</em>: License file cannot be opened!</p>
<p><em>Likely cause</em>: Wrong path to license file.</p>
</li>
</ul>
<p><strong>Usage example</strong>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>clikk<span class="w"> </span>kk-manager<span class="w"> </span>apply-license<span class="w"> </span>--license-file<span class="o">=</span>/tmp/license1.file

<span class="go">This will apply the license file to this Kripta Key installation. Upon success, all Kripta Key instances must be restarted.</span>
<span class="go">Are you sure you want to continue? Type `(&quot;4%O` to continue, or press Enter to cancel.</span>
<span class="go">&gt; (&quot;4%O</span>

<span class="go">Enter admin ID: Admin1</span>
<span class="go">Enter password:</span>
<span class="go">Insert the administrator card of Admin1 for two-factor authentication.</span>

<span class="go">Dual control authentication -- credential of second user is required.</span>
<span class="go">Admin1 is currently logged in.</span>

<span class="go">Enter admin ID: Admin2</span>
<span class="go">Enter password:</span>
<span class="go">Insert the administrator card of Admin2 for two-factor authentication.</span>

<span class="go">License has been applied successfully.</span>
<span class="go">Please restart the KK-Auditor service and the KK-Manager service.</span>
<span class="go">If this is the first license application, re-register all applications and all KK-Cryptoservice instances to download the latest certificate from KK-Manager.</span>
</pre></div>
</div>
</section>
<section id="clikk-kk-manager-add-dr">
<h3><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">kk-manager</span> <span class="pre">add-dr</span></code><a class="headerlink" href="#clikk-kk-manager-add-dr" title="Link to this heading"></a></h3>
<p>Register a KK-Manager-DR instance.</p>
<p>Refer to <a class="reference internal" href="../installation-guide/disaster-recovery.html#registering-kk-manager-dr"><span class="std std-ref">Registering KK-Manager-DR</span></a> for steps
on KK-Manager-DR instance registration.</p>
<p><strong>Flags</strong>:</p>
<dl class="option-list">
<dt><kbd><span class="option">--kk-manager-collateral-path=<var>&lt;path to collateral file&gt;</var></span></kbd></dt>
<dd><p>The absolute path to the main KK-Manager machine’s collateral file.</p>
</dd>
<dt><kbd><span class="option">--kk-manager-dr-collateral-path=<var>&lt;path to collateral file&gt;</var></span></kbd></dt>
<dd><p>The absolute path to the KK-Manager-DR machine’s collateral file.</p>
</dd>
<dt><kbd><span class="option">--kk-manager-dr-host=<var>&lt;instance host&gt;</var></span></kbd></dt>
<dd><p>The host address of the KK-Manager-DR instance.</p>
</dd>
<dt><kbd><span class="option">--kk-manager-dr-port=<var>&lt;instance port&gt;</var></span></kbd></dt>
<dd><p>The port of the KK-Manager-DR instance. Must be a number between 1024 and 49 151, inclusive.</p>
</dd>
<dt><kbd><span class="option">--kk-manager-dr-name=<var>&lt;instance name&gt;</var></span></kbd></dt>
<dd><p>The identifying name of the KK-Manager-DR instance.</p>
</dd>
</dl>
<p><strong>Privilege level</strong>: <strong>CRITICAL</strong></p>
<p><strong>Error messages</strong>:</p>
<ul>
<li><p><em>Message</em>: Authentication failed!</p>
<p><em>Likely cause</em>: Wrong admin ID, wrong password, or invalid administrator card.</p>
</li>
<li><p><em>Message</em>: Failed to open the specified collateral file!</p>
<p><em>Likely cause</em>: Wrong path to certificate file.</p>
</li>
<li><p><em>Message</em>: Invalid collateral file!</p>
<p><em>Likely cause</em>: File is not a collateral file or is corrupted.</p>
</li>
<li><p><em>Message</em>: Failed to connect to KK-Manager-DR!</p>
<p><em>Likely cause</em>: Wrong host address and/or port, or connection cannot be established.</p>
</li>
<li><p><em>Message</em>: You have reached the maximum machine(s) allowed according to your license!</p>
<p><em>Likely cause</em>: Insufficient quota available for KK-Manager-DR registration.</p>
</li>
<li><p><em>Message</em>: Cannot register KK-Manager-DR using the same machine as main KK-Manager!</p>
<p><em>Likely cause</em>: Attempted to register a KK-Manager-DR instance sharing a machine with the main KK-Manager instance.</p>
</li>
<li><p><em>Message</em>: KK-Manager-DR is already registered!</p>
<p><em>Likely cause</em>: KK-Manager-DR with the same QE ID or name has already been registered.</p>
</li>
<li><p><em>Message</em>: Use the most recent backup file!</p>
<p><em>Likely cause</em>: Database is not synchronized — use the most recent backup file.</p>
</li>
</ul>
<p><strong>Usage example</strong>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>clikk<span class="w"> </span>kk-manager<span class="w"> </span>add-dr<span class="w"> </span>--kk-manager-collateral-path<span class="o">=</span>home/user/documents/collateral_00A065XXXXXXX.json<span class="w"> </span>--kk-manager-dr-collateral-path<span class="o">=</span>/home/user/documents/collateral_00906EXXXXXX.json<span class="w"> </span>--kk-manager-dr-host<span class="o">=</span><span class="m">10</span>.30.0.2<span class="w"> </span>--kk-manager-dr-port<span class="o">=</span><span class="m">8086</span><span class="w"> </span>--kk-manager-dr-name<span class="o">=</span>kk-m-drOne

<span class="go">Enter admin ID: Admin1</span>
<span class="go">Enter password:</span>
<span class="go">Insert the administrator card of Admin1 for two-factor authentication.</span>

<span class="go">Dual control authentication -- credential of second user is required.</span>
<span class="go">Admin1 is currently logged in.</span>

<span class="go">Enter admin ID: Admin2</span>
<span class="go">Enter password:</span>
<span class="go">Insert the administrator card of Admin2 for two-factor authentication.</span>

<span class="go">KK-Manager-DR `kk-m-drOne` at 10.30.0.2 has been registered successfully.</span>
</pre></div>
</div>
</section>
<section id="clikk-kk-manager-list-dr">
<h3><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">kk-manager</span> <span class="pre">list-dr</span></code><a class="headerlink" href="#clikk-kk-manager-list-dr" title="Link to this heading"></a></h3>
<p>List all available KK-Manager-DR instances.</p>
<p><strong>Flags</strong>: None.</p>
<p><strong>Privilege level</strong>: <strong>NORMAL</strong></p>
<p><strong>Error messages</strong>:</p>
<ul>
<li><p><em>Message</em>: Authentication failed!</p>
<p><em>Likely cause</em>: Wrong admin ID, or wrong password.</p>
</li>
</ul>
<p><strong>Usage example</strong>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>clikk<span class="w"> </span>kk-manager<span class="w"> </span>list-dr

<span class="go">Enter admin ID: Admin1</span>
<span class="go">Enter password:</span>

<span class="go">DR instance names:</span>
<span class="go">kk-m-drOne</span>
</pre></div>
</div>
</section>
<section id="clikk-kk-manager-info-dr">
<h3><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">kk-manager</span> <span class="pre">info-dr</span></code><a class="headerlink" href="#clikk-kk-manager-info-dr" title="Link to this heading"></a></h3>
<p>Retrieve information about a KK-Manager-DR instance.</p>
<p>The information includes the KK-Manager-DR machine’s QE ID, and the registration date.</p>
<p><strong>Flags</strong>:</p>
<dl class="option-list">
<dt><kbd><span class="option">--kk-manager-dr-name=<var>&lt;instance name&gt;</var></span></kbd></dt>
<dd><p>The identifying name of the KK-Manager-DR instance.</p>
</dd>
</dl>
<p><strong>Privilege level</strong>: <strong>NORMAL</strong></p>
<p><strong>Error messages</strong>:</p>
<ul>
<li><p><em>Message</em>: Authentication failed!</p>
<p><em>Likely cause</em>: Wrong admin ID, or wrong password.</p>
</li>
<li><p><em>Message</em>: KK-Manager-DR does not exist!</p>
<p><em>Likely cause</em>: KK-Manager-DR instance with the given name does not exist.</p>
</li>
</ul>
<p><strong>Usage example</strong>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>clikk<span class="w"> </span>kk-manager<span class="w"> </span>info-dr<span class="w"> </span>--kk-manager-dr-name<span class="o">=</span>KK-MdrOne

<span class="go">Enter admin ID: Admin1</span>
<span class="go">Enter password:</span>

<span class="go">KK-Manager-DR ID: 8F0FFCDC31A4E2BB628ECC25113837AD</span>
<span class="go">KK-Manager-DR name: KK-MdrOne</span>
<span class="go">Registration date: 2023-03-27 11:49:24 WIB</span>
</pre></div>
</div>
</section>
<section id="clikk-kk-manager-promote-dr">
<h3><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">kk-manager</span> <span class="pre">promote-dr</span></code><a class="headerlink" href="#clikk-kk-manager-promote-dr" title="Link to this heading"></a></h3>
<p>Promote a KK-Manager-DR instance to the main KK-Manager instance.</p>
<p>Refer to <a class="reference internal" href="../installation-guide/disaster-recovery.html#kk-manager-dr-promotion"><span class="std std-ref">KK-Manager-DR promotion</span></a> for steps
on KK-Manager-DR promotion.</p>
<p><strong>Flags</strong>:</p>
<dl class="option-list">
<dt><kbd><span class="option">--kk-manager-collateral-path=<var>&lt;path to collateral file&gt;</var></span></kbd></dt>
<dd><p>The absolute path to the to-be-promoted KK-Manager machine’s collateral file. Optional. Used if registering
a new KK-Auditor instance.</p>
</dd>
<dt><kbd><span class="option">--kk-auditor-collateral-path=<var>&lt;path to collateral file&gt;</var></span></kbd></dt>
<dd><p>The absolute path to the KK-Auditor machine’s collateral file. Optional. Used if registering
a new KK-Auditor instance.</p>
</dd>
<dt><kbd><span class="option">--kk-auditor-host=<var>&lt;instance host&gt;</var></span></kbd></dt>
<dd><p>The host address of the KK-Auditor instance.</p>
</dd>
<dt><kbd><span class="option">--kk-auditor-port=<var>&lt;instance port&gt;</var></span></kbd></dt>
<dd><p>The port of the KK-Auditor instance. Must be a number between 1024 and 49 151, inclusive.</p>
</dd>
</dl>
<p><strong>Privilege level</strong>: <strong>CRITICAL</strong></p>
<p><strong>Error messages</strong>:</p>
<ul>
<li><p><em>Message</em>: Authentication failed!</p>
<p><em>Likely cause</em>: Wrong admin ID, wrong password, or invalid administrator card.</p>
</li>
<li><p><em>Message</em>: Failed to open the specified collateral file!</p>
<p><em>Likely cause</em>: Wrong path to certificate file.</p>
</li>
<li><p><em>Message</em>: Invalid collateral file!</p>
<p><em>Likely cause</em>: File is not a collateral file or, collateral file is corrupted.</p>
</li>
</ul>
<p><strong>Usage example</strong>:</p>
<ul>
<li><p>Promote a KK-Manager-DR instance to the main KK-Manager instance, using the existing KK-Auditor instance.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>clikk<span class="w"> </span>kk-manager<span class="w"> </span>promote-dr<span class="w"> </span>--kk-auditor-host<span class="o">=</span><span class="m">127</span>.0.0.1<span class="w"> </span>--kk-auditor-port<span class="o">=</span><span class="m">8082</span>

<span class="go">Enter admin ID: Admin1</span>
<span class="go">Enter password:</span>
<span class="go">Insert the administrator card of Admin1 for two-factor authentication.</span>

<span class="go">Dual control authentication -- credential of second user is required.</span>
<span class="go">Admin1 is currently logged in.</span>

<span class="go">Enter admin ID: Admin2</span>
<span class="go">Enter password:</span>
<span class="go">Insert the administrator card of Admin2 for two-factor authentication.</span>

<span class="go">KK-Manager-DR has been promoted successfully to main KK-Manager.</span>
<span class="go">Please update the relevant configurations and restart the KK-Manager service.</span>
</pre></div>
</div>
</li>
<li><p>Promote a KK-Manager-DR instance to the main KK-Manager instance, registering a new KK-Auditor instance.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>clikk<span class="w"> </span>kk-manager<span class="w"> </span>promote-dr<span class="w"> </span>--kk-manager-collateral-path<span class="o">=</span>/home/user/Documents/collateral_00A0XXXXXXXX.json<span class="w"> </span>--kk-auditor-collateral-path<span class="o">=</span>/home/user/Documents/collateral_00A0XXXXXXXX.json<span class="w"> </span>--kk-auditor-host<span class="o">=</span><span class="m">127</span>.0.0.1<span class="w"> </span>--kk-auditor-port<span class="o">=</span><span class="m">8082</span>

<span class="go">Enter admin ID: Admin1</span>
<span class="go">Enter password:</span>
<span class="go">Insert the administrator card of Admin1 for two-factor authentication.</span>

<span class="go">Dual control authentication -- credential of second user is required.</span>
<span class="go">Admin1 is currently logged in.</span>

<span class="go">Enter admin ID: Admin2</span>
<span class="go">Enter password:</span>
<span class="go">Insert the administrator card of Admin2 for two-factor authentication.</span>

<span class="go">KK-Manager-DR has been promoted successfully to main KK-Manager.</span>
<span class="go">Please update the relevant configurations and restart the KK-Manager service.</span>
</pre></div>
</div>
</li>
</ul>
</section>
<section id="clikk-kk-manager-request-delete-dr">
<h3><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">kk-manager</span> <span class="pre">request-delete-dr</span></code><a class="headerlink" href="#clikk-kk-manager-request-delete-dr" title="Link to this heading"></a></h3>
<p>Generate a KK-Manager-DR deletion request file.</p>
<p>This is done if the KK-Manager-DR machine has been rendered inoperable and the machine is considered lost.
Send the generated request file to Klavis Kripta’s sales team to obtain a signed permission file.</p>
<p><strong>Flags</strong>:</p>
<dl class="option-list">
<dt><kbd><span class="option">--kk-manager-dr-name=<var>&lt;server name&gt;</var></span></kbd></dt>
<dd><p>The identifying name of the KK-Manager-DR instance.</p>
</dd>
<dt><kbd><span class="option">--out-delete-request=<var>&lt;path to output file&gt;</var></span></kbd></dt>
<dd><p>The absolute path where the deletion request will be written to.</p>
</dd>
</dl>
<p><strong>Privilege level</strong>: <strong>NORMAL</strong></p>
<p><strong>Error messages</strong>:</p>
<ul>
<li><p><em>Message</em>: Authentication failed!</p>
<p><em>Likely cause</em>: Wrong admin ID, wrong password, or invalid administrator card.</p>
</li>
<li><p><em>Message</em>: KK-Manager-DR does not exist!</p>
<p><em>Likely cause</em>: KK-Manager-DR with the given name does not exist.</p>
</li>
<li><p><em>Message</em>: Output filename already exists!</p>
<p><em>Likely cause</em>: Output path is not empty.</p>
</li>
<li><p><em>Message</em>: Failed to create output file!</p>
<p><em>Likely cause</em>: Unable to write to the given output path.</p>
</li>
</ul>
<p><strong>Usage example</strong>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>clikk<span class="w"> </span>kk-manager<span class="w"> </span>request-delete-dr<span class="w"> </span>--kk-manager-dr-name<span class="o">=</span>kkmDROne<span class="w"> </span>--out-delete-request<span class="o">=</span>/home/User/Documents/deleterequest.file

<span class="go">Enter admin ID: Admin1</span>
<span class="go">Enter password:</span>
<span class="go">Insert the administrator card of Admin1 for two-factor authentication.</span>

<span class="go">Dual control authentication -- credential of second user is required.</span>
<span class="go">Admin1 is currently logged in.</span>

<span class="go">Enter admin ID: Admin2</span>
<span class="go">Enter password:</span>
<span class="go">Insert the administrator card of Admin2 for two-factor authentication.</span>

<span class="go">Permission file to delete KK-Manager-DR `DROne` has been generated and written successfully to /home/User/Documents/deleterequest.file.</span>
</pre></div>
</div>
</section>
<section id="clikk-kk-manager-delete-dr">
<h3><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">kk-manager</span> <span class="pre">delete-dr</span></code><a class="headerlink" href="#clikk-kk-manager-delete-dr" title="Link to this heading"></a></h3>
<p>Delete a KK-Manager-DR instance.</p>
<p>Depending on the state of the KK-Manager-DR, this command can perform a soft delete or a hard delete,
which is explained as follows:</p>
<ul>
<li><p><strong>Soft delete</strong>: This occurs when the instance is no longer connected to the main KK-Manager instance
when it is deleted. It is removed from the list of registered instances. However, this will not increment
the registration quota.</p>
<p>When the deleted instance connects to the main KK-Manager instance, it will then be hard deleted automatically.</p>
</li>
<li><p><strong>Hard delete</strong>: This occurs when the instance is connected to the main KK-Manager instance,
or it is no longer connected, but a deletion permission file is provided. The instance’s functionality
will be disabled, and it is removed from the list of registered instances. Finally, the registration quota
will be incremented.</p></li>
</ul>
<p>Regardless of the type of deletion, deleted instances may be registered to the main KK-Manager instance again.</p>
<p><strong>Flags</strong>:</p>
<dl class="option-list">
<dt><kbd><span class="option">--kk-manager-dr-name=<var>&lt;instance name&gt;</var></span></kbd></dt>
<dd><p>The identifying name of the KK-Manager-DR instance.</p>
</dd>
<dt><kbd><span class="option">--permission=<var>&lt;path to permission file&gt;</var></span></kbd></dt>
<dd><p>The absolute path to the permission file. Optional.</p>
</dd>
</dl>
<p><strong>Privilege level</strong>: <strong>CRITICAL</strong></p>
<p><strong>Error messages</strong>:</p>
<ul>
<li><p><em>Message</em>: Authentication failed!</p>
<p><em>Likely cause</em>: Wrong admin ID, wrong password, or invalid administrator card.</p>
</li>
<li><p><em>Message</em>: KK-Manager-DR does not exist!</p>
<p><em>Likely cause</em>: KK-Manager-DR with the given name does not exist.</p>
</li>
<li><p><em>Message</em>: Invalid file path!</p>
<p><em>Likely cause</em>: Wrong path to permission file.</p>
</li>
<li><p><em>Message</em>: Invalid permission file!</p>
<p><em>Likely cause</em>: File is not a permission file, or permission file is corrupt.</p>
</li>
</ul>
<p><strong>Usage example</strong>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>clikk<span class="w"> </span>kk-manager<span class="w"> </span>delete-dr<span class="w"> </span>--kk-manager-dr-name<span class="o">=</span>kkmDROne

<span class="go">Enter admin ID: Admin1</span>
<span class="go">Enter Password:</span>
<span class="go">Insert the administrator card of Admin1 for two-factor authentication.</span>

<span class="go">Dual control authentication -- credential of second user is required.</span>
<span class="go">Admin1 is currently logged in.</span>

<span class="go">Enter admin ID: Admin2</span>
<span class="go">Enter password:</span>
<span class="go">Insert the administrator card of Admin2 for two-factor authentication.</span>

<span class="go">KK-Manager-DR instance has been deleted successfully.</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>clikk<span class="w"> </span>kk-manager<span class="w"> </span>delete-dr<span class="w"> </span>--kk-manager-dr-name<span class="o">=</span>kkmDROne<span class="w"> </span>--permission<span class="o">=</span>/home/User/Documents/permission.file
</pre></div>
</div>
</section>
<section id="clikk-kk-manager-backup">
<h3><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">kk-manager</span> <span class="pre">backup</span></code><a class="headerlink" href="#clikk-kk-manager-backup" title="Link to this heading"></a></h3>
<p>Create a manual backup of the KK-Manager’s database.</p>
<p>The resulting backup is stored in the <code class="docutils literal notranslate"><span class="pre">backup</span></code> directory, within the KK-Manager’s working directory.</p>
<p><strong>Flags</strong>: None.</p>
<p><strong>Privilege level</strong>: <strong>NORMAL</strong></p>
<p><strong>Error messages</strong>:</p>
<ul>
<li><p><em>Message</em>: Authentication failed!</p>
<p><em>Likely cause</em>: Wrong admin ID, or wrong password.</p>
</li>
</ul>
<p><strong>Usage example</strong>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>clikk<span class="w"> </span>kk-manager<span class="w"> </span>backup

<span class="go">Enter admin ID: Admin1</span>
<span class="go">Enter password:</span>

<span class="go">KK-Manager database has been backed up successfully to /var/local/kriptakey/kk-manager/backup/kkm-20231016-14:43:35-manual.backup.</span>
</pre></div>
</div>
</section>
<section id="clikk-kk-manager-regenerate-backup-key">
<h3><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">kk-manager</span> <span class="pre">regenerate-backup-key</span></code><a class="headerlink" href="#clikk-kk-manager-regenerate-backup-key" title="Link to this heading"></a></h3>
<p>Regenerate the system’s backup key.</p>
<p>This command requires the administrators to prepare two sets of recovery cards, the same amount prepared
as during key ceremony. Both new and existing recovery cards are accepted.</p>
<p>This command is intended to be used when some of the existing recovery cards are lost or otherwise
rendered unusable. Regenerating the backup key create two new sets of recovery cards, ensuring that commands
with EMERGENCY privilege level can be executed.</p>
<p><strong>Flags</strong>: None.</p>
<p><strong>Privilege level</strong>: <strong>CRITICAL</strong></p>
<p><strong>Error messages</strong>:</p>
<ul>
<li><p><em>Message</em>: Authentication failed!</p>
<p><em>Likely cause</em>: Wrong admin ID, wrong password, or invalid administrator card.</p>
</li>
<li><p><em>Message</em>: The provided TEK component is not valid!</p>
<p><em>Likely cause</em>: SCC is in invalid format.</p>
</li>
<li><p><em>Message</em>: The TEK component provided does not appear to match the one stored in the database!</p>
<p><em>Likely cause</em>: SCC does not match with the one issued during key ceremony.</p>
</li>
<li><p><em>Message</em>: The Deployment ID provided does not appear to match the one stored in the database!</p>
<p><em>Likely cause</em>: Deployment ID does not match with the one entered during key ceremony.</p>
</li>
</ul>
<p><strong>Usage example</strong>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>clikk<span class="w"> </span>kk-manager<span class="w"> </span>regenerate-backup-key

<span class="go">This will regenerate the backup key and the recovery cards.</span>
<span class="go">Recovery cards associated with the previous backup key will become UNUSEABLE.</span>
<span class="go">Existing recovery cards may be used for this purpose.</span>
<span class="go">Prepare two sets of 5 cards each.</span>

<span class="go">Are you sure you want to continue? Type `DSIcE` to continue, or press Enter to cancel.</span>
<span class="go">&gt; DSIcE</span>

<span class="go">Enter the secure channel code (SCC): b2baa436XXXXXXXXXXXXXXXXXXXXXXXX</span>
<span class="go">Enter the deployment ID: ENTERPRIXXXXXXXX</span>
<span class="go">Dual control authentication--credential of a second administrator is required.</span>
<span class="go">admin1 is currently logged in.</span>

<span class="go">Enter admin ID: admin2</span>
<span class="go">Enter password:</span>

<span class="go">Insert the administrator card of admin2 for two-factor authentication.</span>
<span class="go">Remove the card!</span>

<span class="go">Please prepare 5 cards for the first set of recovery cards.</span>
<span class="go">Insert a card!</span>

<span class="go">Key in the PIN and press Enter on the PIN pad to read the secure channel key encryption keys (SCKEKs).</span>
<span class="go">Secret 1 has been written successfully.</span>
<span class="go">Remove the card!</span>
<span class="go">Insert a card!</span>

<span class="go">Key in the PIN and press Enter on the PIN pad to read the secure channel key encryption keys (SCKEKs).</span>
<span class="go">Secret 2 has been written successfully.</span>
<span class="go">Remove the card!</span>
<span class="go">Insert a card!</span>

<span class="go">Key in the PIN and press Enter on the PIN pad to read the secure channel key encryption keys (SCKEKs).</span>
<span class="go">Secret 3 has been written successfully.</span>
<span class="go">Remove the card!</span>
<span class="go">Insert a card!</span>

<span class="go">Key in the PIN and press Enter on the PIN pad to read the secure channel key encryption keys (SCKEKs).</span>
<span class="go">Secret 4 has been written successfully.</span>
<span class="go">Remove the card!</span>
<span class="go">Insert a card!</span>

<span class="go">Key in the PIN and press Enter on the PIN pad to read the secure channel key encryption keys (SCKEKs).</span>
<span class="go">Secret 5 has been written successfully.</span>
<span class="go">Remove the card!</span>

<span class="go">Please prepare 5 cards for the second set of recovery cards.</span>
<span class="go">Insert a card!</span>

<span class="go">Key in the PIN and press Enter on the PIN pad to read the secure channel key encryption keys (SCKEKs).</span>
<span class="go">Secret 1 has been written successfully.</span>
<span class="go">Remove the card!</span>
<span class="go">Insert a card!</span>

<span class="go">Key in the PIN and press Enter on the PIN pad to read the secure channel key encryption keys (SCKEKs).</span>
<span class="go">Secret 2 has been written successfully.</span>
<span class="go">Remove the card!</span>
<span class="go">Insert a card!</span>

<span class="go">Key in the PIN and press Enter on the PIN pad to read the secure channel key encryption keys (SCKEKs).</span>
<span class="go">Secret 3 has been written successfully.</span>
<span class="go">Remove the card!</span>
<span class="go">Insert a card!</span>

<span class="go">Key in the PIN and press Enter on the PIN pad to read the secure channel key encryption keys (SCKEKs).</span>
<span class="go">Secret 4 has been written successfully.</span>
<span class="go">Remove the card!</span>
<span class="go">Insert a card!</span>

<span class="go">Key in the PIN and press Enter on the PIN pad to read the secure channel key encryption keys (SCKEKs).</span>
<span class="go">Secret 5 has been written successfully.</span>
<span class="go">Remove the card!</span>

<span class="go">Backup key has been regenerated successfully.</span>
<span class="go">It is strongly advised to test the regenerated recovery cards by running the `clikk kk-manager verify-recovery-cards` command.</span>
</pre></div>
</div>
</section>
<section id="clikk-kk-manager-verify-recovery-cards">
<h3><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">kk-manager</span> <span class="pre">verify-recovery-cards</span></code><a class="headerlink" href="#clikk-kk-manager-verify-recovery-cards" title="Link to this heading"></a></h3>
<p>Verify the integrity of the recovery cards.</p>
<p>This action requires all cards within a recovery card set.</p>
<p><strong>Flags</strong>: None.</p>
<p><strong>Privilege level</strong>: <strong>CRITICAL</strong></p>
<p><strong>Error messages</strong>:</p>
<ul>
<li><p><em>Message</em>: Authentication failed!</p>
<p><em>Likely cause</em>: Wrong admin ID, wrong password, or invalid administrator card.</p>
</li>
</ul>
<p><strong>Usage example</strong>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>clikk<span class="w"> </span>kk-manager<span class="w"> </span>verify-recovery-cards

<span class="go">It is strongly advised to run this command for both sets of Kripta Key recovery cards, completing the process for one set first, and then running it again for the next set.</span>
<span class="go">Are you sure you want to continue? Type `s~U` to continue, or press Enter to cancel.</span>
<span class="go">&gt; s~U</span>

<span class="go">Insert a recovery card from the set of cards.</span>

<span class="go">Key in the PIN and press Enter on the PIN pad to read the secure channel key encryption keys (SCKEKs).</span>
<span class="go">Total of 1 secret(s) recovered.</span>
<span class="go">Please insert the next recovery card</span>

<span class="go">Key in the PIN and press Enter on the PIN pad to read the secure channel key encryption keys (SCKEKs).</span>
<span class="go">Total of 2 secret(s) recovered.</span>
<span class="go">Please insert the next recovery card</span>

<span class="go">Key in the PIN and press Enter on the PIN pad to read the secure channel key encryption keys (SCKEKs).</span>
<span class="go">Total of 3 secret(s) recovered.</span>
<span class="go">Please insert the next recovery card</span>

<span class="go">Key in the PIN and press Enter on the PIN pad to read the secure channel key encryption keys (SCKEKs).</span>
<span class="go">Total of 4 secret(s) recovered.</span>
<span class="go">Please insert the next recovery card</span>

<span class="go">Key in the PIN and press Enter on the PIN pad to read the secure channel key encryption keys (SCKEKs).</span>
<span class="go">Total of 5 secret(s) recovered.</span>

<span class="go">A sufficient number of secrets have been recovered.</span>

<span class="go">Enter admin ID: admin1</span>
<span class="go">Enter password:</span>

<span class="go">Insert the administrator card of admin1 for two-factor authentication.</span>
<span class="go">Remove the card!</span>
<span class="go">Dual control authentication--credential of a second administrator is required.</span>
<span class="go">admin1 is currently logged in.</span>

<span class="go">Enter admin ID: admin2</span>
<span class="go">Enter password:</span>

<span class="go">Insert the administrator card of admin2 for two-factor authentication.</span>
<span class="go">Remove the card!</span>
<span class="go">Recovery cards are in good condition.</span>
</pre></div>
</div>
</section>
</section>
<section id="kk-cryptoservice">
<h2>KK-Cryptoservice<a class="headerlink" href="#kk-cryptoservice" title="Link to this heading"></a></h2>
<p>KK-Cryptoservice instances may be managed via CLIKK, offering the usual set of management commands.
Additionally, administrators can perform access control by adding and removing partition to and from
KK-Cryptoservice instances.</p>
<section id="clikk-kk-cryptoservice-add">
<h3><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">kk-cryptoservice</span> <span class="pre">add</span></code><a class="headerlink" href="#clikk-kk-cryptoservice-add" title="Link to this heading"></a></h3>
<p>Register a KK-Cryptoservice instance.</p>
<p>Refer to <a class="reference internal" href="../installation-guide/cryptographic-service-installation.html#registering-kk-cryptoservice"><span class="std std-ref">Registering KK-Cryptoservice</span></a> for steps
on KK-Manager-DR instance registration.</p>
<p><strong>Flags</strong>:</p>
<dl class="option-list">
<dt><kbd><span class="option">--kk-manager-collateral-path=<var>&lt;path to collateral file&gt;</var></span></kbd></dt>
<dd><p>The absolute path to the main KK-Manager machine’s collateral file.</p>
</dd>
<dt><kbd><span class="option">--kk-cryptoservice-collateral-path=<var>&lt;path to collateral file&gt;</var></span></kbd></dt>
<dd><p>The absolute path to the KK-Cryptoservice machine’s collateral file.</p>
</dd>
<dt><kbd><span class="option">--kk-cryptoservice-host=<var>&lt;instance host&gt;</var></span></kbd></dt>
<dd><p>The host address of the KK-Cryptoservice instance.</p>
</dd>
<dt><kbd><span class="option">--kk-cryptoservice-port=<var>&lt;instance port&gt;</var></span></kbd></dt>
<dd><p>The port of the KK-Cryptoservice instance. Must be a number between 1024 and 49 151, inclusive.</p>
</dd>
<dt><kbd><span class="option">--kk-cryptoservice-name=<var>&lt;instance name&gt;</var></span></kbd></dt>
<dd><p>The identifying name of the KK-Cryptoservice instance.</p>
</dd>
</dl>
<p><strong>Privilege level</strong>: <strong>CRITICAL</strong></p>
<p><strong>Error messages</strong>:</p>
<ul>
<li><p><em>Message</em>: Authentication failed!</p>
<p><em>Likely cause</em>: Wrong admin ID, wrong password, or invalid administrator card.</p>
</li>
<li><p><em>Message</em>: Failed to open the specified collateral file!</p>
<p><em>Likely cause</em>: Wrong path to certificate file.</p>
</li>
<li><p><em>Message</em>: Invalid collateral file!</p>
<p><em>Likely cause</em>: File is not a collateral file or is corrupted.</p>
</li>
<li><p><em>Message</em>: Failed to connect to KK-Cryptoservice!</p>
<p><em>Likely cause</em>: Wrong host address and/or port, or connection cannot be established.</p>
</li>
<li><p><em>Message</em>: You have reached the maximum machine(s) allowed according to your license!</p>
<p><em>Likely cause</em>: Insufficient quota available for KK-Cryptoservice registration.</p>
</li>
<li><p><em>Message</em>: KK-Cryptoservice is already registered!</p>
<p><em>Likely cause</em>: KK-Cryptoservice with the same QE ID or name has already been registered.</p>
</li>
<li><p><em>Message</em>: Use the most recent backup file!</p>
<p><em>Likely cause</em>: Database is not synchronized — use the most recent backup file.</p>
</li>
</ul>
<p><strong>Usage example</strong>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>clikk<span class="w"> </span>kk-cryptoservice<span class="w"> </span>add<span class="w"> </span>--kk-manager-collateral-path<span class="o">=</span>/home/user/documents/collateral_00A065XXXXXX.json<span class="w"> </span>--kk-cryptoservice-collateral-path<span class="o">=</span>/home/user/documents/collateral_00A065XXXXXX.json<span class="w"> </span>--kk-cryptoservice-host<span class="o">=</span><span class="m">10</span>.30.0.2<span class="w"> </span>--kk-cryptoservice-port<span class="o">=</span><span class="m">8086</span><span class="w"> </span>--kk-cryptoservice-name<span class="o">=</span>kk-csOne

<span class="go">Enter admin ID: Admin1</span>
<span class="go">Enter password:</span>
<span class="go">Insert the administrator card of Admin1 for two-factor authentication.</span>

<span class="go">Dual control authentication -- credential of second user is required.</span>
<span class="go">Admin1 is currently logged in.</span>

<span class="go">Enter admin ID: Admin2</span>
<span class="go">Enter password:</span>
<span class="go">Insert the administrator card of Admin2 for two-factor authentication.</span>

<span class="go">KK-Cryptoservice `KK-CSOne` at 10.30.0.2 has been registered successfully.</span>
</pre></div>
</div>
</section>
<section id="clikk-kk-cryptoservice-list">
<h3><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">kk-cryptoservice</span> <span class="pre">list</span></code><a class="headerlink" href="#clikk-kk-cryptoservice-list" title="Link to this heading"></a></h3>
<p>List all available KK-Cryptoservice instances.</p>
<p><strong>Flags</strong>: None.</p>
<p><strong>Privilege level</strong>: <strong>NORMAL</strong></p>
<p><strong>Error messages</strong>:</p>
<ul>
<li><p><em>Message</em>: Authentication failed!</p>
<p><em>Likely cause</em>: Wrong admin ID, or wrong password.</p>
</li>
</ul>
<p><strong>Usage example</strong>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<p>$ clikk kk-cryptoservice list</p>
<blockquote>
<div><p>Enter admin ID: Admin1
Enter password:</p>
<p>KK-Cryptoservice names:
KK-CSKriptabox
KK-CSBuilder</p>
</div></blockquote>
</section>
<section id="clikk-kk-cryptoservice-info">
<h3><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">kk-cryptoservice</span> <span class="pre">info</span></code><a class="headerlink" href="#clikk-kk-cryptoservice-info" title="Link to this heading"></a></h3>
<p>Retrieve information about a KK-Manager-DR instance.</p>
<p>The information includes the KK-Manager-DR machine’s QE ID, registration date, and the list of partitions
added to the instance.</p>
<p><strong>Flags</strong>:</p>
<dl class="option-list">
<dt><kbd><span class="option">--kk-cryptoservice-name=<var>&lt;server name&gt;</var></span></kbd></dt>
<dd><p>The identifying name of the KK-Cryptoservice instance.</p>
</dd>
</dl>
<p><strong>Privilege level</strong>: <strong>NORMAL</strong></p>
<p><strong>Error messages</strong>:</p>
<ul>
<li><p><em>Message</em>: Authentication failed!</p>
<p><em>Likely cause</em>: Wrong admin ID, or wrong password.</p>
</li>
<li><p><em>Message</em>: KK-Cryptoservice with the specified name does not exist!</p>
<p><em>Likely cause</em>: KK-Cryptoservice instance with the given name does not exist.</p>
</li>
</ul>
<p><strong>Usage example</strong>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>clikk<span class="w"> </span>kk-cryptoservice<span class="w"> </span>info<span class="w"> </span>--kk-cryptoservice-name<span class="o">=</span>kk-csBuilder

<span class="go">Enter admin ID: Admin1</span>
<span class="go">Enter password:</span>

<span class="go">KK-Cryptoservice ID: 8F0FFCDCXXXXXXXXXXXXXXXXXXXXXX</span>
<span class="go">KK-Cryptoservice name: KK-CSBuilder</span>
<span class="go">Registration date: 2023-03-21 15:01:12 SE Asia Standard Time</span>
<span class="go">Partition ID(s): 3</span>
</pre></div>
</div>
</section>
<section id="clikk-kk-cryptoservice-update">
<h3><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">kk-cryptoservice</span> <span class="pre">update</span></code><a class="headerlink" href="#clikk-kk-cryptoservice-update" title="Link to this heading"></a></h3>
<p>Update the name of a KK-Cryptoservice instance.</p>
<p><strong>Flags</strong>:</p>
<dl class="option-list">
<dt><kbd><span class="option">--kk-cryptoservice-name=<var>&lt;server name&gt;</var></span></kbd></dt>
<dd><p>The identifying name of the KK-Cryptoservice instance.</p>
</dd>
<dt><kbd><span class="option">--kk-cryptoservice-new-name=<var>&lt;server name&gt;</var></span></kbd></dt>
<dd><p>The new identifying name of the KK-Cryptoservice instance.</p>
</dd>
</dl>
<p><strong>Privilege level</strong>: <strong>HIGH</strong></p>
<p><strong>Error messages</strong>:</p>
<ul>
<li><p><em>Message</em>: Authentication failed!</p>
<p><em>Likely cause</em>: Wrong admin ID, wrong password, or invalid administrator card.</p>
</li>
<li><p><em>Message</em>: KK-Cryptoservice with the specified name does not exist!</p>
<p><em>Likely cause</em>: KK-Cryptoservice instance with the given name does not exist.</p>
</li>
<li><p><em>Message</em>: New name must be different from current name!</p>
<p><em>Likely cause</em>: New name is the same as the instance’s current name.</p>
</li>
</ul>
<p><strong>Usage example</strong>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>clikk<span class="w"> </span>kk-cryptoservice<span class="w"> </span>update<span class="w"> </span>--kk-cryptoservice-name<span class="o">=</span>kk-csBuilder<span class="w"> </span>--kk-cryptoservice-new-name<span class="o">=</span>KK-CSBuilderr

<span class="go">Enter admin ID: Admin1</span>
<span class="go">Enter password:</span>
<span class="go">Insert the administrator card of Admin1 for two-factor authentication.</span>

<span class="go">KK-Cryptoservice instance name has been updated successfully.</span>
</pre></div>
</div>
</section>
<section id="clikk-kk-cryptoservice-add-partition">
<h3><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">kk-cryptoservice</span> <span class="pre">add-partition</span></code><a class="headerlink" href="#clikk-kk-cryptoservice-add-partition" title="Link to this heading"></a></h3>
<p>Add a partition to a given KK-Cryptoservice instance.</p>
<p>This allows applications connected to the KK-Cryptoservice instance to access the partition. The partition password
is still required, however.</p>
<p><strong>Flags</strong>:</p>
<dl class="option-list">
<dt><kbd><span class="option">--kk-cryptoservice-name=<var>&lt;server name&gt;</var></span></kbd></dt>
<dd><p>The identifying name of the KK-Cryptoservice instance.</p>
</dd>
<dt><kbd><span class="option">--partition-id=<var>&lt;partition ID&gt;</var></span></kbd></dt>
<dd><p>The identifier of the partition.</p>
</dd>
</dl>
<p><strong>Privilege level</strong>: <strong>HIGH</strong></p>
<p><strong>Error messages</strong>:</p>
<ul>
<li><p><em>Message</em>: Authentication failed!</p>
<p><em>Likely cause</em>: Wrong admin ID, wrong password, or invalid administrator card.</p>
</li>
<li><p><em>Message</em>: KK-Cryptoservice with the specified name does not exist!</p>
<p><em>Likely cause</em>: KK-Cryptoservice instance with the given name does not exist.</p>
</li>
<li><p><em>Message</em>: Partition ID must be between 1 and 10000, inclusive!</p>
<p><em>Likely cause</em>: Partition ID is out of range.</p>
</li>
<li><p><em>Message</em>: Partition ID does not exist!</p>
<p><em>Likely cause</em>: Partition with the given ID does not exist.</p>
</li>
</ul>
<p><strong>Usage example</strong>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>clikk<span class="w"> </span>kk-cryptoservice<span class="w"> </span>add-partition<span class="w"> </span>--kk-cryptoservice-name<span class="o">=</span>kk-csBuilder<span class="w"> </span>--partition-id<span class="o">=</span><span class="m">1</span>

<span class="go">Enter admin ID: Admin1</span>
<span class="go">Enter password:</span>

<span class="go">Partition has been added to the KK-Cryptoservice instance successfully.</span>
</pre></div>
</div>
</section>
<section id="clikk-kk-cryptoservice-delete-partition">
<h3><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">kk-cryptoservice</span> <span class="pre">delete-partition</span></code><a class="headerlink" href="#clikk-kk-cryptoservice-delete-partition" title="Link to this heading"></a></h3>
<p>Remove a partition from a given KK-Cryptoservice instance.</p>
<p>This will cause applications connected to the KK-Cryptoservice instance to lose access to the partition.</p>
<p><strong>Flags</strong>:</p>
<dl class="option-list">
<dt><kbd><span class="option">--kk-cryptoservice-name=<var>&lt;server name&gt;</var></span></kbd></dt>
<dd><p>The identifying name of the KK-Cryptoservice instance.</p>
</dd>
<dt><kbd><span class="option">--partition-id=<var>&lt;partition ID&gt;</var></span></kbd></dt>
<dd><p>The identifier of the partition.</p>
</dd>
</dl>
<p><strong>Privilege level</strong>: <strong>HIGH</strong></p>
<p><strong>Error messages</strong>:</p>
<ul>
<li><p><em>Message</em>: Authentication failed!</p>
<p><em>Likely cause</em>: Wrong admin ID, wrong password, or invalid administrator card.</p>
</li>
<li><p><em>Message</em>: KK-Cryptoservice with the specified name does not exist!</p>
<p><em>Likely cause</em>: KK-Cryptoservice instance with the given name does not exist.</p>
</li>
<li><p><em>Message</em>: Partition ID must be between 1 and 10000, inclusive!</p>
<p><em>Likely cause</em>: Partition ID is out of range.</p>
</li>
<li><p><em>Message</em>: Partition ID does not exist!</p>
<p><em>Likely cause</em>: Partition with the given ID does not exist.</p>
</li>
<li><p><em>Message</em>: The partition is not linked to the KK-Cryptoservice.</p>
<p><em>Likely cause</em>: Partition with the given ID has not been added to the given KK-Cryptoservice instance.</p>
</li>
</ul>
<p><strong>Usage example</strong>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>clikk<span class="w"> </span>kk-cryptoservice<span class="w"> </span>delete-partition<span class="w"> </span>--kk-cryptoservice-name<span class="o">=</span>kkcsOne<span class="w"> </span>--partition-id<span class="o">=</span><span class="m">1</span>

<span class="go">This will remove a partition from the given KK-Cryptoservice instance.</span>
<span class="go">Applications that access that partition through the given KK-Cryptoservice instance will be affected.</span>
<span class="go">Manual replication must be done after this command has been executed.</span>
<span class="go">Are you sure you want to continue? Type `o{0` to continue, or press Enter to cancel.</span>
<span class="go">&gt; o{0</span>

<span class="go">Enter admin ID: Admin1</span>
<span class="go">Enter password:</span>
<span class="go">Insert the administrator card of Admin1 for two-factor authentication.</span>

<span class="go">Partition has been removed from the KK-Cryptoservice instance successfully.</span>
</pre></div>
</div>
</section>
<section id="clikk-kk-cryptoservice-request-delete">
<h3><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">kk-cryptoservice</span> <span class="pre">request-delete</span></code><a class="headerlink" href="#clikk-kk-cryptoservice-request-delete" title="Link to this heading"></a></h3>
<p>Generate a KK-Cryptoservice deletion request file.</p>
<p>This is done if the KK-Cryptoservice machine has been rendered inoperable and the machine is considered lost.
Send the generated request file to Klavis Kripta’s sales team to obtain a signed permission file.</p>
<p><strong>Flags</strong>:</p>
<dl class="option-list">
<dt><kbd><span class="option">--kk-cryptoservice-name=<var>&lt;server name&gt;</var></span></kbd></dt>
<dd><p>The identifying name of the KK-Cryptoservice instance.</p>
</dd>
<dt><kbd><span class="option">--out-delete-request=<var>&lt;path to output file&gt;</var></span></kbd></dt>
<dd><p>The absolute path where the deletion request will be written to.</p>
</dd>
</dl>
<p><strong>Privilege level</strong>: <strong>NORMAL</strong></p>
<p><strong>Error messages</strong>:</p>
<ul>
<li><p><em>Message</em>: Authentication failed!</p>
<p><em>Likely cause</em>: Wrong admin ID, wrong password, or invalid administrator card.</p>
</li>
<li><p><em>Message</em>: KK-Cryptoservice does not exist!</p>
<p><em>Likely cause</em>: KK-Cryptoservice with the given name does not exist.</p>
</li>
<li><p><em>Message</em>: Output filename already exists!</p>
<p><em>Likely cause</em>: Output path is not empty.</p>
</li>
<li><p><em>Message</em>: Failed to create output file!</p>
<p><em>Likely cause</em>: Unable to write to the given output path.</p>
</li>
</ul>
<p><strong>Usage example</strong>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>clikk<span class="w"> </span>kk-cryptoservice<span class="w"> </span>request-delete<span class="w"> </span>--kk-cryptoservice-name<span class="o">=</span>kkcsOne<span class="w"> </span>--out-delete-request<span class="o">=</span>/home/User/Documents/deleterequest.file

<span class="go">Enter admin ID: Admin1</span>
<span class="go">Enter password:</span>
<span class="go">Insert the administrator card of Admin1 for two-factor authentication.</span>

<span class="go">Dual control authentication -- credential of second user is required.</span>
<span class="go">Admin1 is currently logged in.</span>

<span class="go">Enter admin ID: Admin2</span>
<span class="go">Enter password:</span>
<span class="go">Insert the administrator card of Admin2 for two-factor authentication.</span>

<span class="go">Permission file to delete KK-Cryptoservice `kkcsOne` has been generated and written successfully to /home/User/Documents/deleterequest.file.</span>
</pre></div>
</div>
</section>
<section id="clikk-kk-cryptoservice-delete">
<h3><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">kk-cryptoservice</span> <span class="pre">delete</span></code><a class="headerlink" href="#clikk-kk-cryptoservice-delete" title="Link to this heading"></a></h3>
<p>Delete a KK-Cryptoservice instance.</p>
<p>Depending on the state of the KK-Manager-DR, this command can perform a soft delete or a hard delete.
Refer to <a class="reference internal" href="#clikk-kk-manager-delete-dr"><span class="std std-ref">clikk kk-manager delete-dr</span></a> for explanation on
soft deletion and hard deletion.</p>
<p><strong>Flags</strong>:</p>
<dl class="option-list">
<dt><kbd><span class="option">--kk-cryptoservice-name=<var>&lt;server name&gt;</var></span></kbd></dt>
<dd><p>The identifying name of the KK-Cryptoservice instance.</p>
</dd>
<dt><kbd><span class="option">--permission=<var>&lt;path to permission file&gt;</var></span></kbd></dt>
<dd><p>The absolute path to the permission file. Optional.</p>
</dd>
</dl>
<p><strong>Privilege level</strong>: <strong>CRITICAL</strong></p>
<p><strong>Error messages</strong>:</p>
<ul>
<li><p><em>Message</em>: Authentication failed!</p>
<p><em>Likely cause</em>: Wrong admin ID, wrong password, or invalid administrator card.</p>
</li>
<li><p><em>Message</em>: KK-Cryptoservice does not exist!</p>
<p><em>Likely cause</em>: KK-Cryptoservice with the given name does not exist.</p>
</li>
<li><p><em>Message</em>: Invalid file path!</p>
<p><em>Likely cause</em>: Wrong path to permission file.</p>
</li>
<li><p><em>Message</em>: Invalid permission file!</p>
<p><em>Likely cause</em>: File is not a permission file, or permission file is corrupt.</p>
</li>
</ul>
<p><strong>Usage example</strong>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>clikk<span class="w"> </span>kk-cryptoservice<span class="w"> </span>delete<span class="w"> </span>--kk-cryptoservice-name<span class="o">=</span>kkcsOne

<span class="go">Enter admin ID: Admin1</span>
<span class="go">Enter password:</span>
<span class="go">Insert the administrator card of Admin1 for two-factor authentication.</span>

<span class="go">Dual control authentication -- credential of second user is required.</span>
<span class="go">Admin1 is currently logged in.</span>

<span class="go">Enter admin ID: Admin2</span>
<span class="go">Enter password:</span>
<span class="go">Insert the administrator card of Admin2 for two-factor authentication.</span>

<span class="go">KK-Cryptoservice instance has been deleted successfully.</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>clikk<span class="w"> </span>kk-cryptoservice<span class="w"> </span>delete<span class="w"> </span>--kk-cryptoservice-name<span class="o">=</span>kkcsOne<span class="w"> </span>--permission<span class="o">=</span>/home/User/Documents/permission.file
</pre></div>
</div>
</section>
</section>
<section id="kk-auditor">
<h2>KK-Auditor<a class="headerlink" href="#kk-auditor" title="Link to this heading"></a></h2>
<p>The main KK-Manager instance connects to a KK-Auditor instance, which records all administrative actions
in a tamper-proof database. As such, it is required to have a KK-Auditor instance registered
to the main KK-Manager instance, and it is not allowed to remove the KK-Auditor instance once it is registered.</p>
<p>CLIKK offers a number of commands for managing the KK-Auditor instance.</p>
<section id="clikk-kk-auditor-add">
<h3><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">kk-auditor</span> <span class="pre">add</span></code><a class="headerlink" href="#clikk-kk-auditor-add" title="Link to this heading"></a></h3>
<p>Register a KK-Auditor instance.</p>
<p>Typically, administrators need not run this command, as KK-Auditor registration happens automatically
during key ceremony, KK-Manager-DR promotion, and KK-Manager restoration.</p>
<p>Registering a new KK-Auditor instance automatically unregisters the previously registered instance.</p>
<p><strong>Flags</strong>:</p>
<dl class="option-list">
<dt><kbd><span class="option">--kk-manager-collateral-path=<var>&lt;path to collateral file&gt;</var></span></kbd></dt>
<dd><p>The absolute path to the main KK-Manager machine’s collateral file.</p>
</dd>
<dt><kbd><span class="option">--kk-auditor-collateral-path=<var>&lt;path to collateral file&gt;</var></span></kbd></dt>
<dd><p>The absolute path to the KK-Auditor machine’s collateral file.</p>
</dd>
<dt><kbd><span class="option">--kk-auditor-host=<var>&lt;instance host&gt;</var></span></kbd></dt>
<dd><p>The host address of the KK-Auditor instance.</p>
</dd>
<dt><kbd><span class="option">--kk-auditor-port=<var>&lt;instance port&gt;</var></span></kbd></dt>
<dd><p>The port of the KK-Auditor instance.</p>
</dd>
</dl>
<p><strong>Privilege level</strong>: <strong>CRITICAL</strong></p>
<p><strong>Error messages</strong>:</p>
<ul>
<li><p><em>Message</em>: Authentication failed!</p>
<p><em>Likely cause</em>: Wrong admin ID, wrong password, or invalid administrator card.</p>
</li>
<li><p><em>Message</em>: Failed to open the specified collateral file!</p>
<p><em>Likely cause</em>: Wrong path to certificate file.</p>
</li>
<li><p><em>Message</em>: Invalid collateral file!</p>
<p><em>Likely cause</em>: File is not a collateral file or is corrupted.</p>
</li>
<li><p><em>Message</em>: Failed to connect to KK-Auditor!</p>
<p><em>Likely cause</em>: Wrong host address and/or port, or connection cannot be established.</p>
</li>
</ul>
<p><strong>Usage example</strong>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>clikk<span class="w"> </span>kk-auditor<span class="w"> </span>add<span class="w"> </span>--kk-manager-collateral-path<span class="o">=</span>./collateral_00A065310000.json<span class="w"> </span>--kk-auditor-collateral-path<span class="o">=</span>./collateral_00A065310000.json<span class="w"> </span>--kk-auditor-host<span class="o">=</span><span class="m">10</span>.30.0.2<span class="w"> </span>--kk-auditor-port<span class="o">=</span><span class="m">7001</span>

<span class="go">Enter admin ID: Admin1</span>
<span class="go">Enter password:</span>
<span class="go">Insert the administrator card of Admin1 for two-factor authentication.</span>

<span class="go">Dual control authentication -- credential of second user is required.</span>
<span class="go">Admin1 is currently logged in.</span>

<span class="go">Enter admin ID: Admin2</span>
<span class="go">Enter password:</span>
<span class="go">Insert the administrator card of Admin2 for two-factor authentication.</span>

<span class="go">KK-Auditor instance at 10.30.0.2 has been registered successfully.</span>
</pre></div>
</div>
</section>
<section id="clikk-kk-auditor-verify">
<h3><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">kk-auditor</span> <span class="pre">verify</span></code><a class="headerlink" href="#clikk-kk-auditor-verify" title="Link to this heading"></a></h3>
<p>Verify the integrity of the audit logs.</p>
<p><strong>Flags</strong>: None.</p>
<p><strong>Privilege level</strong>: <strong>NORMAL</strong></p>
<p><strong>Error messages</strong>:</p>
<ul>
<li><p><em>Message</em>: Authentication failed!</p>
<p><em>Likely cause</em>: Wrong admin ID, wrong password, or invalid administrator card.</p>
</li>
</ul>
<p><strong>Usage example</strong>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>clikk<span class="w"> </span>kk-auditor<span class="w"> </span>verify

<span class="go">Enter admin ID: Admin1</span>
<span class="go">Enter password:</span>

<span class="go">KK-Auditor database has been verified successfully.</span>
<span class="go">The audit logs have perfect integrity.</span>
</pre></div>
</div>
</section>
<section id="clikk-kk-auditor-export">
<h3><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">kk-auditor</span> <span class="pre">export</span></code><a class="headerlink" href="#clikk-kk-auditor-export" title="Link to this heading"></a></h3>
<p>Export the audit logs within a certain date range.</p>
<p>The audit logs are exported in CSV format. The exported audit logs will be written to the <code class="docutils literal notranslate"><span class="pre">export</span></code> directory
within KK-Auditor’s working directory.</p>
<p><strong>Flags</strong>:</p>
<dl class="option-list">
<dt><kbd><span class="option">--from-date=<var>&lt;start date&gt;</var></span></kbd></dt>
<dd><p>The start date for the audit log export. Must be in YYYYMMDD format.</p>
</dd>
<dt><kbd><span class="option">--to-date=<var>&lt;end date&gt;</var></span></kbd></dt>
<dd><p>The end date for the audit log export. Must be in YYYYMMDD format.</p>
</dd>
</dl>
<p><strong>Privilege level</strong>: <strong>HIGH</strong></p>
<p><strong>Error messages</strong>:</p>
<ul>
<li><p><em>Message</em>: Authentication failed!</p>
<p><em>Likely cause</em>: Wrong admin ID, wrong password, or invalid administrator card.</p>
</li>
<li><p><em>Message</em>: Invalid date!</p>
<p><em>Likely cause</em>: Incorrect date format, start date is chronologically after end date,
or either dates are in the future.</p>
</li>
<li><p><em>Message</em>: Audit log export/archive process is in progress!</p>
<p><em>Likely cause</em>: KK-Auditor is busy with another operation. Wait until operation finishes.</p>
</li>
</ul>
<p><strong>Usage example</strong>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>clikk<span class="w"> </span>kk-auditor<span class="w"> </span><span class="nb">export</span><span class="w"> </span>--from-date<span class="o">=</span><span class="m">20230319</span><span class="w"> </span>--to-date<span class="o">=</span><span class="m">20230320</span>

<span class="go">Enter admin ID: Admin1</span>
<span class="go">Enter password:</span>
<span class="go">Insert the administrator card of Admin1 for two-factor authentication.</span>

<span class="go">Audit entries have been successfully exported in the KK-Auditor machine to /var/local/kriptakey/kk-auditor/export/exported_KK-A_20230319_to_20230320.csv.</span>
<span class="go">Total exported entry: 32</span>
</pre></div>
</div>
</section>
<section id="clikk-kk-auditor-archive">
<h3><code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">kk-auditor</span> <span class="pre">archive</span></code><a class="headerlink" href="#clikk-kk-auditor-archive" title="Link to this heading"></a></h3>
<p>Archive audit log entries.</p>
<p>This command works similarly to <code class="docutils literal notranslate"><span class="pre">clikk</span> <span class="pre">kk-auditor</span> <span class="pre">export</span></code>, with two differences — the archived entries
are removed from the audit log, and the archive always starts from the earliest entry.</p>
<p>The archived audit logs are exported in CSV format. The archived audit logs will be written to
the <code class="docutils literal notranslate"><span class="pre">archive</span></code> directory within KK-Auditor’s working directory.</p>
<p><strong>Flags</strong>:</p>
<dl class="option-list">
<dt><kbd><span class="option">--until-date=<var>&lt;start date&gt;</var></span></kbd></dt>
<dd><p>The end date for the audit log archival. Must be in YYYYMMDD format. Mutually exclusive with <code class="docutils literal notranslate"><span class="pre">-all</span></code>.</p>
</dd>
<dt><kbd><span class="option">--all</span></kbd></dt>
<dd><p>If present, archive all audit log entries. Mutually exclusive with <code class="docutils literal notranslate"><span class="pre">--until-date</span></code>.</p>
</dd>
</dl>
<p><strong>Privilege level</strong>: <strong>CRITICAL</strong></p>
<p><strong>Error messages</strong>:</p>
<ul>
<li><p><em>Message</em>: Authentication failed!</p>
<p><em>Likely cause</em>: Wrong admin ID, wrong password, or invalid administrator card.</p>
</li>
<li><p><em>Message</em>: Invalid date!</p>
<p><em>Likely cause</em>: Incorrect date format, start date is chronologically after end date,
or either dates are in the future.</p>
</li>
<li><p><em>Message</em>: Audit log export/archive process is in progress!</p>
<p><em>Likely cause</em>: KK-Auditor is busy with another operation. Wait until operation finishes.</p>
</li>
</ul>
<p><strong>Usage example</strong>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>clikk<span class="w"> </span>kk-auditor<span class="w"> </span>archive<span class="w"> </span>--until-date<span class="o">=</span><span class="m">20230320</span>

<span class="go">Enter admin ID: Admin1</span>
<span class="go">Enter password:</span>
<span class="go">Insert the administrator card of Admin1 for two-factor authentication.</span>

<span class="go">Dual control authentication -- credential of second user is required.</span>
<span class="go">Admin1 is currently logged in.</span>

<span class="go">Enter admin ID: Admin2</span>
<span class="go">Enter password:</span>
<span class="go">Insert the administrator card of Admin2 for two-factor authentication.</span>

<span class="go">KK-Auditor logs have been archived successfully in the KK-Auditor machine to /var/local/kriptakey/kk-auditor/archive/archived_KK-A_20230320_to_20230320_2.csv.</span>
<span class="go">Total archived entries: 12</span>
</pre></div>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="kripta-key-structure.html" class="btn btn-neutral float-left" title="Kripta Key management overview" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="supplementary-clikk-usage.html" class="btn btn-neutral float-right" title="Supplementary CLIKK usage" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, PT Klavis Kripta Inovasi.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>